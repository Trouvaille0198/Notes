<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><meta http-equiv=X-UA-Compatible content="IE=edge, chrome=1"><title>BeautifulSoup4 - 伤心肠粉的酱油碟子</title><meta name=author content>
<meta name=author-link content><meta name=description content='BeautifulSoup4 基本操作 导入 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 from bs4 import BeautifulSoup html_doc = """ <html><head><title>The Dormouse&#39;s story</title></head> <body> <p class="title"><b>The Dormouse&#39;s story</b></p> <p class="story">Once upon'><meta name=keywords content='Python'><meta itemprop=name content="BeautifulSoup4"><meta itemprop=description content='BeautifulSoup4 基本操作 导入 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 from bs4 import BeautifulSoup html_doc = """ <html><head><title>The Dormouse&#39;s story</title></head> <body> <p class="title"><b>The Dormouse&#39;s story</b></p> <p class="story">Once upon'><meta itemprop=datePublished content="2021-04-17T00:00:00+00:00"><meta itemprop=dateModified content="2024-04-27T05:32:21+00:00"><meta itemprop=wordCount content="3699"><meta itemprop=image content="https://trouvaille0198.github.io/logo.png"><meta itemprop=keywords content="Python"><meta property="og:url" content="https://trouvaille0198.github.io/Notes/posts/%E4%B8%93%E4%B8%9A/python/crawler/beautifulsoup4/"><meta property="og:site_name" content="伤心肠粉的酱油碟子"><meta property="og:title" content="BeautifulSoup4"><meta property="og:description" content='BeautifulSoup4 基本操作 导入 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 from bs4 import BeautifulSoup html_doc = """ <html><head><title>The Dormouse&#39;s story</title></head> <body> <p class="title"><b>The Dormouse&#39;s story</b></p> <p class="story">Once upon'><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-17T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-27T05:32:21+00:00"><meta property="article:tag" content="Python"><meta property="og:image" content="https://trouvaille0198.github.io/logo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://trouvaille0198.github.io/logo.png"><meta name=twitter:title content="BeautifulSoup4"><meta name=twitter:description content='BeautifulSoup4 基本操作 导入 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 from bs4 import BeautifulSoup html_doc = """ <html><head><title>The Dormouse&#39;s story</title></head> <body> <p class="title"><b>The Dormouse&#39;s story</b></p> <p class="story">Once upon'><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#252627"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://trouvaille0198.github.io/Notes/posts/%E4%B8%93%E4%B8%9A/python/crawler/beautifulsoup4/><link rel=prev href=https://trouvaille0198.github.io/Notes/posts/%E4%B8%93%E4%B8%9A/python/%E5%B8%B8%E7%94%A8%E5%BA%93/bisect/><link rel=next href=https://trouvaille0198.github.io/Notes/posts/%E4%B8%93%E4%B8%9A/python/%E5%B8%B8%E7%94%A8%E5%BA%93/apscheduler/><link rel=stylesheet href=/Notes/lib/normalize/normalize.min.css><link rel=stylesheet href=/Notes/css/style.min.css><link rel=stylesheet href=/Notes/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/Notes/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"BeautifulSoup4","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/%E4%B8%93%E4%B8%9A\/python\/crawler\/beautifulsoup4\/"},"genre":"posts","keywords":"Python","wordcount":3699,"url":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/%E4%B8%93%E4%B8%9A\/python\/crawler\/beautifulsoup4\/","datePublished":"2021-04-17T00:00:00+00:00","dateModified":"2024-04-27T05:32:21+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"MelonCholi"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子><span class=header-title-text>伤心肠粉</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/Notes/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/Notes/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/Notes/posts/>文章</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子><span class=header-title-text>伤心肠粉</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/Notes/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/Notes/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/Notes/posts/>文章</a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2><div class="toc-content always-active" id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>BeautifulSoup4</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle"></i>
MelonCholi</span></span>
<span class=post-category>收录于 <a href=/Notes/categories/python/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;Python</a></span></div><div class=post-meta-line><span title="2021-04-17 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-04-17>2021-04-17</time>
</span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 3699 字&nbsp;
<i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 8 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#基本操作>基本操作</a><ul><li><a href=#导入>导入</a></li><li><a href=#标准缩进格式>标准缩进格式</a></li></ul></li><li><a href=#对象>对象</a><ul><li><a href=#tag>Tag</a><ul><li><a href=#name>.name</a></li><li><a href=#string>.string</a></li><li><a href=#attributes>[‘attributes’]</a></li><li><a href=#attrs>.attrs</a></li></ul></li><li><a href=#navigablestring>NavigableString</a><ul><li><a href=#将其转换为-unicode-字符串>将其转换为 unicode 字符串</a></li><li><a href=#replace_with>replace_with()</a></li></ul></li><li><a href=#beautifulsoup>BeautifulSoup</a><ul><li><a href=#name-1>.name</a></li></ul></li><li><a href=#comment>Comment</a></li></ul></li><li><a href=#遍历文档树>遍历文档树</a><ul><li><a href=#子节点>子节点</a><ul><li><a href=#contents>.contents</a><ul><li><a href=#tag-1>Tag</a></li><li><a href=#navigablestring-1>NavigableString</a></li><li><a href=#beautifulsoup-1>BeautifulSoup</a></li></ul></li><li><a href=#children>.children</a></li><li><a href=#descendants>.descendants</a></li></ul></li><li><a href=#父节点>父节点</a><ul><li><a href=#parent>.parent</a></li><li><a href=#parents>.parents</a></li></ul></li><li><a href=#兄弟节点>兄弟节点</a><ul><li><a href=#next_sibling-和-previous_sibling>.next_sibling 和 .previous_sibling</a></li><li><a href=#next_siblings-和-previous_siblings>.next_siblings 和 .previous_siblings</a></li></ul></li></ul></li><li><a href=#搜索文档树>搜索文档树</a><ul><li><a href=#过滤器>过滤器</a><ul><li><a href=#字符串>字符串</a></li><li><a href=#正则表达式>正则表达式</a></li><li><a href=#列表>列表</a></li><li><a href=#true>True</a></li><li><a href=#方法>方法</a></li></ul></li><li><a href=#find_all>find_all()</a><ul><li><a href=#name-2>name</a></li><li><a href=#keyword>keyword</a></li><li><a href=#string-1>string</a></li><li><a href=#limit>limit</a></li><li><a href=#recursive>recursive</a></li><li><a href=#attrs-1>attrs</a></li><li><a href=#简写方式>简写方式</a></li></ul></li><li><a href=#find>find()</a></li><li><a href=#其他方法>其他方法</a></li></ul></li><li><a href=#css选择器>CSS选择器</a></li><li><a href=#其他>其他</a><ul><li><a href=#复制beautiful-soup对象>复制Beautiful Soup对象</a><ul><li><a href=#get_text>get_text()</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=beautifulsoup4>BeautifulSoup4</h1><h2 id=基本操作>基本操作</h2><h3 id=导入>导入</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>bs4</span> <span class=kn>import</span> <span class=n>BeautifulSoup</span>
</span></span><span class=line><span class=cl><span class=n>html_doc</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#39;s story&lt;/title&gt;&lt;/head&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&lt;body&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&lt;p class=&#34;title&#34;&gt;&lt;b&gt;The Dormouse&#39;s story&lt;/b&gt;&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>&lt;p class=&#34;story&#34;&gt;Once upon a time there were three little sisters; and their names were
</span></span></span><span class=line><span class=cl><span class=s2>&lt;a href=&#34;http://example.com/elsie&#34; class=&#34;sister&#34; id=&#34;link1&#34;&gt;Elsie&lt;/a&gt;,
</span></span></span><span class=line><span class=cl><span class=s2>&lt;a href=&#34;http://example.com/lacie&#34; class=&#34;sister&#34; id=&#34;link2&#34;&gt;Lacie&lt;/a&gt; and
</span></span></span><span class=line><span class=cl><span class=s2>&lt;a href=&#34;http://example.com/tillie&#34; class=&#34;sister&#34; id=&#34;link3&#34;&gt;Tillie&lt;/a&gt;;
</span></span></span><span class=line><span class=cl><span class=s2>and they lived at the bottom of a well.&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>&lt;p class=&#34;story&#34;&gt;...&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>html_doc</span><span class=p>,</span><span class=s2>&#34;html.parser&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><table><thead><tr><th>解析器</th><th>使用方法</th><th>优势</th><th>劣势</th></tr></thead><tbody><tr><td>Python标准库</td><td><code>BeautifulSoup(markup, "html.parser")</code></td><td>Python的内置标准库执行速度适中文档容错能力强</td><td>Python 2.7.3 or 3.2.2)前 的版本中文档容错能力差</td></tr><tr><td>lxml HTML 解析器</td><td><code>BeautifulSoup(markup, "lxml")</code></td><td>速度快文档容错能力强</td><td>需要安装C语言库</td></tr><tr><td>lxml XML 解析器</td><td><code>BeautifulSoup(markup, ["lxml-xml"])``BeautifulSoup(markup, "xml")</code></td><td>速度快唯一支持XML的解析器</td><td>需要安装C语言库</td></tr><tr><td>html5lib</td><td><code>BeautifulSoup(markup, "html5lib")</code></td><td>最好的容错性以浏览器的方式解析文档生成HTML5格式的文档</td><td>速度慢不依赖外部扩展</td></tr></tbody></table><h3 id=标准缩进格式>标准缩进格式</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>soup</span><span class=o>.</span><span class=n>prettify</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   The Dormouse&#39;s story
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;title&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    The Dormouse&#39;s story
</span></span><span class=line><span class=cl>   <span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   Once upon a time there were three little sisters; and their names were
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    Elsie
</span></span><span class=line><span class=cl>   <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   ,
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    Lacie
</span></span><span class=line><span class=cl>   <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   and
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    Tillie
</span></span><span class=line><span class=cl>   <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   ;
</span></span><span class=line><span class=cl>and they lived at the bottom of a well.
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   ...
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=对象>对象</h2><h3 id=tag>Tag</h3><p>每个标签节点就是一个 Tag 对象</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>head</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>a</span> 		<span class=c1>#输出soup中的第一个a标签</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>p</span><span class=o>.</span><span class=n>b</span>  	<span class=c1>#p下的b标签</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;&lt;</span><span class=nt>title</span><span class=p>&gt;</span>The Dormouse&#39;s story<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>The Dormouse&#39;s story<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>以下是 Tag 对象的部分属性</p><h4 id=name>.name</h4><p>标签名属性</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>head</span><span class=o>.</span><span class=n>name</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>a</span><span class=o>.</span><span class=n>name</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>head
</span></span><span class=line><span class=cl>a
</span></span></code></pre></td></tr></table></div></div><h4 id=string>.string</h4><p>文本内容属性</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>head</span><span class=o>.</span><span class=n>string</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>a</span><span class=o>.</span><span class=n>string</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>The</span> <span class=n>Dormouse</span><span class=s1>&#39;s story</span>
</span></span><span class=line><span class=cl><span class=n>Elsie</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=attributes>[‘attributes’]</h4><p>标签指定属性属性</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>a</span><span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>]</span>	<span class=c1>#返回字符串</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>a</span><span class=p>[</span><span class=s1>&#39;class&#39;</span><span class=p>]</span>	<span class=c1>#多值属性返回list</span>
</span></span></code></pre></td></tr></table></div></div><p>返回列表</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>link1
</span></span><span class=line><span class=cl>[&#39;sister&#39;] 
</span></span></code></pre></td></tr></table></div></div><p>如果转换的文档是 XML 格式,那么 tag 中不包含多值属性</p><h4 id=attrs>.attrs</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>a</span><span class=o>.</span><span class=n>attrs</span>
</span></span></code></pre></td></tr></table></div></div><p>输出字典</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>{</span><span class=s1>&#39;href&#39;</span><span class=p>:</span> <span class=s1>&#39;http://example.com/elsie&#39;</span><span class=p>,</span> <span class=s1>&#39;class&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;sister&#39;</span><span class=p>],</span> <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=s1>&#39;link1&#39;</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=navigablestring>NavigableString</h3><p>字符串常被包含在 tag 内.Beautiful Soup 用 <code>NavigableString</code> 类来包装 tag 中的字符串</p><p>直接使用 <em>.stirng</em> 即可获取</p><h4 id=将其转换为-unicode-字符串>将其转换为 unicode 字符串</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>uni_str</span> <span class=o>=</span> <span class=n>unicode</span><span class=p>(</span><span class=n>soup</span><span class=o>.</span><span class=n>head</span><span class=o>.</span><span class=n>string</span><span class=p>)</span> <span class=c1>#在python3中不适用</span>
</span></span><span class=line><span class=cl><span class=n>uni_str</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>soup</span><span class=o>.</span><span class=n>head</span><span class=o>.</span><span class=n>string</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=replace_with>replace_with()</h4><p>tag 中包含的字符串不能编辑,但是可以被替换成其它的字符串</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>head</span><span class=o>.</span><span class=n>string</span><span class=o>.</span><span class=n>replace_with</span><span class=p>(</span><span class=s1>&#39;Harry potter&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=beautifulsoup>BeautifulSoup</h3><p><code>BeautifulSoup</code> 对象表示的是一个文档的全部内容</p><h4 id=name-1>.name</h4><p><code>BeautifulSoup</code> 对象包含了一个值为 “[document]” 的特殊属性，用<code>.name</code>调用</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>name</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>&#39;[document]&#39;
</span></span></code></pre></td></tr></table></div></div><h3 id=comment>Comment</h3><p><code>Comment</code> 对象是一个特殊类型的 <code>NavigableString</code> 对象，是文档的注释部分</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>markup</span> <span class=o>=</span> <span class=s2>&#34;&lt;b&gt;&lt;!--Hey, buddy. Want to buy a used parser?--&gt;&lt;/b&gt;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>markup</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>comment</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>b</span><span class=o>.</span><span class=n>string</span>
</span></span><span class=line><span class=cl><span class=nb>type</span><span class=p>(</span><span class=n>comment</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>当它出现在 HTML 文档中时, <code>Comment</code> 对象会使用特殊的格式输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>bs4.element.Comment
</span></span></code></pre></td></tr></table></div></div><h2 id=遍历文档树>遍历文档树</h2><p>遍历文档树，就是是从根节点 html 标签开始遍历，直到找到目标元素为止，</p><p>通过遍历文档树的方式获取标签节点可以直接通过 <code>.标签名</code>的方式获取</p><ul><li>缺陷<ul><li>如果要找的内容在文档的末尾，那要遍历整个文档才能找到它，速度上就慢了</li><li>只能获取到与之匹配的第一个子节点</li></ul></li></ul><h3 id=子节点>子节点</h3><h4 id=contents>.contents</h4><h5 id=tag-1>Tag</h5><p>Tag<code>的 </code>.contents` 属性可以将 tag 的子节点以列表的方式输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>body</span><span class=o>.</span><span class=n>contents</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>body</span><span class=o>.</span><span class=n>contents</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><p>以列表输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[&#39;\n&#39;,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;title&#34;</span><span class=p>&gt;&lt;</span><span class=nt>b</span><span class=p>&gt;</span>The Dormouse&#39;s story<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> &#39;\n&#39;,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>Once upon a time there were three little sisters; and their names were
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span> and
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>;
</span></span><span class=line><span class=cl> and they lived at the bottom of a well.<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> &#39;\n&#39;,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>...<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> &#39;\n&#39;]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;title&#34;</span><span class=p>&gt;&lt;</span><span class=nt>b</span><span class=p>&gt;</span>The Dormouse&#39;s story<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=navigablestring-1>NavigableString</h5><p>字符串<code>NavigableString</code>没有 <code>.contents</code> 属性,因为字符串没有子节点</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>head</span><span class=o>.</span><span class=n>string</span><span class=o>.</span><span class=n>cotents</span>
</span></span></code></pre></td></tr></table></div></div><p>报错</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ne>AttributeError</span><span class=p>:</span> <span class=s1>&#39;NavigableString&#39;</span> <span class=nb>object</span> <span class=n>has</span> <span class=n>no</span> <span class=n>attribute</span> <span class=s1>&#39;cotents&#39;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=beautifulsoup-1>BeautifulSoup</h5><p><code>BeautifulSoup</code> 对象本身一定会包含子节点,也就是说<code>&lt;html></code>标签也是 <code>BeautifulSoup</code> 对象的子节点</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>contents</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>[</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=o>&lt;</span><span class=n>html</span><span class=o>&gt;&lt;</span><span class=n>head</span><span class=o>&gt;&lt;</span><span class=n>title</span><span class=o>&gt;</span><span class=n>Harry</span> <span class=n>potter</span><span class=o>&lt;/</span><span class=n>title</span><span class=o>&gt;&lt;/</span><span class=n>head</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl> <span class=o>&lt;</span><span class=n>body</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl> <span class=o>&lt;</span><span class=n>p</span> <span class=n>class</span><span class=o>=</span><span class=s2>&#34;title&#34;</span><span class=o>&gt;&lt;</span><span class=n>b</span><span class=o>&gt;</span><span class=n>The</span> <span class=n>Dormouse</span><span class=s1>&#39;s story&lt;/b&gt;&lt;/p&gt;</span>
</span></span><span class=line><span class=cl> <span class=o>&lt;</span><span class=n>p</span> <span class=n>class</span><span class=o>=</span><span class=s2>&#34;story&#34;</span><span class=o>&gt;</span><span class=n>Once</span> <span class=n>upon</span> <span class=n>a</span> <span class=n>time</span> <span class=n>there</span> <span class=n>were</span> <span class=n>three</span> <span class=n>little</span> <span class=n>sisters</span><span class=p>;</span> <span class=ow>and</span> <span class=n>their</span> <span class=n>names</span> <span class=n>were</span>
</span></span><span class=line><span class=cl> <span class=o>&lt;</span><span class=n>a</span> <span class=n>class</span><span class=o>=</span><span class=s2>&#34;sister&#34;</span> <span class=n>href</span><span class=o>=</span><span class=s2>&#34;http://example.com/elsie&#34;</span> <span class=nb>id</span><span class=o>=</span><span class=s2>&#34;link1&#34;</span><span class=o>&gt;</span><span class=n>Elsie</span><span class=o>&lt;/</span><span class=n>a</span><span class=o>&gt;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=o>&lt;</span><span class=n>a</span> <span class=n>class</span><span class=o>=</span><span class=s2>&#34;sister&#34;</span> <span class=n>href</span><span class=o>=</span><span class=s2>&#34;http://example.com/lacie&#34;</span> <span class=nb>id</span><span class=o>=</span><span class=s2>&#34;link2&#34;</span><span class=o>&gt;</span><span class=n>Lacie</span><span class=o>&lt;/</span><span class=n>a</span><span class=o>&gt;</span> <span class=ow>and</span>
</span></span><span class=line><span class=cl> <span class=o>&lt;</span><span class=n>a</span> <span class=n>class</span><span class=o>=</span><span class=s2>&#34;sister&#34;</span> <span class=n>href</span><span class=o>=</span><span class=s2>&#34;http://example.com/tillie&#34;</span> <span class=nb>id</span><span class=o>=</span><span class=s2>&#34;link3&#34;</span><span class=o>&gt;</span><span class=n>Tillie</span><span class=o>&lt;/</span><span class=n>a</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=ow>and</span> <span class=n>they</span> <span class=n>lived</span> <span class=n>at</span> <span class=n>the</span> <span class=n>bottom</span> <span class=n>of</span> <span class=n>a</span> <span class=n>well</span><span class=o>.&lt;/</span><span class=n>p</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl> <span class=o>&lt;</span><span class=n>p</span> <span class=n>class</span><span class=o>=</span><span class=s2>&#34;story&#34;</span><span class=o>&gt;...&lt;/</span><span class=n>p</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl> <span class=o>&lt;/</span><span class=n>body</span><span class=o>&gt;&lt;/</span><span class=n>html</span><span class=o>&gt;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=children>.children</h4><p>通过 tag 的 <code>.children</code> 生成器,可以对 tag 的子节点进行循环</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=n>soup</span><span class=o>.</span><span class=n>body</span><span class=o>.</span><span class=n>children</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>child</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;title&#34;</span><span class=p>&gt;&lt;</span><span class=nt>b</span><span class=p>&gt;</span>The Dormouse&#39;s story<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>Once upon a time there were three little sisters; and their names were
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span> and
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>;
</span></span><span class=line><span class=cl>and they lived at the bottom of a well.<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>...<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=descendants>.descendants</h4><p><code>.contents</code> 和 <code>.children</code> 属性仅包含 tag 的直接子节点，而<code>.descendants</code> 生成器可以对所有 tag 的子孙节点进行递归循环</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=n>soup</span><span class=o>.</span><span class=n>body</span><span class=o>.</span><span class=n>descendants</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>child</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;title&#34;</span><span class=p>&gt;&lt;</span><span class=nt>b</span><span class=p>&gt;</span>The Dormouse&#39;s story<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>The Dormouse&#39;s story<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>The Dormouse&#39;s story
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>Once upon a time there were three little sisters; and their names were
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span> and
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>;
</span></span><span class=line><span class=cl>and they lived at the bottom of a well.<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>Once upon a time there were three little sisters; and their names were
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>Elsie
</span></span><span class=line><span class=cl>,
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>Lacie
</span></span><span class=line><span class=cl> and
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>Tillie
</span></span><span class=line><span class=cl>;
</span></span><span class=line><span class=cl>and they lived at the bottom of a well.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>...<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></td></tr></table></div></div><h3 id=父节点>父节点</h3><h4 id=parent>.parent</h4><p>通过 <code>.parent</code> 属性来获取某个元素的父节点</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>title</span><span class=o>.</span><span class=n>parent</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>title</span><span class=o>.</span><span class=n>string</span><span class=o>.</span><span class=n>parent</span> 	<span class=c1>#字符串也有父节点</span>
</span></span><span class=line><span class=cl><span class=nb>type</span><span class=p>(</span><span class=n>soup</span><span class=o>.</span><span class=n>html</span><span class=o>.</span><span class=n>parent</span><span class=p>)</span>		<span class=c1>#文档的顶层节点比如&lt;html&gt;的父节点是 BeautifulSoup 对象</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>soup</span><span class=o>.</span><span class=n>parent</span><span class=p>)</span>			<span class=c1>#BeautifulSoup 对象的 .parent 是None</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Harry potter<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Harry potter<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>bs4.BeautifulSoup
</span></span><span class=line><span class=cl>None
</span></span></code></pre></td></tr></table></div></div><h4 id=parents>.parents</h4><p>通过元素的 <code>.parents</code> 生成器可以递归得到元素的所有父辈节点</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>parent</span> <span class=ow>in</span> <span class=n>soup</span><span class=o>.</span><span class=n>b</span><span class=o>.</span><span class=n>parents</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>parent</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>p
</span></span><span class=line><span class=cl>body
</span></span><span class=line><span class=cl>html
</span></span><span class=line><span class=cl>[document]
</span></span></code></pre></td></tr></table></div></div><h3 id=兄弟节点>兄弟节点</h3><h4 id=next_sibling-和-previous_sibling>.next_sibling 和 .previous_sibling</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>a</span><span class=o>.</span><span class=n>next_sibling</span>   				<span class=c1>#真实结果是第一个&lt;a&gt;标签和第二个&lt;a&gt;标签之间的顿号和换行符</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>a</span><span class=o>.</span><span class=n>next_sibling</span><span class=o>.</span><span class=n>next_sibling</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>&#39;,\n&#39;
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=next_siblings-和-previous_siblings>.next_siblings 和 .previous_siblings</h4><p>通过 <code>.next_siblings</code> 和 <code>.previous_siblings</code> 生成器可以对当前节点的兄弟节点迭代输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>sibling</span> <span class=ow>in</span> <span class=n>soup</span><span class=o>.</span><span class=n>a</span><span class=o>.</span><span class=n>next_siblings</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=nb>repr</span><span class=p>(</span><span class=n>sibling</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>&#39;,\n&#39;
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>&#39; and\n&#39;
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>&#39;;\nand they lived at the bottom of a well.&#39;
</span></span></code></pre></td></tr></table></div></div><h2 id=搜索文档树>搜索文档树</h2><p>搜索文档树是通过指定标签名来搜索元素，另外还可以通过指定标签的属性值来精确定位某个节点元素</p><p>最常用的两个方法就是 find 和 find_all。这两个方法在 BeatifulSoup 和 Tag 对象上都可以被调用</p><h3 id=过滤器>过滤器</h3><p>过滤器贯穿整个搜索的 API。过滤器可以被用在 tag 的 name 中,节点的属性中,字符串中或他们的混合中</p><h4 id=字符串>字符串</h4><p>在搜索方法中传入一个字符串参数,Beautiful Soup 会查找与字符串完整匹配的内容</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s1>&#39;a&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span></code></pre></td></tr></table></div></div><h4 id=正则表达式>正则表达式</h4><p>Beautiful Soup 会通过正则表达式的 <code>match()</code> 来匹配内容</p><p>下面代码找出所有名字中包含”t”的标签</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>tag</span> <span class=ow>in</span> <span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=s2>&#34;t&#34;</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>tag</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>html
</span></span><span class=line><span class=cl>title
</span></span></code></pre></td></tr></table></div></div><h4 id=列表>列表</h4><p>Beautiful Soup 会将与列表中任一元素匹配的内容返回</p><p>下面代码找到文档中所有&lt;a>标签和&lt;b>标签</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>([</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>])</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>The Dormouse&#39;s story<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span></code></pre></td></tr></table></div></div><h4 id=true>True</h4><p><code>True</code> 可以匹配任何值</p><p>下面代码查找到所有的 tag 名</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>tag</span> <span class=ow>in</span> <span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=kc>True</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>tag</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>html
</span></span><span class=line><span class=cl>head
</span></span><span class=line><span class=cl>title
</span></span><span class=line><span class=cl>body
</span></span><span class=line><span class=cl>p
</span></span><span class=line><span class=cl>b
</span></span><span class=line><span class=cl>p
</span></span><span class=line><span class=cl>a
</span></span><span class=line><span class=cl>a
</span></span><span class=line><span class=cl>a
</span></span><span class=line><span class=cl>p
</span></span></code></pre></td></tr></table></div></div><h4 id=方法>方法</h4><p>如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数 <a href=https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/#id91 target=_blank rel="external nofollow noopener noreferrer">[../../Archive/HomeWork/计算机英语/4]</a> ,如果这个方法返回 <code>True</code> 表示当前元素匹配并且被找到,如果不是则反回 <code>False</code></p><p>下面方法校验了当前元素,如果包含 <code>class</code> 属性却不包含 <code>id</code> 属性,那么将返回 <code>True</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>has_class_but_no_id</span><span class=p>(</span><span class=n>tag</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>tag</span><span class=o>.</span><span class=n>has_attr</span><span class=p>(</span><span class=s1>&#39;class&#39;</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>tag</span><span class=o>.</span><span class=n>has_attr</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=n>has_class_but_no_id</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;title&#34;</span><span class=p>&gt;&lt;</span><span class=nt>b</span><span class=p>&gt;</span>The Dormouse&#39;s story<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>Once upon a time there were three little sisters; and their names were
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span> and
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>;
</span></span><span class=line><span class=cl> and they lived at the bottom of a well.<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;story&#34;</span><span class=p>&gt;</span>...<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>]	
</span></span></code></pre></td></tr></table></div></div><p>通过一个方法来过滤一类标签属性的时候, 这个方法的参数是要被过滤的属性的值, 而不是这个标签</p><p>下面的例子是找出 <code>href</code> 属性不符合指定正则的 <code>a</code> 标签</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>not_lacie</span><span class=p>(</span><span class=n>href</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>href</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=s2>&#34;lacie&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>href</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=n>href</span><span class=o>=</span><span class=n>not_lacie</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span></code></pre></td></tr></table></div></div><h3 id=find_all>find_all()</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>find_all</span><span class=p>(</span> <span class=n>name</span> <span class=p>,</span> <span class=n>attrs</span> <span class=p>,</span> <span class=n>recursive</span> <span class=p>,</span> <span class=n>string</span> <span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span> <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>find_all()</code> 方法搜索当前 tag 的所有 tag 子节点,并判断是否符合过滤器的条件</p><p>任意参数的值可以是任一类型的过滤器，字符串，正则表达式，列表，方法或是 <code>True</code></p><p>返回列表</p><h4 id=name-2>name</h4><p><code>name</code> 参数可以查找所有名字为 <code>name</code> 的 tag，字符串对象会被自动忽略掉</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span></code></pre></td></tr></table></div></div><h4 id=keyword>keyword</h4><ol><li>如果一个指定名字的参数不是搜索内置的参数名,搜索时会把该参数当作指定名字 tag 的属性来搜索</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=s1>&#39;link2&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>,</span><span class=s1>&#39;sister&#39;</span><span class=p>,</span><span class=n>href</span><span class=o>=</span><span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=s1>&#39;^.*?la&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span></code></pre></td></tr></table></div></div><ol start=2><li><p>有些 tag 属性在搜索不能使用,比如 HTML5 中的 data-* 属性，但是可以通过 <code>find_all()</code> 方法的 <code>attrs</code> 参数定义一个字典参数来搜索包含特殊属性的 tag</p></li><li><p>标识 CSS 类名的关键字 <code>class</code> 在 Python 中是保留字,使用 <code>class</code> 做参数会导致语法错误.从 Beautiful Soup 的 4.1.1 版本开始,可以通过 <code>class_</code> 参数搜索有指定 CSS 类名的 tag</p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s2>&#34;sister&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>has_six_characters</span><span class=p>(</span><span class=n>css_class</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>css_class</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>css_class</span><span class=p>)</span> <span class=o>==</span> <span class=mi>6</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=n>class_</span><span class=o>=</span><span class=n>has_six_characters</span><span class=p>)</span>                 <span class=c1>#与第一种方法输出相同结果</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/tillie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link3&#34;</span><span class=p>&gt;</span>Tillie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span></code></pre></td></tr></table></div></div><h4 id=string-1>string</h4><p>通过 <code>string</code> 参数可以搜搜文档中的字符串内容</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=n>string</span><span class=o>=</span><span class=s2>&#34;Elsie&#34;</span><span class=p>)</span> <span class=c1>#单独使用时，返回字符串</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=n>string</span><span class=o>=</span><span class=s2>&#34;Elsie&#34;</span><span class=p>)</span> <span class=c1>#与其他参数混合使用时，返回对应的Tag</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[&#39;Elsie&#39;]
</span></span><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span></code></pre></td></tr></table></div></div><h4 id=limit>limit</h4><p><code>find_all()</code> 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.如果我们不需要全部结果,可以使用 <code>limit</code> 参数限制返回结果的数量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>文档树中有 3 个 tag 符合搜索条件,但结果只返回了 2 个,因为我们限制了返回数量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>[<span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/elsie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link1&#34;</span><span class=p>&gt;</span>Elsie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>,
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sister&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://example.com/lacie&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;link2&#34;</span><span class=p>&gt;</span>Lacie<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>]
</span></span></code></pre></td></tr></table></div></div><h4 id=recursive>recursive</h4><p>调用 tag 的 <code>find_all()</code> 方法时,Beautiful Soup 会检索当前 tag 的所有子孙节点,如果只想搜索 tag 的直接子节点,可以使用参数 <code>recursive=False</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>html</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&#34;title&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># [&lt;title&gt;The Dormouse&#39;s story&lt;/title&gt;]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>html</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&#34;title&#34;</span><span class=p>,</span> <span class=n>recursive</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># []</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=attrs-1>attrs</h4><p>传入字典</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>css_class</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=n>attrs</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;class&#39;</span><span class=p>:</span><span class=s1>&#39;primaryconsumers&#39;</span><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=简写方式>简写方式</h4><p><code>find_all()</code> 几乎是 Beautiful Soup 中最常用的搜索方法,所以我们定义了它的简写方法. <code>BeautifulSoup</code> 对象和 <code>tag</code> 对象可以被当作一个方法来使用,这个方法的执行结果与调用这个对象的 <code>find_all()</code> 方法相同</p><p>下面代码是等价的</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>title</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=n>string</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=n>string</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=find>find()</h3><p>find( name , attrs , recursive , string, **kwargs )</p><p><code>find()</code> 方法将返回文档中符合条件的第一个 tag</p><p>下面两行代码是等价的</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># [&lt;title&gt;The Dormouse&#39;s story&lt;/title&gt;]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># &lt;title&gt;The Dormouse&#39;s story&lt;/title&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>唯一的区别是 <code>find_all()</code> 方法的返回结果是值包含一个元素的列表,而 <code>find()</code> 方法直接返回结果</p><p><code>find_all()</code> 方法没有找到目标是返回空列表, <code>find()</code> 方法找不到目标时,返回 <code>None</code></p><p><code>soup.head.title</code> 是 tag 的名字方法的简写.这个简写的原理就是多次调用当前 tag 的 <code>find()</code> 方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>head</span><span class=o>.</span><span class=n>title</span>
</span></span><span class=line><span class=cl><span class=c1># &lt;title&gt;The Dormouse&#39;s story&lt;/title&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;head&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;title&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># &lt;title&gt;The Dormouse&#39;s story&lt;/title&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=其他方法>其他方法</h3><ol><li><p>find_parents()和 find_parent()</p><p>前者返回所有祖先节点，后者返回直接父节点。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>p_story</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=n>class_</span><span class=o>=</span><span class=s1>&#39;story&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>p_story</span><span class=o>.</span><span class=n>find_parents</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>body
</span></span><span class=line><span class=cl>html
</span></span><span class=line><span class=cl>[document]
</span></span></code></pre></td></tr></table></div></div></li><li><p>find_next_siblings()和 find_next_sibling()</p><p>前者返回后面所有的兄弟节点，后者返回后面第一个兄弟节点。</p></li><li><p>find_previous_siblings()和 find_previous_sibling()</p><p>前者返回前面所有的兄弟节点，后者返回前面第一个兄弟节点。</p></li><li><p>find_all_next()和 find_next()</p><p>前者返回节点后所有符合条件的节点，后者返回第一个符合条件的节点。</p></li><li><p>find_all_previous()和 find_previous()</p><p>前者返回节点后所有符合条件的节点，后者返回第一个符合条件的节点</p></li></ol><h2 id=css选择器>CSS选择器</h2><p>在 <code>Tag</code> 或 <code>BeautifulSoup</code> 对象的 <code>.select()</code> 方法中传入字符串参数, 即可使用 CSS 选择器的语法找到 tag</p><h2 id=其他>其他</h2><h3 id=复制beautiful-soup对象>复制Beautiful Soup对象</h3><p><code>copy.copy()</code> 方法可以复制任意 <code>Tag</code> 或 <code>NavigableString</code> 对象</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>copy</span>
</span></span><span class=line><span class=cl><span class=n>p_copy</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>copy</span><span class=p>(</span><span class=n>soup</span><span class=o>.</span><span class=n>p</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>复制后的对象跟与对象是相等的, 但指向不同的内存地址</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span> <span class=n>soup</span><span class=o>.</span><span class=n>p</span> <span class=o>==</span> <span class=n>p_copy</span>
</span></span><span class=line><span class=cl><span class=c1># True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=n>soup</span><span class=o>.</span><span class=n>p</span> <span class=ow>is</span> <span class=n>p_copy</span>
</span></span><span class=line><span class=cl><span class=c1># False</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=get_text>get_text()</h4><p>获取标签里面内容，除了可以使用 .string 之外，还可以使用 get_text 方法，不同的地方在于前者返回的一个 NavigableString 对象，后者返回的是 unicode 类型的字符串。</p><p>实际场景中我们一般使用 get_text 方法获取标签中的内容。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>soup</span><span class=o>.</span><span class=n>head</span><span class=o>.</span><span class=n>get_text</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># &#39;Harry potter&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2024-04-27 05:32:21">更新于 2024-04-27</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://trouvaille0198.github.io/Notes/posts/%E4%B8%93%E4%B8%9A/python/crawler/beautifulsoup4/ data-title=BeautifulSoup4 data-hashtags=Python><i class="fa-brands fa-twitter fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://trouvaille0198.github.io/Notes/posts/%E4%B8%93%E4%B8%9A/python/crawler/beautifulsoup4/ data-hashtag=Python><i class="fa-brands fa-facebook-square fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://trouvaille0198.github.io/Notes/posts/%E4%B8%93%E4%B8%9A/python/crawler/beautifulsoup4/ data-title=BeautifulSoup4><i class="fa-brands fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw"></i>&nbsp;<a href=/Notes/tags/python/>Python</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/Notes/>主页</a></span></section></div><div class=post-nav><a href=/Notes/posts/%E4%B8%93%E4%B8%9A/python/%E5%B8%B8%E7%94%A8%E5%BA%93/bisect/ class=prev rel=prev title=bisect><i class="fa-solid fa-angle-left fa-fw"></i>bisect</a>
<a href=/Notes/posts/%E4%B8%93%E4%B8%9A/python/%E5%B8%B8%E7%94%A8%E5%BA%93/apscheduler/ class=next rel=next title=apscheduler>apscheduler<i class="fa-solid fa-angle-right fa-fw"></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom">酒困路长惟欲睡，日高人渴漫思茶</div><div class="footer-line copyright"><i class="fa-regular fa-copyright fa-fw"></i>
<span itemprop=copyrightYear>2022 - 2024</span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fa-solid fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fa-solid fa-comment fa-fw"></i></a></div><div id=mask></div></div><link rel=stylesheet href=/Notes/lib/katex/katex.min.css><link rel=stylesheet href=/Notes/lib/katex/copy-tex.min.css><link rel=stylesheet href=/Notes/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/Notes/lib/autocomplete/autocomplete.min.js defer></script><script type=text/javascript src=/Notes/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script type=text/javascript src=/Notes/lib/lazysizes/lazysizes.min.js async defer></script><script type=text/javascript src=/Notes/lib/sharer/sharer.min.js async defer></script><script type=text/javascript src=/Notes/lib/katex/katex.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/Notes/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:45},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"7I9AMOLA4S",algoliaIndex:"Notes",algoliaSearchKey:"3c1638dfe9f4d49a59d81ff6943416b8",highlightTag:"em",maxResultLength:30,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"}}</script><script type=text/javascript src=/Notes/js/theme.min.js defer></script><script type=text/javascript src=/Notes/js/_custom.min.js defer></script></body></html>