<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>- 伤心肠粉的酱油碟子</title><meta name=Description content><meta property="og:title" content><meta property="og:description" content="研讨 题目 命令 fg （foreground） 将后台运行的或挂起的任务切换到前台运行 1 fg"><meta property="og:type" content="article"><meta property="og:url" content="https://trouvaille0198.github.io/Notes/posts/homework/os/semester1/%E7%A0%94%E8%AE%A8/"><meta property="article:section" content="posts"><meta property="article:modified_time" content="2022-06-23T11:55:09+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="研讨 题目 命令 fg （foreground） 将后台运行的或挂起的任务切换到前台运行 1 fg"><meta name=application-name content="伤心肠粉的酱油碟子"><meta name=apple-mobile-web-app-title content="伤心肠粉的酱油碟子"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://trouvaille0198.github.io/Notes/posts/homework/os/semester1/%E7%A0%94%E8%AE%A8/><link rel=prev href=https://trouvaille0198.github.io/Notes/posts/homework/os/semester2/%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5/><link rel=next href=https://trouvaille0198.github.io/Notes/posts/homework/database/%E6%8A%A5%E5%91%8A/><link rel=stylesheet href=/Notes/lib/normalize/normalize.min.css><link rel=stylesheet href=/Notes/css/style.min.css><link rel=stylesheet href=/Notes/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/Notes/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/homework\/os\/semester1\/%E7%A0%94%E8%AE%A8\/"},"genre":"posts","wordcount":2178,"url":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/homework\/os\/semester1\/%E7%A0%94%E8%AE%A8\/","dateModified":"2022-06-23T11:55:09+00:00","publisher":{"@type":"Organization","name":"作者"},"author":{"@type":"Person","name":"作者"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":""==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:""==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子>伤心肠粉</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/Notes/categories/>分类 </a><a class=menu-item href=/Notes/tags/>标签 </a><a class=menu-item href=/Notes/posts/>文章 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子>伤心肠粉</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/Notes/categories/ title>分类</a><a class=menu-item href=/Notes/tags/ title>标签</a><a class=menu-item href=/Notes/posts/ title>文章</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX"></h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/Notes/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>作者</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=0001-01-01>0001-01-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2178 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 5 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#题目>题目</a></li><li><a href=#命令>命令</a><ul><li><a href=#fg>fg</a></li><li><a href=#bg>bg</a></li><li><a href=#ctrl--z>ctrl + z</a></li><li><a href=#heading>&</a></li><li><a href=#nohup>nohup</a></li><li><a href=#ps>ps</a></li><li><a href=#pstree>pstree</a></li><li><a href=#renice>renice</a><ul><li><a href=#pri-与-ni-的区别>PRI 与 NI 的区别</a></li></ul></li><li><a href=#nice>nice</a></li></ul></li><li><a href=#步骤>步骤</a></li></ul></nav></div></div><div class=content id=content><h1 id=研讨>研讨</h1><h2 id=题目>题目</h2><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921220123092.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921220123092.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921220123092.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921220123092.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921220123092.png title=image-20210921220123092></p><h2 id=命令>命令</h2><h3 id=fg>fg</h3><p>（foreground）</p><p>将<strong>后台运行</strong>的或<strong>挂起</strong>的任务切换到前台运行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>fg &lt;job_id&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=bg>bg</h3><p>（background）</p><p>b将<strong>挂起</strong>的任务切换到后台运行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>bg</span> &lt;job_id&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=ctrl--z>ctrl + z</h3><p><strong>挂起</strong>：将一个正在前台执行的命令放到后台，并且暂停</p><h3 id=heading>&</h3><p>当在前台运行某个作业时，终端被该作业占据；可以在命令后面加上 <code>&</code> 实现后台运行。</p><p>不过，作业在后台运行一样<strong>会将结果输出到屏幕上</strong>，干扰你的工作。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>&lt;command&gt; <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><p>如果放在后台运行的作业会产生大量的输出，最好使用下面的方法把它的输出重定向到某个文件中：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>command</span>  &gt;  out.file  2&gt;<span class=p>&amp;</span><span class=m>1</span>  <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><p>使用 & 命令后，作业被提交到后台运行，当前控制台没有被占用，但是一但把当前控制台关掉（退出帐户时），作业就会停止运行</p><h3 id=nohup>nohup</h3><p>（no hang up）</p><p>用于不挂断地运行命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>nohup &lt;command&gt; <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><p>为啥要加 <code>nohup</code>：</p><ul><li>使用 nohup 命令，退出终端不会影响程序的运行</li><li>nohup 命令将输出重定向至 <code>nohup.out</code>，<code>&</code> 则直接将输出打印到屏幕上</li></ul><h3 id=ps>ps</h3><p>显示进程信息</p><ul><li><p><strong>-e: 显示所有进程；</strong></p></li><li><p><strong>-f: 显示丰富格式信息</strong>；</p></li><li><p>-A：所有的进程均显示出来，与 -e 具有同样的效用；</p></li><li><p>-a： 显示现行终端机下的所有进程，包括其他用户的进程；</p></li><li><p>-u：以用户为主的进程状态 ；</p></li><li><p>-x：通常与 a 这个参数一起使用，可列出较完整信息；</p></li><li><p><strong>-l：较长、较详细的将该PID 的的信息列出；</strong></p></li><li><p>-j：工作的格式 (jobs format)；</p></li><li><p>-f：做一个更为完整的输出。</p></li></ul><p>将本次登入的 PID 与相关信息列示出来</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ps -l
</span></span></code></pre></td></tr></table></div></div><p>列出目前所有的正在内存当中的程序</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ps -aux
</span></span></code></pre></td></tr></table></div></div><p>列出所有用户的进程详细信息（包括优先级 PRI 和nice值 NI）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ps -efl
</span></span></code></pre></td></tr></table></div></div><p>参数解释</p><ul><li>F（Process Flag）：进程标志<ul><li>若 4 表示此进程的权限 root ；</li><li>若 1 表示此子进程仅能 fork</li></ul></li><li>S（State）：状态<ul><li>R (Running)：该进程正在运行；</li><li>S (Sleep)：该进程正在睡眠，可被唤醒。</li><li>D ：不可被唤醒</li><li>T ：停止状态(stop)；</li><li>Z (Zombie)：僵尸进程。</li></ul></li><li>ADDR：在内存的起始位置<ul><li>如果是个 running 进程，一般就会显示 <code>-</code></li></ul></li><li>SZ：内存使用量</li><li>WCHAN：是否正在运行<ul><li>若为 - 表示正在工作中</li></ul></li></ul><h3 id=pstree>pstree</h3><p>展示进程树</p><ul><li>-p 显示进程号</li></ul><h3 id=renice>renice</h3><p>设置进程 / 用户 / 群组的优先级</p><p>用例</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>renice -n N –u username
</span></span><span class=line><span class=cl>renice -n N –g gid
</span></span><span class=line><span class=cl>renice -n N –p pid
</span></span></code></pre></td></tr></table></div></div><p>选项</p><ul><li><p>-n = priority：优先级</p></li><li><p>-u = name：用户名，用于设置用户的优先级</p></li><li><p>-g = gid：组号，用于设置组的优先级</p></li><li><p>-p = PID：进程号，用于设置进程的优先级</p></li></ul><h4 id=pri-与-ni-的区别>PRI 与 NI 的区别</h4><p>详见：https://blog.csdn.net/u010317005/article/details/80531985</p><p><strong>优先运行序 (priority, PRI)</strong>：其值越低，代表优先度越高；PRI 由核心动态调整，用户无权更改其值</p><p><strong>nice 值（NI）</strong>：反应一个进程优先级状态的值，其范围在 -20-19 之间（校正值、偏移量）</p><p>两者关系：PRI(new) = PRI(old) + nice</p><h3 id=nice>nice</h3><p>在执行命令时设置其优先级</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>nice -N &lt;command&gt;
</span></span></code></pre></td></tr></table></div></div><ul><li>-N：要设置的优先级</li></ul><h2 id=步骤>步骤</h2><p><strong>Linux 环境下进程信息查看和作业控制</strong></p><blockquote><p>平常使用 Linux 的习惯：打开命令行终端，输入一行命令，等待运行，屏幕实时输出</p><p>遇到的情况：find 查找一个文件，查找的过程可能相当耗时，find 进程始终占用着屏幕输出，只能干等在电脑前，直到程序运行完毕，才能进行其他操作，效率低下</p><p>问题：如果想让进程挂起或是转移到后台运行，从而腾出命令行终端去做别的事情，该怎么操作</p><p>又一个问题：多道进程准备就绪等待执行时，该如何手动修改优先级</p><p>通过一个具体的例子，来了解 Linux 中的进程操作</p><p>（了解 Linux 中实现进程后台运行、挂起的操作）</p><p>（了解 Linux 中查看进程信息、修改优先级的操作）</p></blockquote><p><strong>在 root 用户下创建 f1.txt 文件，挂起</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>vi f1.txt
</span></span></code></pre></td></tr></table></div></div><p>用 <code>jobs</code> 命令查看被挂起的进程</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>jobs</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921143428610.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921143428610.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921143428610.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921143428610.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921143428610.png title=image-20210921143428610></p><blockquote><p>jobs 命令可以用来查看所有当前位于后台的作业</p><ul><li><p>中括号内的数字 “1” 是作业号</p></li><li><p>&ldquo;+&rdquo; 号代表最近一个放入后台的作业（被当作默认作业）</p></li><li><p>Stopped 表示此作业已经挂起</p></li></ul></blockquote><p><strong>后台启动 <code>find</code> 进程</strong></p><blockquote><p>要想让进程在后台运行，只要在书写命令的末尾添上 <code>&</code> 符号</p><p>不过还不够</p><ul><li>作业在后台运行时，一样<strong>会将结果输出到屏幕上</strong>，干扰你的工作</li><li>而且，一但把当前控制台关掉（退出帐户时），作业就会停止运行</li></ul><p>还需要用到 <code>nohup</code> 命令，保证在关闭终端后，程序得以继续运行</p><ul><li><p>每个进程都会接受一个 <strong>SIGHUP (Signal Hang UP)</strong> 信号，负责退出终端时终止该进程，而 nohup 的作用是屏蔽这个信号，退出终端进程仍然存在。</p></li><li><p><code>nohup</code> 还会将将输出重定向至当前路径的 <code>nohup.out</code> 上，不会在屏幕上输出了</p></li></ul></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>nohup find <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145430969.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145430969.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145430969.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145430969.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145430969.png title=image-20210921145430969></p><p><strong>显示当前所有进程和进程号</strong></p><blockquote><p>ps (Process Status)</p><p>-e 参数显示所有用户的进程</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ps -e
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145533893.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145533893.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145533893.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145533893.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145533893.png title=image-20210921145533893></p><p><strong>显示所有进程含优先级的详细信息</strong></p><blockquote><p>-l 参数显示更多信息 long format</p><p>-f 参数显示进程的完整信息 full format</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ps -efl
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145718774.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145718774.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145718774.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145718774.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145718774.png title=image-20210921145718774></p><blockquote><p>我们还可以打印进程树来展示进程间的父子关系</p></blockquote><p><strong>打印进程家族树</strong></p><blockquote><p>-p 参数显示进程号</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pstree -p
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145828991.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145828991.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145828991.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145828991.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145828991.png title=image-20210921145828991></p><p><strong>终止 find 进程的后台运行</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>kill</span> &lt;pid&gt;
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145902524.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145902524.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145902524.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145902524.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145902524.png title=image-20210921145902524></p><blockquote><p>此时查看进程，find 进程已被终结</p></blockquote><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145953388.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145953388.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145953388.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145953388.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921145953388.png title=image-20210921145953388></p><blockquote><p>下面演示：如何修改单个进程的优先级和单个用户的优先级</p></blockquote><p><strong>切换到 student 用户，创建 f2 文件并设置优先级（nice 值）为 5，挂起</strong></p><blockquote><p>这里要讲讲 Linux 优先级机制</p><p>我们在进程表里可以观察到两个参数</p><ul><li><p><strong>优先运行序 (priority, PRI)</strong>：其值越低，代表优先度越高；PRI 由核心动态调整，用户无权更改其值</p></li><li><p><strong>nice 值（NI）</strong>：反应一个进程优先级状态的值，其范围在 -20-19 之间（校正值、偏移量）</p></li></ul><p>两者关系：PRI(new) = PRI(old) + nice</p><p>Linux 提供一个 nice 值作为偏移量，给予用户修改优先级的权限</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>su student
</span></span><span class=line><span class=cl>nice -5 vi f2.txt 
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150136165.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150136165.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150136165.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150136165.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150136165.png title=image-20210921150136165></p><p><strong>后台启动 find 进程</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>nohup find <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>显示所有进程含优先级的详细信息</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ps -efl
</span></span></code></pre></td></tr></table></div></div><blockquote><p>可以看到，<code>vi f2.txt</code> 命令的优先级被设为了 5</p></blockquote><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150308341.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150308341.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150308341.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150308341.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150308341.png title=image-20210921150308341></p><p><strong>将 student 的用户进程优先数改为 -5</strong></p><blockquote><p>要点：切换到 root 用户，因为 Linux 规定非 root 用户无法将优先级别调高</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>su root <span class=c1># 或 sudo su</span>
</span></span><span class=line><span class=cl>renice -n -5 -u student
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150543885.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150543885.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150543885.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150543885.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150543885.png title=image-20210921150543885></p><p><strong>显示所有进程含优先级的详细信息</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ps -efl
</span></span></code></pre></td></tr></table></div></div><blockquote><p>可以看到，student 用户所有进程的优先级都被设为了 -5</p></blockquote><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150602261.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150602261.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150602261.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150602261.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/image-20210921150602261.png title=image-20210921150602261></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-06-23</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/Notes/>主页</a></span></section></div><div class=post-nav><a href=/Notes/posts/homework/os/semester2/%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5/ class=prev rel=prev title><i class="fas fa-angle-left fa-fw"></i></a>
<a href=/Notes/posts/homework/database/%E6%8A%A5%E5%91%8A/ class=next rel=next title><i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>酒困路长惟欲睡，日高人渴漫思茶</div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2022</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/Notes/lib/katex/katex.min.css><link rel=stylesheet href=/Notes/lib/katex/copy-tex.min.css><script type=text/javascript src=/Notes/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/Notes/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/Notes/lib/lunr/lunr.min.js></script><script type=text/javascript src=/Notes/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/Notes/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=/Notes/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/Notes/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/Notes/lib/katex/katex.min.js></script><script type=text/javascript src=/Notes/lib/katex/auto-render.min.js></script><script type=text/javascript src=/Notes/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/Notes/lib/katex/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:45},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/Notes/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/Notes/lib/lunr/lunr.segmentit.js",maxResultLength:30,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/Notes/js/theme.min.js></script></body></html>