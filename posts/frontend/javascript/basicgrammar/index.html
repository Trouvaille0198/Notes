<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>JavaScript 基本语法 - 伤心肠粉的酱油碟子</title><meta name=author content><meta name=author-link content><meta name=description content="BasicGrammar 概念 JavaScript 是一种运行在浏览器中的解释型的编程语言 基本操作 变量的声明与赋值 1 2 3 4 5"><meta name=keywords content="JavaScript,前端"><meta itemprop=name content="JavaScript 基本语法"><meta itemprop=description content="BasicGrammar 概念 JavaScript 是一种运行在浏览器中的解释型的编程语言 基本操作 变量的声明与赋值 1 2 3 4 5"><meta itemprop=datePublished content="2021-10-23T00:00:00+00:00"><meta itemprop=dateModified content="2022-11-23T14:00:55+00:00"><meta itemprop=wordCount content="13062"><meta itemprop=image content="https://trouvaille0198.github.io/logo.png"><meta itemprop=keywords content="JavaScript,前端,"><meta property="og:title" content="JavaScript 基本语法"><meta property="og:description" content="BasicGrammar 概念 JavaScript 是一种运行在浏览器中的解释型的编程语言 基本操作 变量的声明与赋值 1 2 3 4 5"><meta property="og:type" content="article"><meta property="og:url" content="https://trouvaille0198.github.io/Notes/posts/frontend/javascript/basicgrammar/"><meta property="og:image" content="https://trouvaille0198.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-23T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-23T14:00:55+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://trouvaille0198.github.io/logo.png"><meta name=twitter:title content="JavaScript 基本语法"><meta name=twitter:description content="BasicGrammar 概念 JavaScript 是一种运行在浏览器中的解释型的编程语言 基本操作 变量的声明与赋值 1 2 3 4 5"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#252627"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://trouvaille0198.github.io/Notes/posts/frontend/javascript/basicgrammar/><link rel=prev href=https://trouvaille0198.github.io/Notes/posts/linux/useful/install/><link rel=next href=https://trouvaille0198.github.io/Notes/posts/frontend/javascript/dom/><link rel=stylesheet href=/Notes/lib/normalize/normalize.min.css><link rel=stylesheet href=/Notes/css/style.min.css><link rel=stylesheet href=/Notes/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/Notes/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"JavaScript 基本语法","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/frontend\/javascript\/basicgrammar\/"},"genre":"posts","keywords":"JavaScript, 前端","wordcount":13062,"url":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/frontend\/javascript\/basicgrammar\/","datePublished":"2021-10-23T00:00:00+00:00","dateModified":"2022-11-23T14:00:55+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"MelonCholi"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子><span class=header-title-text>伤心肠粉</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/Notes/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/Notes/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/Notes/posts/>文章</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子><span class=header-title-text>伤心肠粉</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/Notes/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/Notes/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/Notes/posts/>文章</a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2><div class="toc-content always-active" id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>JavaScript 基本语法</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle"></i>
MelonCholi</span></span>
<span class=post-category>收录于 <a href=/Notes/categories/%E5%89%8D%E7%AB%AF/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;前端</a></span></div><div class=post-meta-line><span title="2021-10-23 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-10-23>2021-10-23</time>
</span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 13062 字&nbsp;
<i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 27 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#概念>概念</a></li><li><a href=#基本操作>基本操作</a><ul><li><a href=#变量的声明与赋值>变量的声明与赋值</a></li><li><a href=#数据类型>数据类型</a><ul><li><a href=#number>Number</a></li><li><a href=#字符串-string>字符串 String</a><ul><li><a href=#多行字符串>多行字符串</a></li><li><a href=#模板字符串>模板字符串</a></li><li><a href=#操作字符串>操作字符串</a></li></ul></li><li><a href=#布尔值-bool>布尔值 Bool</a></li><li><a href=#null-和-undefined>null 和 undefined</a></li><li><a href=#数组-array>数组 Array</a><ul><li><a href=#获取长度-length-属性>获取长度 length 属性</a></li><li><a href=#搜索元素位置-indexof>搜索元素位置 .indexOf()</a></li><li><a href=#获取切片-slice>获取切片 .slice()</a></li><li><a href=#尾部添加和删除-push-和-pop>尾部添加和删除 .push() 和 .pop()</a></li><li><a href=#头部添加和删除-unshift-和-shift>头部添加和删除 .unshift() 和 .shift()</a></li><li><a href=#排序-sort>排序 .sort()</a></li><li><a href=#添加兼删除-splice>添加兼删除 .splice()</a></li><li><a href=#连接-concat>连接 .concat()</a></li><li><a href=#转换字符串-join>转换字符串 .join()</a></li><li><a href=#检测是否为数组>检测是否为数组</a></li></ul></li><li><a href=#对象-object>对象 Object</a></li><li><a href=#变量>变量</a></li><li><a href=#数据类型转换>数据类型转换</a></li></ul></li><li><a href=#map-和-set>Map 和 Set</a><ul><li><a href=#map>Map</a></li><li><a href=#set>Set</a></li></ul></li><li><a href=#iterable>iterable</a><ul><li><a href=#for--of>for … of</a></li><li><a href=#foreach>forEach</a></li><li><a href=#for-in-和-for-of-辨析>for in 和 for of 辨析</a></li></ul></li></ul></li><li><a href=#函数>函数</a><ul><li><a href=#arguements>arguements</a></li><li><a href=#rest>rest</a></li><li><a href=#变量作用域与解构赋值>变量作用域与解构赋值</a></li><li><a href=#变量提升>变量提升</a></li><li><a href=#全局作用域>全局作用域</a></li><li><a href=#名字空间>名字空间</a></li><li><a href=#局部作用域>局部作用域</a></li><li><a href=#常量>常量</a></li><li><a href=#解构赋值>解构赋值</a><ul><li><a href=#详解>详解</a></li><li><a href=#使用场景>使用场景</a></li></ul></li><li><a href=#方法>方法</a><ul><li><a href=#函数嵌套中的-this-用法>函数嵌套中的 this 用法</a></li><li><a href=#apply>apply</a></li><li><a href=#装饰器>装饰器</a></li></ul></li><li><a href=#高阶函数>高阶函数</a><ul><li><a href=#map-1>map</a></li><li><a href=#reduce>reduce</a></li></ul></li><li><a href=#箭头函数>箭头函数</a></li></ul></li><li><a href=#面向对象编程>面向对象编程</a><ul><li><a href=#创建对象>创建对象</a><ul><li><a href=#原型回溯>原型回溯</a></li><li><a href=#构造函数>构造函数</a><ul><li><a href=#构造>构造</a></li><li><a href=#调用>调用</a></li><li><a href=#constructor-属性>constructor 属性</a></li><li><a href=#共享函数>共享函数</a></li><li><a href=#封装>封装</a></li></ul></li><li><a href=#原型继承>原型继承</a></li><li><a href=#class-继承>class 继承</a></li></ul></li></ul></li><li><a href=#骚皮操作>骚皮操作</a><ul><li><a href=#-与->! 与 ？</a><ul><li><a href=#-用法>! 用法</a></li><li><a href=#-用法-1>? 用法</a></li><li><a href=#-用法-2>?? 用法</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=basicgrammar>BasicGrammar</h1><h2 id=概念>概念</h2><p>JavaScript 是一种运行在浏览器中的解释型的编程语言</p><h2 id=基本操作>基本操作</h2><h3 id=变量的声明与赋值>变量的声明与赋值</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-JavaScript data-lang=JavaScript><span class=line><span class=cl><span class=c1>//var是一个JS关键字
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>//赋值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>age</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>//变量的初始化=声明+赋值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>age</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>//一次声明多个变量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>game</span> <span class=o>=</span> <span class=s2>&#34;Overwatch&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>hero</span> <span class=o>=</span> <span class=s2>&#34;Genji&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>ultimate</span> <span class=o>=</span> <span class=s2>&#34;龍神の剣を喰らえ&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>允许不声明，直接赋值
尽量不要用 name 作为变量名
声明变量本质——向内存申请空间</p><h3 id=数据类型>数据类型</h3><ol><li><p>JS 是一种弱类型语言（或动态语言），不用提前声明变量类型</p></li><li><p>相同变量可以用作不同数据类型</p></li><li><p>JS 中有六种数据类型，包括五种基本数据类型（Number, String, Boolean, Undefined, Null），和一种复杂数据类型（Object）</p></li><li><p>字符串的拼接——字符串 + 任何类型 = 新的字符串</p></li><li><p>使用 var 声明了变量，但未给变量初始化值，那么这个变量的值就是 undefined</p></li></ol><h4 id=number>Number</h4><p>JavaScript 不区分整数和浮点数，统一用 Number 表示，以下都是合法的 Number 类型：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=mi>123</span><span class=p>;</span> 		<span class=c1>// 整数 123
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mf>0.456</span><span class=p>;</span> 		<span class=c1>// 浮点数 0.456
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mf>1.2345</span><span class=nx>e3</span><span class=p>;</span> 	<span class=c1>// 科学计数法表示 1.2345x1000，等同于 1234.5
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>-</span><span class=mi>99</span><span class=p>;</span> 		<span class=c1>// 负数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kc>NaN</span><span class=p>;</span> 		<span class=c1>// NaN表示Not a Number，当无法计算结果时用NaN表示
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kc>Infinity</span><span class=p>;</span> 	<span class=c1>// Infinity表 示无限大，当数值超过了 JavaScript 的 Number 所能表示的最大值时，就表示为 Infinity
</span></span></span></code></pre></td></tr></table></div></div><p>说明</p><ul><li>二进制前加 0b，八进制前加 0，十六进制前加 0x</li><li>最大值和最小值，Number.MAX_VALUE 和 Number.MIN_VALUE</li><li>其他特殊值<ul><li>Infinity，无穷大；</li><li>-Infinity，无穷小；</li><li>NaN，代表一个非数值</li></ul></li></ul><h4 id=字符串-string>字符串 String</h4><p>字符串是以单引号 <code>'</code> 或双引号 <code>"</code> 括起来的任意文本，比如 <code>'abc'</code>，<code>"xyz"</code> 等等。请注意，<code>''</code> 或 <code>""</code>本身只是一种表示方式，不是字符串的一部分</p><p>需要特别注意的是，字符串是<strong>不可变</strong>的，如果对字符串的某个索引赋值，不会有任何错误，但是，也没有任何效果</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=s1>&#39;Test&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;X&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>alert</span><span class=p>(</span><span class=nx>s</span><span class=p>);</span> <span class=c1>// s仍然为&#39;Test&#39;
</span></span></span></code></pre></td></tr></table></div></div><h5 id=多行字符串>多行字符串</h5><p>由于多行字符串用 <code>\n</code> 写起来比较费事，所以最新的 ES6 标准新增了一种多行字符串的表示方法，用反引号 ` 表示：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=sb>`这是一个
</span></span></span><span class=line><span class=cl><span class=sb>多行
</span></span></span><span class=line><span class=cl><span class=sb>字符串`</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=模板字符串>模板字符串</h5><p>如果有很多变量需要连接，用 <code>+ </code>号就比较麻烦。ES6 新增了一种模板字符串，表示方法和上面的多行字符串一样，但是它会自动替换字符串中的变量：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;小明&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>age</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>message</span> <span class=o>=</span> <span class=sb>`你好, </span><span class=si>${</span><span class=nx>name</span><span class=si>}</span><span class=sb>, 你今年</span><span class=si>${</span><span class=nx>age</span><span class=si>}</span><span class=sb>岁了!`</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>alert</span><span class=p>(</span><span class=nx>message</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=操作字符串>操作字符串</h5><p>获取长度</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=s1>&#39;Hello, world!&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=c1>// 13
</span></span></span></code></pre></td></tr></table></div></div><p>把一个字符串全部变为大写</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=s1>&#39;Hello&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>.</span><span class=nx>toUpperCase</span><span class=p>();</span> <span class=c1>// 返回&#39;HELLO&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>把一个字符串全部变为小写</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=s1>&#39;Hello&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>lower</span> <span class=o>=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>();</span> <span class=c1>// 返回&#39;hello&#39;并赋值给变量lower
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>lower</span><span class=p>;</span> <span class=c1>// &#39;hello&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>搜索指定字符串出现的位置</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=s1>&#39;hello, world&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s1>&#39;world&#39;</span><span class=p>);</span> <span class=c1>// 返回7
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>s</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s1>&#39;World&#39;</span><span class=p>);</span> <span class=c1>// 没有找到指定的子串，返回-1
</span></span></span></code></pre></td></tr></table></div></div><p>返回指定索引区间的子串</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=s1>&#39;hello, world&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>.</span><span class=nx>substring</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>);</span> <span class=c1>// 从索引0开始到5（不包括5），返回&#39;hello&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>s</span><span class=p>.</span><span class=nx>substring</span><span class=p>(</span><span class=mi>7</span><span class=p>);</span> <span class=c1>// 从索引7开始到结束，返回&#39;world&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>把字符串分割为字符串数组</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=s1>&#39;How are you doing today?&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>);</span> <span class=c1>// [How,are,you,doing,today?]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>s</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>);</span> <span class=c1>// [H,o,w, ,a,r,e, ,y,o,u, ,d,o,i,n,g, ,t,o,d,a,y,?]
</span></span></span></code></pre></td></tr></table></div></div><h4 id=布尔值-bool>布尔值 Bool</h4><p>布尔值和布尔代数的表示完全一致，一个布尔值只有 <code>true</code>、<code>false</code> 两种值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kc>true</span><span class=p>;</span> <span class=c1>// 这是一个true值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kc>false</span><span class=p>;</span> <span class=c1>// 这是一个false值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mi>2</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>;</span> <span class=c1>// 这是一个true值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mi>2</span> <span class=o>&gt;=</span> <span class=mi>3</span><span class=p>;</span> <span class=c1>// 这是一个false值
</span></span></span></code></pre></td></tr></table></div></div><p>JavaScript 在设计时，有两种比较运算符：</p><p>第一种是 <code>==</code> 比较，它会自动转换数据类型再比较，很多时候，会得到非常诡异的结果；</p><p>第二种是 <code>===</code> 比较，它不会自动转换数据类型，如果数据类型不一致，返回 <code>false</code>，如果一致，再比较。</p><p>由于 JavaScript 这个设计缺陷，不要使用 <code>==</code> 比较，始终坚持使用 <code>===</code> 比较。</p><p>另一个例外是 <code>NaN</code> 这个特殊的 Number 与所有其他值都不相等，包括它自己：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kc>NaN</span> <span class=o>===</span> <span class=kc>NaN</span><span class=p>;</span> <span class=c1>// false
</span></span></span></code></pre></td></tr></table></div></div><p>唯一能判断 <code>NaN</code> 的方法是通过 <code>isNaN()</code> 函数：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>isNaN</span><span class=p>(</span><span class=kc>NaN</span><span class=p>);</span> <span class=c1>// true
</span></span></span></code></pre></td></tr></table></div></div><p>最后要注意浮点数的相等比较：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=mi>1</span> <span class=o>/</span> <span class=mi>3</span> <span class=o>===</span> <span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=mi>2</span> <span class=o>/</span> <span class=mi>3</span><span class=p>);</span> <span class=c1>// false
</span></span></span></code></pre></td></tr></table></div></div><p>这不是 JavaScript 的设计缺陷。浮点数在运算过程中会产生误差，因为计算机无法精确表示无限循环小数。</p><p>要比较两个浮点数是否相等，只能<strong>计算它们之差的绝对值</strong>，看是否小于某个阈值：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>Math</span><span class=p>.</span><span class=nx>abs</span><span class=p>(</span><span class=mi>1</span> <span class=o>/</span> <span class=mi>3</span> <span class=o>-</span> <span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=mi>2</span> <span class=o>/</span> <span class=mi>3</span><span class=p>))</span> <span class=o>&lt;</span> <span class=mf>0.0000001</span><span class=p>;</span> <span class=c1>// true
</span></span></span></code></pre></td></tr></table></div></div><h4 id=null-和-undefined>null 和 undefined</h4><p><code>null</code> 表示一个“空”的值，它和 <code>0</code> 以及空字符串 <code>''</code> 不同，<code>0</code> 是一个数值，<code>''</code> 表示长度为 0 的字符串，而 <code>null</code> 表示“空”。</p><p>在其他语言中，也有类似 JavaScript 的 <code>null</code> 的表示，例如 Java 也用 <code>null</code>，Swift 用 <code>nil</code>，Python 用 <code>None</code> 表示。但是，在 JavaScript 中，还有一个和 <code>null</code> 类似的 <code>undefined</code>，它表示“未定义”。</p><p>JavaScript 的设计者希望用 <code>null</code> 表示一个空的值，而 <code>undefined</code> 表示值未定义。事实证明，这并没有什么卵用，区分两者的意义不大。大多数情况下，我们都应该用 <code>null</code>。<code>undefined</code> 仅仅在判断函数参数是否传递的情况下有用。</p><h4 id=数组-array>数组 Array</h4><p>数组是一组按顺序排列的集合，集合的每个值称为元素。JavaScript 的数组可以包括任意数据类型。例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mf>3.14</span><span class=p>,</span> <span class=s1>&#39;Hello&#39;</span><span class=p>,</span> <span class=kc>null</span><span class=p>,</span> <span class=kc>true</span><span class=p>];</span>
</span></span></code></pre></td></tr></table></div></div><p>上述数组包含 6 个元素。数组用 <code>[]</code> 表示，元素之间用 <code>,</code> 分隔。</p><p>另一种创建数组的方法是通过 <code>Array()</code> 函数实现：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Array</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>);</span> <span class=c1>// 创建了数组[1, 2, 3]
</span></span></span></code></pre></td></tr></table></div></div><p>然而，出于代码的可读性考虑，强烈建议直接使用 <code>[]</code>。</p><p>数组的元素可以通过索引来访问。请注意，索引的起始值为 <code>0</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mf>3.14</span><span class=p>,</span> <span class=s1>&#39;Hello&#39;</span><span class=p>,</span> <span class=kc>null</span><span class=p>,</span> <span class=kc>true</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span> <span class=c1>// 返回索引为0的元素，即1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>[</span><span class=mi>5</span><span class=p>];</span> <span class=c1>// 返回索引为5的元素，即true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>[</span><span class=mi>6</span><span class=p>];</span> <span class=c1>// 索引超出了范围，返回undefined
</span></span></span></code></pre></td></tr></table></div></div><h5 id=获取长度-length-属性>获取长度 length 属性</h5><p>要取得 <code>Array</code> 的长度，直接访问 <code>length</code> 属性：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mf>3.14</span><span class=p>,</span> <span class=s1>&#39;Hello&#39;</span><span class=p>,</span> <span class=kc>null</span><span class=p>,</span> <span class=kc>true</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=c1>// 6
</span></span></span></code></pre></td></tr></table></div></div><p><em>请注意</em>，直接给 <code>Array</code> 的 <code>length</code> 赋一个新的值会导致 <code>Array</code> 大小的变化：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>length</span> <span class=o>=</span> <span class=mi>6</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>;</span> <span class=c1>// arr变为[1, 2, 3, undefined, undefined, undefined]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>length</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>;</span> <span class=c1>// arr变为[1, 2]
</span></span></span></code></pre></td></tr></table></div></div><p><code>Array</code> 可以通过索引把对应的元素修改为新的值</p><p>请注意，如果通过索引赋值时，索引超过了范围，同样会引起<code>Array</code>大小的变化：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;x&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>;</span> <span class=c1>// arr变为[1, 2, 3, undefined, undefined, &#39;x&#39;]
</span></span></span></code></pre></td></tr></table></div></div><p>大多数其他编程语言不允许直接改变数组的大小，越界访问索引会报错。然而，JavaScript 的 <code>Array</code> 却不会有任何错误。在编写代码时，不建议直接修改 <code>Array</code> 的大小，访问索引时要确保索引不会越界。</p><h5 id=搜索元素位置-indexof>搜索元素位置 .indexOf()</h5><p>与 String 类似，<code>Array</code> 也可以通过 <code>indexOf()</code> 来搜索一个指定的元素的位置：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=s1>&#39;30&#39;</span><span class=p>,</span> <span class=s1>&#39;xyz&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span> 	<span class=c1>// 元素10的索引为0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=mi>20</span><span class=p>);</span> 	<span class=c1>// 元素20的索引为1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=mi>30</span><span class=p>);</span> 	<span class=c1>// 元素30没有找到，返回-1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s1>&#39;30&#39;</span><span class=p>);</span> 	<span class=c1>// 元素&#39;30&#39;的索引为2
</span></span></span></code></pre></td></tr></table></div></div><p>注意了，数字 <code>30</code> 和字符串 <code>'30'</code> 是不同的元素。</p><h5 id=获取切片-slice>获取切片 .slice()</h5><p><code>slice()</code> 就是对应 String 的 <code>substring()</code> 版本，它截取 <code>Array</code> 的部分元素，然后返回一个新的 <code>Array</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>,</span> <span class=s1>&#39;D&#39;</span><span class=p>,</span> <span class=s1>&#39;E&#39;</span><span class=p>,</span> <span class=s1>&#39;F&#39;</span><span class=p>,</span> <span class=s1>&#39;G&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>3</span><span class=p>);</span> <span class=c1>// 从索引0开始，到索引3结束，但不包括索引3: [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span> <span class=c1>// 从索引3开始到结束: [&#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;]
</span></span></span></code></pre></td></tr></table></div></div><p>注意到 <code>slice()</code> 的起止参数包括开始索引，不包括结束索引。</p><p>如果不给 <code>slice()</code> 传递任何参数，它就会从头到尾截取所有元素。</p><p>利用这一点，我们可以很容易地复制一个 <code>Array</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>,</span> <span class=s1>&#39;D&#39;</span><span class=p>,</span> <span class=s1>&#39;E&#39;</span><span class=p>,</span> <span class=s1>&#39;F&#39;</span><span class=p>,</span> <span class=s1>&#39;G&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>aCopy</span> <span class=o>=</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>slice</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>aCopy</span><span class=p>;</span> <span class=c1>// [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>aCopy</span> <span class=o>===</span> <span class=nx>arr</span><span class=p>;</span> <span class=c1>// false
</span></span></span></code></pre></td></tr></table></div></div><h5 id=尾部添加和删除-push-和-pop>尾部添加和删除 .push() 和 .pop()</h5><p><code>push()</code> 向 <code>Array</code> 的末尾添加若干元素，<code>pop()</code> 则把 <code>Array</code> 的最后一个元素删除掉：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>);</span> <span class=c1>// 返回Array新的长度: 4
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// [1, 2, &#39;A&#39;, &#39;B&#39;]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>pop</span><span class=p>();</span> <span class=c1>// pop()返回&#39;B&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// [1, 2, &#39;A&#39;]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>pop</span><span class=p>();</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>pop</span><span class=p>();</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>pop</span><span class=p>();</span> <span class=c1>// 连续pop 3次
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// []
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>pop</span><span class=p>();</span> <span class=c1>// 空数组继续pop不会报错，而是返回undefined
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// []
</span></span></span></code></pre></td></tr></table></div></div><h5 id=头部添加和删除-unshift-和-shift>头部添加和删除 .unshift() 和 .shift()</h5><p>如果要往 <code>Array</code> 的头部添加若干元素，使用 <code>unshift()</code> 方法，<code>shift()</code> 方法则把 <code>Array</code> 的第一个元素删掉：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>unshift</span><span class=p>(</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>);</span> <span class=c1>// 返回Array新的长度: 4
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// [&#39;A&#39;, &#39;B&#39;, 1, 2]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>shift</span><span class=p>();</span> <span class=c1>// &#39;A&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// [&#39;B&#39;, 1, 2]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>shift</span><span class=p>();</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>shift</span><span class=p>();</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>shift</span><span class=p>();</span> <span class=c1>// 连续shift 3次
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// []
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>shift</span><span class=p>();</span> <span class=c1>// 空数组继续shift不会报错，而是返回undefined
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// []
</span></span></span></code></pre></td></tr></table></div></div><h5 id=排序-sort>排序 .sort()</h5><p><code>sort()</code> 可以对当前 <code>Array</code> 进行排序，它会直接修改当前 <code>Array</code> 的元素位置，直接调用时，按照默认顺序排序：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>sort</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>;</span> <span class=c1>// [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]
</span></span></span></code></pre></td></tr></table></div></div><h5 id=添加兼删除-splice>添加兼删除 .splice()</h5><p><code>splice()</code> 方法是修改 <code>Array</code> 的“万能方法”</p><p>它可以从指定的索引开始删除若干元素，然后再从该位置添加若干元素：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Microsoft&#39;</span><span class=p>,</span> <span class=s1>&#39;Apple&#39;</span><span class=p>,</span> <span class=s1>&#39;Yahoo&#39;</span><span class=p>,</span> <span class=s1>&#39;AOL&#39;</span><span class=p>,</span> <span class=s1>&#39;Excite&#39;</span><span class=p>,</span> <span class=s1>&#39;Oracle&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=c1>// 从索引2开始删除3个元素,然后再添加两个元素:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>&#39;Google&#39;</span><span class=p>,</span> <span class=s1>&#39;Facebook&#39;</span><span class=p>);</span> <span class=c1>// 返回删除的元素 [&#39;Yahoo&#39;, &#39;AOL&#39;, &#39;Excite&#39;]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// [&#39;Microsoft&#39;, &#39;Apple&#39;, &#39;Google&#39;, &#39;Facebook&#39;, &#39;Oracle&#39;]
</span></span></span><span class=line><span class=cl><span class=c1>// 只删除,不添加:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span> <span class=c1>// [&#39;Google&#39;, &#39;Facebook&#39;]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// [&#39;Microsoft&#39;, &#39;Apple&#39;, &#39;Oracle&#39;]
</span></span></span><span class=line><span class=cl><span class=c1>// 只添加,不删除:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;Google&#39;</span><span class=p>,</span> <span class=s1>&#39;Facebook&#39;</span><span class=p>);</span> <span class=c1>// 返回[],因为没有删除任何元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> <span class=c1>// [&#39;Microsoft&#39;, &#39;Apple&#39;, &#39;Google&#39;, &#39;Facebook&#39;, &#39;Oracle&#39;]
</span></span></span></code></pre></td></tr></table></div></div><h5 id=连接-concat>连接 .concat()</h5><p><code>concat()</code> 方法把当前的 <code>Array</code> 和另一个 <code>Array</code> 连接起来，并返回一个新的 <code>Array</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>added</span> <span class=o>=</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>concat</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nx>added</span><span class=p>;</span> 	<span class=c1>// [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, 1, 2, 3]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>arr</span><span class=p>;</span> 	<span class=c1>// [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]
</span></span></span></code></pre></td></tr></table></div></div><p><em>请注意</em>，<code>concat()</code> 方法并没有修改当前 <code>Array</code>，而是返回了一个新的 <code>Array</code>。</p><p>实际上，<code>concat()</code> 方法可以接收任意个元素和 <code>Array</code>，并且自动把 <code>Array</code> 拆开，然后全部添加到新的 <code>Array</code> 里：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>concat</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]);</span> <span class=c1>// [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, 1, 2, 3, 4]
</span></span></span></code></pre></td></tr></table></div></div><h5 id=转换字符串-join>转换字符串 .join()</h5><p><code>join()</code> 方法是一个非常实用的方法，它把当前 <code>Array</code> 的每个元素都用指定的字符串连接起来，然后返回连接后的字符串：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>);</span> <span class=c1>// &#39;A-B-C-1-2-3&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>如果 <code>Array</code> 的元素不是字符串，将自动转换为字符串后再连接。</p><h5 id=检测是否为数组>检测是否为数组</h5><ol><li>通用的检测方法</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>isArray</span><span class=p>(</span><span class=nx>obj</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>toString</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=nx>obj</span><span class=p>)</span><span class=o>==</span><span class=s1>&#39;[object Array]&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>jquery 的判断写法</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>result</span><span class=o>=</span><span class=nx>$</span><span class=p>.</span><span class=nx>isArray</span><span class=p>(</span><span class=nx>obj</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>instanceof 操作符</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>ary</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>23</span><span class=p>,</span><span class=mi>4</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>ary</span> <span class=k>instanceof</span> <span class=nb>Array</span><span class=p>)</span>	<span class=c1>//true;
</span></span></span></code></pre></td></tr></table></div></div><h4 id=对象-object>对象 Object</h4><p>JavaScript 的对象是一组由键-值组成的无序集合，例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>person</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Bob&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;js&#39;</span><span class=p>,</span> <span class=s1>&#39;web&#39;</span><span class=p>,</span> <span class=s1>&#39;mobile&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nx>city</span><span class=o>:</span> <span class=s1>&#39;Beijing&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>hasCar</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>zipcode</span><span class=o>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>JavaScript 对象的键都是字符串类型，值可以是任意数据类型。上述 <code>person</code> 对象一共定义了 6 个键值对，其中每个键又称为对象的属性，例如，<code>person</code> 的 <code>name</code> 属性为 <code>'Bob'</code>，<code>zipcode</code> 属性为 <code>null</code>。</p><p>要获取一个对象的属性，我们用 <code>对象变量.属性名</code> 的方式：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>person</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span> 	<span class=c1>// &#39;Bob&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>person</span><span class=p>.</span><span class=nx>zipcode</span><span class=p>;</span> <span class=c1>// null
</span></span></span></code></pre></td></tr></table></div></div><p>实际上 JavaScript 对象的所有属性都是字符串，不过属性对应的值可以是任意数据类型。</p><p>JavaScript 规定，访问不存在的属性不报错，而是返回<code>undefined</code></p><p>由于 JavaScript 的对象是动态类型，你可以自由地给一个对象添加或删除属性：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xiaoming</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>age</span><span class=p>;</span> <span class=c1>// undefined
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span> <span class=c1>// 新增一个age属性
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>age</span><span class=p>;</span> <span class=c1>// 18
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>delete</span> <span class=nx>xiaoming</span><span class=p>.</span><span class=nx>age</span><span class=p>;</span> <span class=c1>// 删除age属性
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>age</span><span class=p>;</span> <span class=c1>// undefined
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>delete</span> <span class=nx>xiaoming</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>];</span> <span class=c1>// 删除name属性
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span> <span class=c1>// undefined
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>delete</span> <span class=nx>xiaoming</span><span class=p>.</span><span class=nx>school</span><span class=p>;</span> <span class=c1>// 删除一个不存在的school属性也不会报错
</span></span></span></code></pre></td></tr></table></div></div><p>如果我们要检测<code>xiaoming</code>是否拥有某一属性，可以用<code>in</code>操作符：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xiaoming</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>birth</span><span class=o>:</span> <span class=mi>1990</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>school</span><span class=o>:</span> <span class=s1>&#39;No.1 Middle School&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mf>1.70</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>weight</span><span class=o>:</span> <span class=mi>65</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>score</span><span class=o>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;name&#39;</span> <span class=k>in</span> <span class=nx>xiaoming</span><span class=p>;</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=s1>&#39;grade&#39;</span> <span class=k>in</span> <span class=nx>xiaoming</span><span class=p>;</span> <span class=c1>// false
</span></span></span></code></pre></td></tr></table></div></div><p>不过要小心，如果 <code>in</code> 判断一个属性存在，这个属性不一定是 <code>xiaoming</code> 的，它可能是 <code>xiaoming</code> 继承得到的：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=s1>&#39;toString&#39;</span> <span class=k>in</span> <span class=nx>xiaoming</span><span class=p>;</span> <span class=c1>// true
</span></span></span></code></pre></td></tr></table></div></div><p>因为 <code>toString</code> 定义在 <code>object</code> 对象中，而所有对象最终都会在原型链上指向 <code>object</code>，所以 <code>xiaoming</code> 也拥有 <code>toString</code> 属性。</p><p>要判断一个属性是否是 <code>xiaoming</code> 自身拥有的，而不是继承得到的，可以用 <code>hasOwnProperty()</code> 方法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xiaoming</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>hasOwnProperty</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>);</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>hasOwnProperty</span><span class=p>(</span><span class=s1>&#39;toString&#39;</span><span class=p>);</span> <span class=c1>// false
</span></span></span></code></pre></td></tr></table></div></div><h4 id=变量>变量</h4><p>变量的概念基本上和初中代数的方程变量是一致的，只是在计算机程序中，变量不仅可以是数字，还可以是任意数据类型。</p><p>变量在 JavaScript 中就是用一个变量名表示，变量名是大小写英文、数字、<code>$</code> 和 <code>_</code>的组合，且不能用数字开头。变量名也不能是 JavaScript 的关键字，如 <code>if</code>、<code>while</code> 等。申明一个变量用 <code>var</code> 语句，比如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span><span class=p>;</span> 				<span class=c1>// 申明了变量a，此时a的值为undefined
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>$b</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> 		<span class=c1>// 申明了变量$b，同时给$b赋值，此时$b的值为1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>s_007</span> <span class=o>=</span> <span class=s1>&#39;007&#39;</span><span class=p>;</span> 	<span class=c1>// s_007是一个字符串
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>Answer</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span> 	<span class=c1>// Answer是一个布尔值true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>t</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span> 		<span class=c1>// t的值是null
</span></span></span></code></pre></td></tr></table></div></div><p>变量名也可以用中文，但是，请不要给自己找麻烦。</p><p>在 JavaScript 中，使用等号 <code>=</code> 对变量进行赋值。可以把任意数据类型赋值给变量，同一个变量可以反复赋值，而且可以是不同类型的变量，但是要注意只能用 <code>var</code> 申明一次，例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=mi>123</span><span class=p>;</span> <span class=c1>// a的值是整数123
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>a</span> <span class=o>=</span> <span class=s1>&#39;ABC&#39;</span><span class=p>;</span> <span class=c1>// a变为字符串
</span></span></span></code></pre></td></tr></table></div></div><p>这种变量本身类型不固定的语言称之为动态语言，与之对应的是静态语言。静态语言在定义变量时必须指定变量类型，如果赋值的时候类型不匹配，就会报错。和静态语言相比，动态语言更灵活，就是这个原因。</p><h4 id=数据类型转换>数据类型转换</h4><ol><li><p>转换为字符串</p><ul><li><code>var.toString()</code> 返回一个字符串型</li><li><code>String(var)</code> 返回一个字符串型</li><li><code>var + ‘“”</code> 直接用”+“拼接字符串（隐式转换）</li></ul></li><li><p>转换为数字型</p><ul><li><code>parseInt(string)</code> 返回整数，摈弃小数部分，摈弃后缀非数字</li><li><code>parseFloat(string)</code> 返回浮点数</li><li><code>Number(string)</code></li><li>利用算术运算 - * /：<code>str * 1</code> or <code>str / 1</code> or <code>str - 0</code></li></ul></li><li><p>转换为布尔型</p><ul><li><code>Boolean(var)</code> 返回布尔型，代表空、否定的值会被转换为 false，如 &lsquo;&rsquo;, 0, NaN, null, undefined</li></ul></li></ol><h3 id=map-和-set>Map 和 Set</h3><p>JavaScript 的默认对象表示方式 <code>{}</code> 可以视为其他语言中的 <code>Map</code> 或 <code>Dictionary</code> 的数据结构，即一组键值对。</p><p>但是 J avaScript 的对象有个小问题，就是键必须是字符串。但实际上 Number 或者其他数据类型作为键也是非常合理的。</p><h4 id=map>Map</h4><p><code>Map</code> 是一组键值对的结构，具有极快的查找速度。</p><p>举个例子，假设要根据同学的名字查找对应的成绩，如果用 <code>Array</code> 实现，需要两个 <code>Array</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>names</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Michael&#39;</span><span class=p>,</span> <span class=s1>&#39;Bob&#39;</span><span class=p>,</span> <span class=s1>&#39;Tracy&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>scores</span> <span class=o>=</span> <span class=p>[</span><span class=mi>95</span><span class=p>,</span> <span class=mi>75</span><span class=p>,</span> <span class=mi>85</span><span class=p>];</span>
</span></span></code></pre></td></tr></table></div></div><p>给定一个名字，要查找对应的成绩，就先要在 names 中找到对应的位置，再从 scores 取出对应的成绩，Array 越长，耗时越长。</p><p>如果用 Map 实现，只需要一个“名字”-“成绩”的对照表，直接根据名字查找成绩，无论这个表有多大，查找速度都不会变慢。用 JavaScript 写一个 Map 如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>m</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>([[</span><span class=s1>&#39;Michael&#39;</span><span class=p>,</span> <span class=mi>95</span><span class=p>],</span> <span class=p>[</span><span class=s1>&#39;Bob&#39;</span><span class=p>,</span> <span class=mi>75</span><span class=p>],</span> <span class=p>[</span><span class=s1>&#39;Tracy&#39;</span><span class=p>,</span> <span class=mi>85</span><span class=p>]]);</span>
</span></span><span class=line><span class=cl><span class=nx>m</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;Michael&#39;</span><span class=p>);</span> <span class=c1>// 95
</span></span></span></code></pre></td></tr></table></div></div><p>初始化 <code>Map</code> 需要一个二维数组，或者直接初始化一个空 <code>Map</code>。<code>Map</code> 具有以下方法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>m</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span> <span class=c1>// 空Map
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>m</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s1>&#39;Adam&#39;</span><span class=p>,</span> <span class=mi>67</span><span class=p>);</span> <span class=c1>// 添加新的key-value
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>m</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s1>&#39;Bob&#39;</span><span class=p>,</span> <span class=mi>59</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>m</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=s1>&#39;Adam&#39;</span><span class=p>);</span> <span class=c1>// 是否存在key &#39;Adam&#39;: true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>m</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;Adam&#39;</span><span class=p>);</span> <span class=c1>// 67
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>m</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=s1>&#39;Adam&#39;</span><span class=p>);</span> <span class=c1>// 删除key &#39;Adam&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>m</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;Adam&#39;</span><span class=p>);</span> <span class=c1>// undefined
</span></span></span></code></pre></td></tr></table></div></div><p>由于一个 key 只能对应一个 value，所以，多次对一个 key 放入 value，后面的值会把前面的值冲掉：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>m</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>m</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s1>&#39;Adam&#39;</span><span class=p>,</span> <span class=mi>67</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>m</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s1>&#39;Adam&#39;</span><span class=p>,</span> <span class=mi>88</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>m</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;Adam&#39;</span><span class=p>);</span> 		<span class=c1>// 88
</span></span></span></code></pre></td></tr></table></div></div><h4 id=set>Set</h4><p><code>Set</code> 和 <code>Map</code> 类似，也是一组 key 的集合，但不存储 value。由于 key 不能重复，所以，在 <code>Set</code> 中，没有重复的 key。</p><p>要创建一个 <code>Set</code>，需要提供一个<code>Array</code>作为输入，或者直接创建一个空 <code>Set</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>();</span> <span class=c1>// 空Set
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>s2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]);</span> <span class=c1>// 含1, 2, 3
</span></span></span></code></pre></td></tr></table></div></div><p>重复元素在 <code>Set</code> 中自动被过滤：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>&#39;3&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>;</span> <span class=c1>// Set {1, 2, 3, &#34;3&#34;}
</span></span></span></code></pre></td></tr></table></div></div><p>通过 <code>add(key)</code> 方法可以添加元素到 <code>Set</code> 中，可以重复添加，但不会有效果：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>s</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>;</span> <span class=c1>// Set {1, 2, 3, 4}
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>s</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>;</span> <span class=c1>// 仍然是 Set {1, 2, 3, 4}
</span></span></span></code></pre></td></tr></table></div></div><p>通过 <code>delete(key)</code> 方法可以删除元素：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>;</span> <span class=c1>// Set {1, 2, 3}
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>s</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>;</span> <span class=c1>// Set {1, 2}
</span></span></span></code></pre></td></tr></table></div></div><h3 id=iterable>iterable</h3><p>遍历 <code>Array</code> 可以采用下标循环，遍历 <code>Map</code> 和 <code>Set</code> 就无法使用下标。为了统一集合类型，ES6 标准引入了新的 <code>iterable</code> 类型，<code>Array</code>、<code>Map</code> 和 <code>Set</code>都属于 <code>iterable</code> 类型。</p><h4 id=for--of>for … of</h4><p>具有 <code>iterable</code> 类型的集合可以通过新的 <code>for ... of</code> 循环来遍历。</p><p><code>for ... of</code> 循环是 ES6 引入的新的语法，</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>([</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>m</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>([[</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;x&#39;</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;y&#39;</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=s1>&#39;z&#39;</span><span class=p>]]);</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>x</span> <span class=k>of</span> <span class=nx>a</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// 遍历Array
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>x</span> <span class=k>of</span> <span class=nx>s</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// 遍历Set
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>x</span> <span class=k>of</span> <span class=nx>m</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// 遍历Map
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>x</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=s1>&#39;=&#39;</span> <span class=o>+</span> <span class=nx>x</span><span class=p>[</span><span class=mi>1</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=foreach>forEach</h4><p>更好的方式是直接使用 <code>iterable</code> 内置的 <code>forEach</code> 方法，它接收一个函数，每次迭代就自动回调该函数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>a</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>element</span><span class=p>,</span> <span class=nx>index</span><span class=p>,</span> <span class=nx>array</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// element: 指向当前元素的值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// index: 指向当前索引
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// array: 指向Array对象本身
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>element</span> <span class=o>+</span> <span class=s1>&#39;, index = &#39;</span> <span class=o>+</span> <span class=nx>index</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Set</code> 与 <code>Array</code> 类似，但 <code>Set</code> 没有索引，因此回调函数的前两个参数都是元素本身：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>([</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nx>s</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>element</span><span class=p>,</span> <span class=nx>sameElement</span><span class=p>,</span> <span class=nx>set</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>element</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Map</code> 的回调函数参数依次为 <code>value</code>、<code>key</code> 和 <code>map</code> 本身：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>m</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>([[</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;x&#39;</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;y&#39;</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=s1>&#39;z&#39;</span><span class=p>]]);</span>
</span></span><span class=line><span class=cl><span class=nx>m</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>value</span><span class=p>,</span> <span class=nx>key</span><span class=p>,</span> <span class=nx>map</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>如果对某些参数不感兴趣，由于 JavaScript 的函数调用不要求参数必须一致，因此可以忽略它们。例如，只需要获得 <code>Array</code> 的 <code>element</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>a</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>element</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>element</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=for-in-和-for-of-辨析>for in 和 for of 辨析</h4><p>for&mldr; in</p><ul><li>遍历对象时，得到 key</li><li>遍历数组时，得到下标</li></ul><p>for&mldr; of</p><ul><li>遍历数组时，得到值</li><li>不能遍历对象</li></ul><h2 id=函数>函数</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>//1、利用函数关键字
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>函数名</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//函数体
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//2、函数表达式（匿名函数，只有变量名没有函数名）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>变量名</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//函数体
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><ol><li><p>如果没有<code>return</code>语句，函数执行完毕后也会返回结果，只是结果为<code>undefined</code></p></li><li><p>在第二种声明方式下，<code>function (x) { ... }</code> 是一个匿名函数，它没有函数名。但是，这个匿名函数赋值给了变量 <code>变量名</code>，所以，通过变量<code>变量名</code>就可以调用该函数。上述两种定义<em>完全等价</em>，注意第二种方式按照完整语法需要在函数体末尾加一个 <code>;</code>，表示赋值语句结束。</p></li><li><p>由于 JavaScript 允许传入任意个参数而不影响调用，因此传入的参数比定义的参数多也没有问题，虽然函数内部并不需要这些参数</p></li><li><p>传入的参数比定义的少也没有问题，返回 <code>NaN</code></p></li></ol><h3 id=arguements>arguements</h3><p>JavaScript 还有一个免费赠送的关键字 <code>arguments</code>，它只在函数内部起作用，并且永远指向当前函数的调用者传入的所有参数。<code>arguments</code> 类似<code>Array </code>但它不是一个 <code>Array</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>(</span><span class=nx>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;x = &#39;</span> <span class=o>+</span> <span class=nx>x</span><span class=p>);</span> <span class=c1>// 10
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=nx>i</span><span class=o>&lt;</span><span class=nx>arguments</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;arg &#39;</span> <span class=o>+</span> <span class=nx>i</span> <span class=o>+</span> <span class=s1>&#39; = &#39;</span> <span class=o>+</span> <span class=nx>arguments</span><span class=p>[</span><span class=nx>i</span><span class=p>]);</span> <span class=c1>// 10, 20, 30
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>foo</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>30</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//输出
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>x</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=nx>arg</span> <span class=mi>0</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=nx>arg</span> <span class=mi>1</span> <span class=o>=</span> <span class=mi>20</span>
</span></span><span class=line><span class=cl><span class=nx>arg</span> <span class=mi>2</span> <span class=o>=</span> <span class=mi>30</span>
</span></span></code></pre></td></tr></table></div></div><p>利用 <code>arguments</code>，可以获得调用者传入的所有参数。也就是说，即使函数不定义任何参数，还是可以拿到参数的值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>abs</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>arguments</span><span class=p>.</span><span class=nx>length</span> <span class=o>===</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>x</span> <span class=o>=</span> <span class=nx>arguments</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>x</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=o>?</span> <span class=nx>x</span> <span class=o>:</span> <span class=o>-</span><span class=nx>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>abs</span><span class=p>();</span> <span class=c1>// 0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>abs</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span> <span class=c1>// 10
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>abs</span><span class=p>(</span><span class=o>-</span><span class=mi>9</span><span class=p>);</span> <span class=c1>// 9
</span></span></span></code></pre></td></tr></table></div></div><p>实际上 <code>arguments</code> 最常用于判断传入参数的个数。你可能会看到这样的写法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// foo(a[, b], c)
</span></span></span><span class=line><span class=cl><span class=c1>// 接收2~3个参数，b是可选参数，如果只传2个参数，b默认为null：
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>foo</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>arguments</span><span class=p>.</span><span class=nx>length</span> <span class=o>===</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 实际拿到的参数是a和b，c为undefined
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>c</span> <span class=o>=</span> <span class=nx>b</span><span class=p>;</span> <span class=c1>// 把b赋给c
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>b</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span> <span class=c1>// b变为默认值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>要把中间的参数 <code>b</code> 变为“可选”参数，就只能通过 <code>arguments</code> 判断，然后重新调整参数并赋值。</p><h3 id=rest>rest</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=p>...</span><span class=nx>rest</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;a = &#39;</span> <span class=o>+</span> <span class=nx>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;b = &#39;</span> <span class=o>+</span> <span class=nx>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>rest</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>foo</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// 结果:
</span></span></span><span class=line><span class=cl><span class=c1>// a = 1
</span></span></span><span class=line><span class=cl><span class=c1>// b = 2
</span></span></span><span class=line><span class=cl><span class=c1>// Array [ 3, 4, 5 ]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>foo</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// 结果:
</span></span></span><span class=line><span class=cl><span class=c1>// a = 1
</span></span></span><span class=line><span class=cl><span class=c1>// b = undefined
</span></span></span><span class=line><span class=cl><span class=c1>// Array []
</span></span></span></code></pre></td></tr></table></div></div><p>rest 参数只能写在最后，前面用 <code>...</code> 标识，传入的参数先绑定<code>a</code>、<code>b</code>，多余的参数以数组形式交给变量 <code>rest</code>，所以，不再需要 <code>arguments</code> 我们就获取了全部参数。</p><p>如果传入的参数连正常定义的参数都没填满，也不要紧，rest 参数会接收一个空数组（注意不是 <code>undefined</code> ）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>sum</span><span class=p>(...</span><span class=nx>rest</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>rest</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>result</span> <span class=o>+=</span> <span class=nx>rest</span><span class=p>[</span><span class=nx>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=变量作用域与解构赋值>变量作用域与解构赋值</h3><ol><li>如果一个变量在函数体内部申明，则该变量的作用域为整个函数体，在函数体外不可引用该变量</li><li>不同函数内部的同名变量互相独立，互不影响</li><li>由于 JavaScript 的函数可以嵌套，此时，内部函数可以访问外部函数定义的变量，反过来则不行</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>x</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nx>bar</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>y</span> <span class=o>=</span> <span class=nx>x</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=c1>// bar可以访问foo的变量x!
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>z</span> <span class=o>=</span> <span class=nx>y</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=c1>// ReferenceError! foo不可以访问bar的变量y!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ol start=4><li>JavaScript 的函数在查找变量时从自身函数定义开始，从“内”向“外”查找。如果内部函数定义了与外部函数重名的变量，则内部函数的变量将“屏蔽”外部函数的变量</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>x</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nx>bar</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>x</span> <span class=o>=</span> <span class=s1>&#39;A&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;x in bar() = &#39;</span> <span class=o>+</span> <span class=nx>x</span><span class=p>);</span> <span class=c1>// &#39;A&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;x in foo() = &#39;</span> <span class=o>+</span> <span class=nx>x</span><span class=p>);</span> <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>bar</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=变量提升>变量提升</h3><p>JavaScript 的函数定义有个特点，它会先扫描整个函数体的语句，把所有申明的变量“提升”到函数顶部</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>x</span> <span class=o>=</span> <span class=s1>&#39;Hello, &#39;</span> <span class=o>+</span> <span class=nx>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>y</span> <span class=o>=</span> <span class=s1>&#39;Bob&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>语句 <code>var x = 'Hello, ' + y;</code> 并不报错，原因是变量 <code>y</code> 在稍后申明了。但是 <code>console.log</code> 显示 <code>Hello, undefined</code>，说明变量 <code>y</code> 的值为 <code>undefined</code>。这正是因为 JavaScript 引擎自动提升了变量 <code>y</code> 的声明，但不会提升变量 <code>y</code> 的赋值。</p><p>由于 JavaScript 的这一怪异的“特性”，我们在函数内部定义变量时，请严格遵守“在函数内部首先申明所有变量”这一规则。最常见的做法是用一个 <code>var</code> 申明函数内部用到的所有变量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span>
</span></span><span class=line><span class=cl>        <span class=nx>x</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=c1>// x初始化为1
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>y</span> <span class=o>=</span> <span class=nx>x</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=c1>// y初始化为2
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>z</span><span class=p>,</span> <span class=nx>i</span><span class=p>;</span> <span class=c1>// z和i为undefined
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 其他语句:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=p>(</span><span class=nx>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=nx>i</span><span class=o>&lt;</span><span class=mi>100</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=全局作用域>全局作用域</h3><p>不在任何函数内定义的变量就具有全局作用域。实际上，JavaScript 默认有一个全局对象<code>window</code>，全局作用域的变量实际上被绑定到 <code>window</code> 的一个属性：</p><p>例如，直接访问全局变量 <code>course</code> 和访问 <code>window.course</code> 是完全一样的。</p><p>顶层函数的定义也被视为一个全局变量，并绑定到 <code>window</code> 对象：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>course</span> <span class=o>=</span> <span class=s1>&#39;Learn JavaScript&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>alert</span><span class=p>(</span><span class=nx>course</span><span class=p>);</span> <span class=c1>// &#39;Learn JavaScript&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>alert</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>course</span><span class=p>);</span> <span class=c1>// &#39;Learn JavaScript&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;foo&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>foo</span><span class=p>();</span> <span class=c1>// 直接调用foo()
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>window</span><span class=p>.</span><span class=nx>foo</span><span class=p>();</span> <span class=c1>// 通过window.foo()调用
</span></span></span></code></pre></td></tr></table></div></div><p>这说明 JavaScript 实际上只有一个全局作用域。任何变量（函数也视为变量），如果没有在当前函数作用域中找到，就会继续往上查找，最后如果在全局作用域中也没有找到，则报 <code>ReferenceError</code> 错误</p><h3 id=名字空间>名字空间</h3><p>全局变量会绑定到 <code>window</code> 上，不同的 JavaScript 文件如果使用了相同的全局变量，或者定义了相同名字的顶层函数，都会造成命名冲突，并且很难被发现。</p><p>减少冲突的一个方法是把自己的所有变量和函数全部绑定到一个全局变量中</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 唯一的全局变量MYAPP:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>MYAPP</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 其他变量:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>MYAPP</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;myapp&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>MYAPP</span><span class=p>.</span><span class=nx>version</span> <span class=o>=</span> <span class=mf>1.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 其他函数:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>MYAPP</span><span class=p>.</span><span class=nx>foo</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;foo&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>把自己的代码全部放入唯一的名字空间<code>MYAPP</code>中，会大大减少全局变量冲突的可能。</p><p>许多著名的 JavaScript 库都是这么干的：jQuery，YUI，underscore 等等</p><h3 id=局部作用域>局部作用域</h3><p>由于 JavaScript 的变量作用域实际上是函数内部，我们在 <code>for</code> 循环等语句块中是无法定义具有局部作用域的变量的：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=nx>i</span><span class=o>&lt;</span><span class=mi>100</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>i</span> <span class=o>+=</span> <span class=mi>100</span><span class=p>;</span> <span class=c1>// 仍然可以引用变量i
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>为了解决块级作用域，ES6 引入了新的关键字 <code>let</code>，用 <code>let</code> 替代 <code>var</code> 可以<strong>申明一个块级作用域的变量</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=nx>i</span><span class=o>&lt;</span><span class=mi>100</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>sum</span> <span class=o>+=</span> <span class=nx>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// SyntaxError:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>i</span> <span class=o>+=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>==let 的具体作用==：https://typescript.bootcss.com/variable-declarations.html</p><h3 id=常量>常量</h3><p>由于 <code>var</code> 和 <code>let</code> 申明的是变量，如果要申明一个常量，在 ES6 之前是不行的，我们通常用全部大写的变量来表示“这是一个常量，不要修改它的值”</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>PI</span> <span class=o>=</span> <span class=mf>3.14</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>ES6 标准引入了新的关键字 <code>const</code> 来定义常量，<code>const</code> 与 <code>let</code> 都具有块级作用域：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=s1>&#39;use strict&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>PI</span> <span class=o>=</span> <span class=mf>3.14</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>PI</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span> <span class=c1>// 某些浏览器不报错，但是无效果！
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>PI</span><span class=p>;</span> <span class=c1>// 3.14
</span></span></span></code></pre></td></tr></table></div></div><h3 id=解构赋值>解构赋值</h3><p>从 ES6 开始，JavaScript 引入了解构赋值，可以同时对一组变量进行赋值。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>,</span> <span class=nx>z</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;hello&#39;</span><span class=p>,</span> <span class=s1>&#39;JavaScript&#39;</span><span class=p>,</span> <span class=s1>&#39;ES6&#39;</span><span class=p>];</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=详解>详解</h4><p>如果数组本身还有嵌套，也可以通过下面的形式进行解构赋值，注意嵌套层次和位置要保持一致</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=p>[</span><span class=nx>y</span><span class=p>,</span> <span class=nx>z</span><span class=p>]]</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;hello&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;JavaScript&#39;</span><span class=p>,</span> <span class=s1>&#39;ES6&#39;</span><span class=p>]];</span>
</span></span><span class=line><span class=cl><span class=nx>x</span><span class=p>;</span> <span class=c1>// &#39;hello&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>y</span><span class=p>;</span> <span class=c1>// &#39;JavaScript&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>z</span><span class=p>;</span> <span class=c1>// &#39;ES6&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>解构赋值还可以忽略某些元素</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=p>[,</span> <span class=p>,</span> <span class=nx>z</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;hello&#39;</span><span class=p>,</span> <span class=s1>&#39;JavaScript&#39;</span><span class=p>,</span> <span class=s1>&#39;ES6&#39;</span><span class=p>];</span> <span class=c1>// 忽略前两个元素，只对z赋值第三个元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>z</span><span class=p>;</span> <span class=c1>// &#39;ES6&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>如果需要从一个对象中取出若干属性，也可以使用解构赋值，便于快速获取对象的指定属性</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>person</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>gender</span><span class=o>:</span> <span class=s1>&#39;male&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>passport</span><span class=o>:</span> <span class=s1>&#39;G-12345678&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>school</span><span class=o>:</span> <span class=s1>&#39;No.4 middle school&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>address</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>city</span><span class=o>:</span> <span class=s1>&#39;Beijing&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>street</span><span class=o>:</span> <span class=s1>&#39;No.1 Road&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>zipcode</span><span class=o>:</span> <span class=s1>&#39;100001&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=p>{</span><span class=nx>name</span><span class=p>,</span> <span class=nx>address</span><span class=o>:</span> <span class=p>{</span><span class=nx>city</span><span class=p>,</span> <span class=nx>zip</span><span class=p>}}</span> <span class=o>=</span> <span class=nx>person</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>name</span><span class=p>;</span> <span class=c1>// &#39;小明&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>city</span><span class=p>;</span> <span class=c1>// &#39;Beijing&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>zip</span><span class=p>;</span> <span class=c1>// undefined, 因为属性名是zipcode而不是zip
</span></span></span><span class=line><span class=cl><span class=c1>// 注意: address不是变量，而是为了让city和zip获得嵌套的address对象的属性:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>address</span><span class=p>;</span> <span class=c1>// Uncaught ReferenceError: address is not defined
</span></span></span></code></pre></td></tr></table></div></div><p>如果要使用的变量名和属性名不一致，可以用下面的语法获取</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>person</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>gender</span><span class=o>:</span> <span class=s1>&#39;male&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>passport</span><span class=o>:</span> <span class=s1>&#39;G-12345678&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>school</span><span class=o>:</span> <span class=s1>&#39;No.4 middle school&#39;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 把passport属性赋值给变量id:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=p>{</span><span class=nx>name</span><span class=p>,</span> <span class=nx>passport</span><span class=o>:</span><span class=nx>id</span><span class=p>}</span> <span class=o>=</span> <span class=nx>person</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>name</span><span class=p>;</span> <span class=c1>// &#39;小明&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>id</span><span class=p>;</span> <span class=c1>// &#39;G-12345678&#39;
</span></span></span><span class=line><span class=cl><span class=c1>// 注意: passport不是变量，而是为了让变量id获得passport属性:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>passport</span><span class=p>;</span> <span class=c1>// Uncaught ReferenceError: passport is not defined
</span></span></span></code></pre></td></tr></table></div></div><p>解构赋值还可以使用默认值，这样就避免了不存在的属性返回<code>undefined</code>的问题</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>person</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>gender</span><span class=o>:</span> <span class=s1>&#39;male&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>passport</span><span class=o>:</span> <span class=s1>&#39;G-12345678&#39;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 如果person对象没有single属性，默认赋值为true:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=p>{</span><span class=nx>name</span><span class=p>,</span> <span class=nx>single</span><span class=o>=</span><span class=kc>true</span><span class=p>}</span> <span class=o>=</span> <span class=nx>person</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>name</span><span class=p>;</span> <span class=c1>// &#39;小明&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>single</span><span class=p>;</span> <span class=c1>// true
</span></span></span></code></pre></td></tr></table></div></div><p>有些时候，如果变量已经被声明了，再次赋值的时候，正确的写法也会报语法错误</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 声明变量:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// 解构赋值:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>}</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span> <span class=nx>x</span><span class=o>:</span> <span class=mi>100</span><span class=p>,</span> <span class=nx>y</span><span class=o>:</span> <span class=mi>200</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=c1>// 语法错误: Uncaught SyntaxError: Unexpected token =
</span></span></span></code></pre></td></tr></table></div></div><p>这是因为 JavaScript 引擎把 <code>{</code> 开头的语句当作了块处理，于是 <code>= </code>不再合法。解决方法是用小括号括起来：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>({</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>}</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span> <span class=nx>x</span><span class=o>:</span> <span class=mi>100</span><span class=p>,</span> <span class=nx>y</span><span class=o>:</span> <span class=mi>200</span><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=使用场景>使用场景</h4><p>解构赋值在很多时候可以大大简化代码。例如，交换两个变量<code>x</code>和<code>y</code>的值，可以这么写，不再需要临时变量：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>x</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>y</span><span class=o>=</span><span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=nx>y</span><span class=p>,</span> <span class=nx>x</span><span class=p>]</span><span class=nx>快速获取当前页面的域名和路径</span><span class=err>：</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>var {hostname:domain, pathname:path} = location;
</span></span></code></pre></td></tr></table></div></div><p>如果一个函数接收一个对象作为参数，那么，可以使用解构直接把对象的属性绑定到变量中。例如，下面的函数可以快速创建一个<code>Date</code>对象：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>buildDate</span><span class=p>({</span><span class=nx>year</span><span class=p>,</span> <span class=nx>month</span><span class=p>,</span> <span class=nx>day</span><span class=p>,</span> <span class=nx>hour</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=nx>minute</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=nx>second</span><span class=o>=</span><span class=mi>0</span><span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(</span><span class=nx>year</span> <span class=o>+</span> <span class=s1>&#39;-&#39;</span> <span class=o>+</span> <span class=nx>month</span> <span class=o>+</span> <span class=s1>&#39;-&#39;</span> <span class=o>+</span> <span class=nx>day</span> <span class=o>+</span> <span class=s1>&#39; &#39;</span> <span class=o>+</span> <span class=nx>hour</span> <span class=o>+</span> <span class=s1>&#39;:&#39;</span> <span class=o>+</span> <span class=nx>minute</span> <span class=o>+</span> <span class=s1>&#39;:&#39;</span> <span class=o>+</span> <span class=nx>second</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>它的方便之处在于传入的对象只需要<code>year</code>、<code>month</code>和<code>day</code>这三个属性：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>buildDate</span><span class=p>({</span> <span class=nx>year</span><span class=o>:</span> <span class=mi>2017</span><span class=p>,</span> <span class=nx>month</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>day</span><span class=o>:</span> <span class=mi>1</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// Sun Jan 01 2017 00:00:00 GMT+0800 (CST)
</span></span></span></code></pre></td></tr></table></div></div><p>也可以传入<code>hour</code>、<code>minute</code>和<code>second</code>属性：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>buildDate</span><span class=p>({</span> <span class=nx>year</span><span class=o>:</span> <span class=mi>2017</span><span class=p>,</span> <span class=nx>month</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>day</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>hour</span><span class=o>:</span> <span class=mi>20</span><span class=p>,</span> <span class=nx>minute</span><span class=o>:</span> <span class=mi>15</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// Sun Jan 01 2017 20:15:00 GMT+0800 (CST)
</span></span></span></code></pre></td></tr></table></div></div><p>使用解构赋值可以减少代码量，但是，需要在支持 ES6 解构赋值特性的现代浏览器中才能正常运行。目前支持解构赋值的浏览器包括 Chrome，Firefox，Edge 等</p><h3 id=方法>方法</h3><p>在一个对象中绑定函数，称为这个对象的方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xiaoming</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>birth</span><span class=o>:</span> <span class=mi>1990</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>y</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getFullYear</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>y</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>birth</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>age</span><span class=p>;</span> <span class=c1>// function xiaoming.age()
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>age</span><span class=p>();</span> <span class=c1>// 今年调用是25,明年调用就变成26了
</span></span></span></code></pre></td></tr></table></div></div><p>在一个方法内部，<code>this</code> 是一个特殊变量，它始终指向当前对象，也就是 <code>xiaoming</code> 这个变量。所以，<code>this.birth</code> 可以拿到 <code>xiaoming</code> 的 <code>birth </code>属性。</p><h4 id=函数嵌套中的-this-用法>函数嵌套中的 this 用法</h4><p>用<code>var that = this;</code>，你就可以放心地在方法内部定义其他函数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xiaoming</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>birth</span><span class=o>:</span> <span class=mi>1990</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>that</span> <span class=o>=</span> <span class=k>this</span><span class=p>;</span> <span class=c1>// 在方法内部一开始就捕获this
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>function</span> <span class=nx>getAgeFromBirth</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>y</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getFullYear</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>y</span> <span class=o>-</span> <span class=nx>that</span><span class=p>.</span><span class=nx>birth</span><span class=p>;</span> <span class=c1>// 用that而不是this
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>getAgeFromBirth</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>age</span><span class=p>();</span> <span class=c1>// 25
</span></span></span></code></pre></td></tr></table></div></div><h4 id=apply>apply</h4><p>要指定函数的 <code>this</code> 指向哪个对象，可以用函数本身的 <code>apply</code> 方法，它接收两个参数，第一个参数就是需要绑定的 <code>this</code> 变量，第二个参数是 <code>Array</code>，表示函数本身的参数。</p><p>用 <code>apply</code> 修复 <code>getAge()</code> 调用</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>getAge</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>y</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getFullYear</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>y</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>birth</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xiaoming</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>birth</span><span class=o>:</span> <span class=mi>1990</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=nx>getAge</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>age</span><span class=p>();</span> <span class=c1>// 25
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>getAge</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=nx>xiaoming</span><span class=p>,</span> <span class=p>[]);</span> <span class=c1>// 25, this指向xiaoming, 参数为空
</span></span></span></code></pre></td></tr></table></div></div><p>另一个与 <code>apply()</code> 类似的方法是 <code>call()</code>，唯一区别是：</p><ul><li><code>apply()</code> 把参数打包成 <code>Array</code> 再传入；</li><li><code>call()</code> 把参数按顺序传入。</li></ul><p>比如调用 <code>Math.max(3, 5, 4)</code>，分别用 <code>apply()</code> 和 <code>call()</code> 实现如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>Math</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>]);</span> <span class=c1>// 5
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>Math</span><span class=p>.</span><span class=nx>max</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>);</span> <span class=c1>// 5
</span></span></span></code></pre></td></tr></table></div></div><p>对普通函数调用，我们通常把 <code>this</code> 绑定为 <code>null</code>。</p><h4 id=装饰器>装饰器</h4><p>利用 <code>apply()</code>，我们还可以动态改变函数的行为。</p><p>JavaScript 的所有对象都是动态的，即使内置的函数，我们也可以重新指向新的函数。</p><p>例</p><p>现在假定我们想统计一下代码一共调用了多少次 <code>parseInt()</code>，可以把所有的调用都找出来，然后手动加上 <code>count += 1</code>，不过这样做太傻了。最佳方案是用我们自己的函数替换掉默认的 <code>parseInt()</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>count</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>oldParseInt</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>;</span> <span class=c1>// 保存原函数
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nb>parseInt</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span> <span class=o>+=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>oldParseInt</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=nx>arguments</span><span class=p>);</span> <span class=c1>// 调用原函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=高阶函数>高阶函数</h3><p>JavaScript 的函数其实都指向某个变量。既然变量可以指向函数，函数的参数能接收变量，那么一个函数就可以接收另一个函数作为参数，这种函数就称之为高阶函数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>add</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>,</span> <span class=nx>f</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>f</span><span class=p>(</span><span class=nx>x</span><span class=p>)</span> <span class=o>+</span> <span class=nx>f</span><span class=p>(</span><span class=nx>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>编写高阶函数，就是让函数的参数能够接收别的函数</p><h4 id=map-1>map</h4><p>要把一个函数作用在一个数组上，就可以用 <code>map</code> 实现</p><p><code>map() </code>方法定义在 JavaScript 的 <code>Array</code> 中</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>pow</span><span class=p>(</span><span class=nx>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>x</span> <span class=o>*</span> <span class=nx>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>results</span> <span class=o>=</span> <span class=nx>arr</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>pow</span><span class=p>);</span> 
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>results</span><span class=p>);</span> <span class=c1>// [1, 4, 9, 16, 25, 36, 49, 64, 81]
</span></span></span></code></pre></td></tr></table></div></div><h4 id=reduce>reduce</h4><p>Array 的 <code>reduce()</code> 把一个函数作用在这个 <code>Array</code> 的 <code>[x1, x2, x3...]</code> 上，这个函数必须接收两个参数，<code>reduce()</code> 把结果继续和序列的下一个元素做累积计算，其效果就是：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>[</span><span class=nx>x1</span><span class=p>,</span> <span class=nx>x2</span><span class=p>,</span> <span class=nx>x3</span><span class=p>,</span> <span class=nx>x4</span><span class=p>].</span><span class=nx>reduce</span><span class=p>(</span><span class=nx>f</span><span class=p>)</span> <span class=o>=</span> <span class=nx>f</span><span class=p>(</span><span class=nx>f</span><span class=p>(</span><span class=nx>f</span><span class=p>(</span><span class=nx>x1</span><span class=p>,</span> <span class=nx>x2</span><span class=p>),</span> <span class=nx>x3</span><span class=p>),</span> <span class=nx>x4</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>比方说对一个<code>Array</code>求和，就可以用<code>reduce</code>实现</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>9</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>reduce</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>});</span> <span class=c1>// 25
</span></span></span></code></pre></td></tr></table></div></div><h3 id=箭头函数>箭头函数</h3><p>箭头函数包括一个参数列表（零个或多个参数，如果参数个数不是一个的话要用 <code>()</code> 包围起来），然后是标识 <code>=></code>，函数体放在最后。</p><p>只有在函数体的表达式个数多于 1 个，或者函数体包含非表达式语句的时候才需要用 <code>{}</code> 包围。如果只有一个表达式，并且省略了包围的 <code>{}</code> 的话，则意味着表达式前面有一个隐含的 <code>return</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>f1</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=mi>12</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>f2</span> <span class=o>=</span> <span class=nx>x</span> <span class=p>=&gt;</span> <span class=nx>x</span> <span class=o>*</span> <span class=mi>2</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>f3</span> <span class=o>=</span> <span class=p>(</span><span class=nx>x</span><span class=p>,</span><span class=nx>y</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>z</span> <span class=o>=</span> <span class=nx>x</span> <span class=o>*</span> <span class=mi>2</span> <span class=o>+</span> <span class=nx>y</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=nx>y</span><span class=o>++</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=nx>x</span> <span class=o>*=</span> <span class=mi>3</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span><span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span> <span class=o>+</span> <span class=nx>z</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=面向对象编程>面向对象编程</h2><p>JavaScript 不区分类和实例的概念，而是通过<strong>原型</strong>（prototype）来实现面向对象编程。</p><p>JavaScript 的原型链和 Java 的 Class 区别就在，它没有“Class”的概念，所有对象都是实例，所谓继承关系不过是把一个对象的原型指向另一个对象而已</p><h3 id=创建对象>创建对象</h3><h4 id=原型回溯>原型回溯</h4><p>JavaScript 对每个创建的对象都会设置一个原型，指向它的原型对象。</p><p>当我们用 <code>obj.xxx</code> 访问一个对象的属性时，JavaScript 引擎先在当前对象上查找该属性，如果没有找到，就到其原型对象上找，如果还没有找到，就一直上溯到 <code>Object.prototype</code> 对象，最后，如果还没有找到，就只能返回 <code>undefined</code></p><ol><li>创建一个 <code>Array</code> 对象：</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>];</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 其原型链是：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>arr</span> <span class=o>----&gt;</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>----&gt;</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>----&gt;</span> <span class=kc>null</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>创建一个函数时：</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 函数也是一个对象，它的原型链是：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>foo</span> <span class=o>----&gt;</span> <span class=nb>Function</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>----&gt;</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>----&gt;</span> <span class=kc>null</span>
</span></span></code></pre></td></tr></table></div></div><p>如果原型链很长，那么访问一个对象的属性就会因为花更多的时间查找而变得更慢，因此要注意不要把原型链搞得太长</p><h4 id=构造函数>构造函数</h4><p>例</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Cat</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// this.say = function () {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     alert(&#39;miao~ &#39; + this.name);
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>Cat</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>say</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;miao~ &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>cat1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Cat</span><span class=p>(</span><span class=s1>&#39;aa&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>cat2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Cat</span><span class=p>(</span><span class=s1>&#39;bb&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>cat1</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>cat2</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=构造>构造</h5><p>除了直接用 <code>{ ... }</code> 创建一个对象外，JavaScript 还可以用一种构造函数的方法来创建对象。它的用法是，先定义一个构造函数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Student</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>hello</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Hello, &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39;!&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>按照约定，构造函数首字母应当大写，而普通函数首字母应当小写</p><h5 id=调用>调用</h5><p>用关键字 <code>new</code> 来调用这个函数，并返回一个对象</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xiaoming</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Student</span><span class=p>(</span><span class=s1>&#39;小明&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span> <span class=c1>// &#39;小明&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>hello</span><span class=p>();</span> <span class=c1>// Hello, 小明!
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>如果不写 <code>new</code>，这就是一个普通函数，它返回 <code>undefined</code>。但是，如果写了 <code>new</code>，它就变成了一个构造函数，它绑定的 <code>this</code> 指向新创建的对象，并默认返回 <code>this</code>，也就是说，不需要在最后写 <code>return this;</code></p></blockquote><h5 id=constructor-属性>constructor 属性</h5><p>对象会从原型上获得了个 <code>constructor</code>属性，它指向构造函数本身</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>===</span> <span class=nx>Student</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>===</span> <span class=nx>Student</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>Object</span><span class=p>.</span><span class=nx>getPrototypeOf</span><span class=p>(</span><span class=nx>xiaoming</span><span class=p>)</span> <span class=o>===</span> <span class=nx>Student</span><span class=p>.</span><span class=nx>prototype</span><span class=p>;</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>xiaoming</span> <span class=k>instanceof</span> <span class=nx>Student</span><span class=p>;</span> <span class=c1>// true
</span></span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=http://markdown-1303167219.cos.ap-shanghai.myqcloud.com/l data-srcset="http://markdown-1303167219.cos.ap-shanghai.myqcloud.com/l, http://markdown-1303167219.cos.ap-shanghai.myqcloud.com/l 1.5x, http://markdown-1303167219.cos.ap-shanghai.myqcloud.com/l 2x" data-sizes=auto alt=http://markdown-1303167219.cos.ap-shanghai.myqcloud.com/l title=protos></p><h5 id=共享函数>共享函数</h5><p>Javascript 规定，每一个构造函数都有一个 <code>prototype</code> 属性，指向另一个对象。这个对象的所有属性和方法，都会被构造函数的实例继承。</p><p>要让创建的对象共享一个函数，根据对象的属性查找原则，我们只要把这个函数移动到对象共同的原型上就可以了，在例子中也就是 <code>Student.prototype</code></p><p>修改代码如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Student</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Student</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>hello</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Hello, &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39;!&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=封装>封装</h5><p>可以编写一个 <code>createStudent()</code> 函数，在内部封装所有的 <code>new</code> 操作。一个常用的编程模式像这样：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Student</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>props</span><span class=p>.</span><span class=nx>name</span> <span class=o>||</span> <span class=s1>&#39;匿名&#39;</span><span class=p>;</span> 	   <span class=c1>// 默认值为&#39;匿名&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>this</span><span class=p>.</span><span class=nx>grade</span> <span class=o>=</span> <span class=nx>props</span><span class=p>.</span><span class=nx>grade</span> <span class=o>||</span> <span class=mi>1</span><span class=p>;</span> 			<span class=c1>// 默认值为1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Student</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>hello</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Hello, &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39;!&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>createStudent</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nx>Student</span><span class=p>(</span><span class=nx>props</span> <span class=o>||</span> <span class=p>{})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>这个 <code>createStudent()</code> 函数有几个巨大的优点：一是不需要 <code>new</code> 来调用，二是参数非常灵活，可以不传，也可以这么传：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xiaoming</span> <span class=o>=</span> <span class=nx>createStudent</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;小明&#39;</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>xiaoming</span><span class=p>.</span><span class=nx>grade</span><span class=p>;</span> <span class=c1>// 1
</span></span></span></code></pre></td></tr></table></div></div><p>如果创建的对象有很多属性，我们只需要传递需要的某些属性，剩下的属性可以用默认值。由于参数是一个 Object，我们无需记忆参数的顺序。如果恰好从 <code>JSON</code> 拿到了一个对象，就可以直接创建出 <code>xiaoming</code>。</p><h4 id=原型继承>原型继承</h4><p>在传统的基于 Class 的语言如 Java、C++ 中，继承的本质是扩展一个已有的 Class，并生成新的 Subclass。</p><p>由于这类语言严格区分类和实例，继承实际上是类型的扩展。但是，JavaScript 由于采用原型继承，我们无法直接扩展一个 Class，因为根本不存在 Class 这种类型。</p><p>JS 的继承就你妈是一坨屎，暂且不学</p><h4 id=class-继承>class 继承</h4><p>新的关键字 <code>class</code> 从 ES6 开始正式被引入到 JavaScript 中。<code>class</code> 的目的就是让定义类更简单。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>hello</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Hello, &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39;!&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>比较一下就可以发现，<code>class</code> 的定义包含了构造函数 <code>constructor</code> 和定义在原型对象上的函数 <code>hello()</code>（注意没有 <code>function</code> 关键字），这样就避免了 <code>Student.prototype.hello = function () {...}</code> 这样分散的代码。</p></blockquote><p>用 <code>class </code>定义对象，继承可以直接通过 <code>extends</code> 来实现</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>PrimaryStudent</span> <span class=kr>extends</span> <span class=nx>Student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>grade</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>super</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// 记得用super调用父类的构造方法!
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>grade</span> <span class=o>=</span> <span class=nx>grade</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>myGrade</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;I am at grade &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>grade</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=骚皮操作>骚皮操作</h2><h3 id=-与->! 与 ？</h3><h4 id=-用法>! 用法</h4><ul><li>用在变量前表示取反</li><li>用在赋值的内容后时，使 null 和 undefined 类型可以赋值给其他类型并通过编译</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=kd>let</span> <span class=nx>y</span>:<span class=kt>number</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>y</span> <span class=o>=</span> <span class=kc>null</span>        <span class=c1>// 无法通过编译
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>y</span> <span class=o>=</span> <span class=kc>undefined</span>   <span class=c1>// 无法通过编译
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>y</span> <span class=o>=</span> <span class=kc>null</span><span class=o>!</span>
</span></span><span class=line><span class=cl><span class=nx>y</span> <span class=o>=</span> <span class=kc>undefined</span><span class=o>!</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=c1>// 由于x是可选的，因此parma.x的类型为number | undefined，无法传递给number类型的y，因此需要用x!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>interface</span> <span class=nx>IDemo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>x?</span>: <span class=kt>number</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>y</span>:<span class=kt>number</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>demo</span> <span class=o>=</span> <span class=p>(</span><span class=nx>parma</span>: <span class=kt>IDemo</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>y</span> <span class=o>=</span> <span class=nx>parma</span><span class=p>.</span><span class=nx>x</span><span class=o>!</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>y</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>如果存在空情况的判断并赋具体值时，可以不用 !，但是如果要想令 y 存在等于 undefined 的情况还是需要用!</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>IDemo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>x?</span>: <span class=kt>number</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>y</span>:<span class=kt>number</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>demo</span> <span class=o>=</span> <span class=p>(</span><span class=nx>parma</span>: <span class=kt>IDemo</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>y</span> <span class=o>=</span> <span class=nx>parma</span><span class=p>.</span><span class=nx>x</span> <span class=o>||</span> <span class=mi>1</span>    <span class=c1>// 如果为undefined，返回y=1，如果不为undefined，则返回parma.x的值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nx>y</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=-用法-1>? 用法</h4><ul><li>除了表示可选参数外</li><li>当使用 A 对象属性 A.B 时，如果无法确定 A 是否为空，则需要用 A?.B，表示当 A 有值的时候才去访问 B 属性，没有值的时候就不去访问，如果不使用?则会报错</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=c1>// 由于函数参数可选，因此parma无法确定是否拥有，所以无法正常使用parma.x，使用parma?.x向编译器假设此时parma不为空且为IDemo类型，同时parma?.x无法保证非空，因此使用parma?.x!来保证了整体通过编译
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>interface</span> <span class=nx>IDemo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>x</span>: <span class=kt>number</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>y</span>:<span class=kt>number</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>demo</span> <span class=o>=</span> <span class=p>(</span><span class=nx>parma?</span>: <span class=kt>IDemo</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>y</span> <span class=o>=</span> <span class=nx>parma</span><span class=o>?</span><span class=p>.</span><span class=nx>x</span><span class=o>!</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>parma</span><span class=o>?</span><span class=p>.</span><span class=nx>x</span><span class=p>)</span>   <span class=c1>// 只是单纯调用属性时就无需!    
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nx>y</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=c1>// 如果使用y = parma!.x!是会报错的，因为当parma为空时，是不拥有x属性的，会报找不到x的错误
</span></span></span></code></pre></td></tr></table></div></div><p>但是 ? 用法只能读操作而不能写操作，对一个可能为空的属性赋值是不会被编译通过的，此时还需用用到类型断言</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>IDemo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>x</span>: <span class=kt>number</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 编译报错，不能赋值给可选属性
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>demo</span> <span class=o>=</span> <span class=p>(</span><span class=nx>parma?</span>: <span class=kt>IDemo</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>parma</span><span class=o>?</span><span class=p>.</span><span class=nx>x</span> <span class=o>=</span> <span class=mi>1</span>    
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=c1>// 使用类型断言  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>demo</span> <span class=o>=</span> <span class=p>(</span><span class=nx>parma?</span>: <span class=kt>IDemo</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>_parma</span> <span class=o>=</span> <span class=nx>parma</span> <span class=kr>as</span> <span class=nx>IDemo</span>
</span></span><span class=line><span class=cl>    <span class=nx>_parma</span><span class=p>.</span><span class=nx>x</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=-用法-2>?? 用法</h4><p>空值合并操作符（<code>??</code>）是一个逻辑操作符，当左侧的操作数为 <code>null</code> 或者 <code>undefined</code> 时，返回其右侧操作数，否则返回左侧操作数。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2022-11-23 14:00:55">更新于 2022-11-23</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://trouvaille0198.github.io/Notes/posts/frontend/javascript/basicgrammar/ data-title="JavaScript 基本语法" data-hashtags=JavaScript,前端><i class="fa-brands fa-twitter fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://trouvaille0198.github.io/Notes/posts/frontend/javascript/basicgrammar/ data-hashtag=JavaScript><i class="fa-brands fa-facebook-square fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://trouvaille0198.github.io/Notes/posts/frontend/javascript/basicgrammar/ data-title="JavaScript 基本语法"><i class="fa-brands fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw"></i>&nbsp;<a href=/Notes/tags/javascript/>JavaScript</a>,&nbsp;<a href=/Notes/tags/%E5%89%8D%E7%AB%AF/>前端</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/Notes/>主页</a></span></section></div><div class=post-nav><a href=/Notes/posts/linux/useful/install/ class=prev rel=prev title="Linux 上的环境安装"><i class="fa-solid fa-angle-left fa-fw"></i>Linux 上的环境安装</a>
<a href=/Notes/posts/frontend/javascript/dom/ class=next rel=next title="JavaScript DOM">JavaScript DOM<i class="fa-solid fa-angle-right fa-fw"></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom">酒困路长惟欲睡，日高人渴漫思茶</div><div class="footer-line copyright"><i class="fa-regular fa-copyright fa-fw"></i>
<span itemprop=copyrightYear>2022</span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fa-solid fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fa-solid fa-comment fa-fw"></i></a></div><div id=mask></div></div><link rel=stylesheet href=/Notes/lib/katex/katex.min.css><link rel=stylesheet href=/Notes/lib/katex/copy-tex.min.css><link rel=stylesheet href=/Notes/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/Notes/lib/autocomplete/autocomplete.min.js defer></script><script type=text/javascript src=/Notes/lib/lunr/lunr.min.js defer></script><script type=text/javascript src=/Notes/lib/lunr/lunr.stemmer.support.min.js defer></script><script type=text/javascript src=/Notes/lib/lunr/lunr.zh.min.js defer></script><script type=text/javascript src=/Notes/lib/lazysizes/lazysizes.min.js async defer></script><script type=text/javascript src=/Notes/lib/sharer/sharer.min.js async defer></script><script type=text/javascript src=/Notes/lib/katex/katex.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/Notes/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:45},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/Notes/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/Notes/lib/lunr/lunr.segmentit.js",maxResultLength:30,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/Notes/js/theme.min.js defer></script><script type=text/javascript src=/Notes/js/_custom.min.js defer></script></body></html>