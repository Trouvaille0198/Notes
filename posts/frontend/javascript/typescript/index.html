<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>TypeScript 基本语法 - 伤心肠粉的酱油碟子</title><meta name=Description content><meta property="og:title" content="TypeScript 基本语法"><meta property="og:description" content="TypeScript 简介 认识 TypeScript 是一种给 JavaScript 添加特性的语言扩展。增加的功能包括： 类型批注和编译时类型检"><meta property="og:type" content="article"><meta property="og:url" content="https://trouvaille0198.github.io/Notes/posts/frontend/javascript/typescript/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-15T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-25T06:29:58+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="TypeScript 基本语法"><meta name=twitter:description content="TypeScript 简介 认识 TypeScript 是一种给 JavaScript 添加特性的语言扩展。增加的功能包括： 类型批注和编译时类型检"><meta name=application-name content="伤心肠粉的酱油碟子"><meta name=apple-mobile-web-app-title content="伤心肠粉的酱油碟子"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://trouvaille0198.github.io/Notes/posts/frontend/javascript/typescript/><link rel=prev href=https://trouvaille0198.github.io/Notes/posts/machinelearning/machinelearning/><link rel=next href=https://trouvaille0198.github.io/Notes/posts/linux/useful/screen/><link rel=stylesheet href=/Notes/lib/normalize/normalize.min.css><link rel=stylesheet href=/Notes/css/style.min.css><link rel=stylesheet href=/Notes/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/Notes/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"TypeScript 基本语法","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/frontend\/javascript\/typescript\/"},"genre":"posts","keywords":"TypeScript, JavaScript, 前端, 快速入门","wordcount":11523,"url":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/frontend\/javascript\/typescript\/","datePublished":"2021-12-15T00:00:00+00:00","dateModified":"2022-04-25T06:29:58+00:00","publisher":{"@type":"Organization","name":"MelonCholi"},"author":{"@type":"Person","name":"MelonCholi"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":''==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:''==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子>伤心肠粉</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/Notes/categories/>分类 </a><a class=menu-item href=/Notes/tags/>标签 </a><a class=menu-item href=/Notes/posts/>文章 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子>伤心肠粉</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/Notes/categories/ title>分类</a><a class=menu-item href=/Notes/tags/ title>标签</a><a class=menu-item href=/Notes/posts/ title>文章</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">TypeScript 基本语法</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/Notes/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>MelonCholi</a></span>&nbsp;<span class=post-category>收录于 <a href=/Notes/categories/%E5%89%8D%E7%AB%AF/><i class="far fa-folder fa-fw"></i>前端</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-12-15>2021-12-15</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 11523 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 23 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#简介>简介</a><ul><li><a href=#认识>认识</a></li><li><a href=#ts-与-js-的区别>TS 与 JS 的区别</a></li><li><a href=#安装>安装</a></li></ul></li><li><a href=#基础类型>基础类型</a><ul><li><a href=#布尔值-boolean>布尔值 boolean</a></li><li><a href=#数字-number>数字 number</a></li><li><a href=#字符串-string>字符串 string</a></li><li><a href=#数组-list>数组 list</a></li><li><a href=#元组-tuple>元组 tuple</a></li><li><a href=#枚举-enum>枚举 enum</a><ul><li><a href=#指定编号>指定编号</a></li><li><a href=#字符串枚举>字符串枚举</a></li></ul></li><li><a href=#任意值-any>任意值 any</a></li><li><a href=#unknown>unknown</a></li><li><a href=#空值-void>空值 void</a></li><li><a href=#null-和-undefined>Null 和 Undefined</a></li><li><a href=#never>never</a></li></ul></li><li><a href=#类型断言>类型断言</a><ul><li><a href=#尖括号-语法>“尖括号” 语法</a></li><li><a href=#as-语法>as 语法</a></li></ul></li><li><a href=#类型守卫>类型守卫</a><ul><li><a href=#in-关键字>in 关键字</a></li><li><a href=#typeof-关键字>typeof 关键字</a></li><li><a href=#instanceof-关键字>instanceof 关键字</a></li><li><a href=#自定义类型保护的类型谓词>自定义类型保护的类型谓词</a></li></ul></li><li><a href=#接口-interface>接口 interface</a><ul><li><a href=#可选属性>可选属性</a></li><li><a href=#只读属性>只读属性</a></li><li><a href=#额外的属性检查>额外的属性检查</a></li><li><a href=#函数类型>函数类型</a></li><li><a href=#可索引的类型>可索引的类型</a></li><li><a href=#类类型>类类型</a><ul><li><a href=#实现接口>实现接口</a></li></ul></li></ul></li><li><a href=#联合类型和类型别名>联合类型和类型别名</a><ul><li><a href=#联合类型>联合类型</a></li><li><a href=#可辨识联合>可辨识联合</a><ul><li><a href=#可辨识>可辨识</a></li><li><a href=#联合类型-1>联合类型</a></li><li><a href=#类型守卫-1>类型守卫</a></li></ul></li><li><a href=#类型别名>类型别名</a></li><li><a href=#交叉类型>交叉类型</a></li></ul></li><li><a href=#函数>函数</a><ul><li><a href=#与-js-函数的区别>与 JS 函数的区别</a></li><li><a href=#箭头函数>箭头函数</a><ul><li><a href=#常见语法>常见语法</a></li><li><a href=#使用示例>使用示例</a></li></ul></li><li><a href=#参数类型和返回类型>参数类型和返回类型</a></li><li><a href=#函数类型-1>函数类型</a></li><li><a href=#可选参数及默认参数>可选参数及默认参数</a></li><li><a href=#剩余参数>剩余参数</a></li><li><a href=#函数重载>函数重载</a></li></ul></li><li><a href=#数组>数组</a><ul><li><a href=#数组解构>数组解构</a></li><li><a href=#数组展开运算符>数组展开运算符</a></li><li><a href=#数组遍历>数组遍历</a></li></ul></li><li><a href=#对象>对象</a><ul><li><a href=#对象解构>对象解构</a></li><li><a href=#对象运算符>对象运算符</a></li></ul></li><li><a href=#类>类</a><ul><li><a href=#访问器>访问器</a></li><li><a href=#继承>继承</a></li><li><a href=#ecmascript-私有字段>ECMAScript 私有字段</a></li></ul></li><li><a href=#泛型>泛型</a><ul><li><a href=#泛型接口>泛型接口</a></li><li><a href=#泛型类>泛型类</a></li><li><a href=#范型变量>范型变量</a></li><li><a href=#泛型工具类型>泛型工具类型</a><ul><li><a href=#typeof>typeof</a></li><li><a href=#keyof>keyof</a></li><li><a href=#in>in</a></li><li><a href=#infer>infer</a></li><li><a href=#extends>extends</a></li><li><a href=#partial>Partial</a></li></ul></li></ul></li><li><a href=#装饰器>装饰器</a><ul><li><a href=#类装饰器>类装饰器</a></li><li><a href=#属性装饰器>属性装饰器</a></li><li><a href=#方法装饰器>方法装饰器</a></li><li><a href=#参数装饰器>参数装饰器</a></li></ul></li><li><a href=#编译上下文>编译上下文</a><ul><li><a href=#tsconfigjson-的作用>tsconfig.json 的作用</a></li><li><a href=#tsconfigjson-重要字段>tsconfig.json 重要字段</a></li><li><a href=#compileroptions-选项>compilerOptions 选项</a></li></ul></li><li><a href=#与-vue3-的结合>与 Vue3 的结合</a><ul><li><a href=#ref-的类型声明>ref 的类型声明</a></li><li><a href=#reactive-的类型声明>reactive 的类型声明</a></li><li><a href=#自定义-hooks>自定义 hooks</a></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=typescript>TypeScript</h1><h2 id=简介>简介</h2><h3 id=认识>认识</h3><p>TypeScript 是一种给 JavaScript 添加特性的语言扩展。增加的功能包括：</p><ul><li>类型批注和编译时类型检查</li><li>类型推断</li><li>类型擦除</li><li>接口</li><li>枚举</li><li>Mixin</li><li>泛型编程</li><li>名字空间</li><li>元组</li><li>Await</li></ul><p>TypeScript 作为 JavaScript 的超集，他在拥有 JavaScript 所有能力的基础上，做到了静态类型，这解决了 JavaScript 编写不规范会导致的很多问题，虽然它依旧是弱类型语言，但它在变量进行类型隐式转换时也做了限制，让它在编写的过程中可以更加规范。而不规范的地方，会直接报错来提醒开发者。</p><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-1.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-1.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-1.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-1.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-1.png title=img></p><p>TypeScript 的类型推导是基于上下文类型推导（Contextual Typing）的。所以即便你不添加任何类型，编译器也会根据编写的代码，推导出变量或函数的类型，当无法推导出的时候，TypeScript 则将其设置为<code>any</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>hello</span> : <span class=kt>string</span> <span class=o>=</span> <span class=s2>&#34;Hello World!&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>hello</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ts-与-js-的区别>TS 与 JS 的区别</h3><table><thead><tr><th>TypeScript</th><th>JavaScript</th></tr></thead><tbody><tr><td>JavaScript 的超集用于解决大型项目的代码复杂性</td><td>一种脚本语言，用于创建动态网页。</td></tr><tr><td>可以在编译期间发现并纠正错误</td><td>作为一种解释型语言，只能在运行时发现错误</td></tr><tr><td>强类型，支持静态和动态类型</td><td>弱类型，没有静态类型选项</td></tr><tr><td>最终被编译成 JavaScript 代码，使浏览器可以理解</td><td>可以直接在浏览器中使用</td></tr><tr><td>支持模块、泛型和接口</td><td>不支持模块，泛型或接口</td></tr><tr><td>支持 ES3，ES4，ES5 和 ES6 等</td><td>不支持编译其他 ES3，ES4，ES5 或 ES6 功能</td></tr><tr><td>社区的支持仍在增长，而且还不是很大</td><td>大量的社区支持以及大量文档和解决问题的支持</td></tr></tbody></table><h3 id=安装>安装</h3><p>针对使用 npm 的用户：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>npm install -g typescript
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl>npm i -g typescript
</span></span></code></pre></td></tr></table></div></div><p>使用命令来执行 ts 代码：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>tsc file1.ts
</span></span><span class=line><span class=cl>node file.js
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-3.png data-srcset="https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-3.png, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-3.png 1.5x, https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-3.png 2x" data-sizes=auto alt=https://markdown-1303167219.cos.ap-shanghai.myqcloud.com/ts-2020-11-26-3.png title=img></p><p>简化执行步骤</p><p>安装 ts-node</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>npm i -g ts-node
</span></span></code></pre></td></tr></table></div></div><p>执行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ts-node f
</span></span></code></pre></td></tr></table></div></div><h2 id=基础类型>基础类型</h2><p>我们使用 <code>let</code> 关键字来代替大家所熟悉的 JavaScript 关键字 <code>var</code>。 <code>let</code> 关键字是 JavaScript 的一个新概念，TypeScript 实现了它。很多常见的问题都可以通过使用 <code>let</code> 来解决，所以尽可能地使用 <code>let</code> 来代替 <code>var</code> 吧。</p><h3 id=布尔值-boolean>布尔值 boolean</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>isDone</span>: <span class=kt>boolean</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=数字-number>数字 number</h3><p>和 JavaScript 一样，TypeScript 里的所有数字都是浮点数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>decLiteral</span>: <span class=kt>number</span> <span class=o>=</span> <span class=mi>6</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>hexLiteral</span>: <span class=kt>number</span> <span class=o>=</span> <span class=mh>0xf00d</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>binaryLiteral</span>: <span class=kt>number</span> <span class=o>=</span> <span class=mi>0</span><span class=nx>b1010</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>octalLiteral</span>: <span class=kt>number</span> <span class=o>=</span> <span class=mi>0</span><span class=nx>o744</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=字符串-string>字符串 string</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>name</span>: <span class=kt>string</span> <span class=o>=</span> <span class=s2>&#34;bob&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;smith&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=数组-list>数组 list</h3><p>两种方式可以定义数组。 第一种，可以在元素类型后面接上 <code>[]</code>，表示由此类型元素组成的一个数组：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>list</span>: <span class=kt>number</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>];</span>
</span></span></code></pre></td></tr></table></div></div><p>第二种方式是使用数组泛型，<code>Array&lt;元素类型></code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>list</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>number</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>];</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=元组-tuple>元组 tuple</h3><p>元组类型允许表示一个<strong>已知元素数量和类型</strong>的数组（各元素的类型不必相同）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// Declare a tuple type
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>x</span><span class=o>:</span> <span class=p>[</span><span class=kt>string</span><span class=p>,</span> <span class=kt>number</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=c1>// Initialize it
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>x</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;hello&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>];</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1>// Initialize it incorrectly
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>x</span> <span class=o>=</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=s1>&#39;hello&#39;</span><span class=p>];</span> <span class=c1>// Error
</span></span></span></code></pre></td></tr></table></div></div><p>当访问一个已知索引的元素，会得到正确的类型：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>x</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>substr</span><span class=p>(</span><span class=mi>1</span><span class=p>));</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>x</span><span class=p>[</span><span class=mi>1</span><span class=p>].</span><span class=nx>substr</span><span class=p>(</span><span class=mi>1</span><span class=p>));</span> <span class=c1>// Error, &#39;number&#39; does not have &#39;substr&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>当访问一个<strong>越界</strong>的元素，会使用<strong>联合类型</strong>替代：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>x</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;world&#39;</span><span class=p>;</span> <span class=c1>// OK, 字符串可以赋值给(string | number)类型
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>x</span><span class=p>[</span><span class=mi>5</span><span class=p>].</span><span class=nx>toString</span><span class=p>());</span> <span class=c1>// OK, &#39;string&#39; 和 &#39;number&#39; 都有 toString
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>x</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span> <span class=c1>// Error, 布尔不是(string | number)类型
</span></span></span></code></pre></td></tr></table></div></div><h3 id=枚举-enum>枚举 enum</h3><p><code>enum</code> 类型是对 JavaScript 标准数据类型的一个补充，使用枚举类型可以为一组数值赋予友好的名字。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>enum</span> <span class=nx>Color</span> <span class=p>{</span><span class=nx>Red</span><span class=p>,</span> <span class=nx>Green</span><span class=p>,</span> <span class=nx>Blue</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>c</span>: <span class=kt>Color</span> <span class=o>=</span> <span class=nx>Color</span><span class=p>.</span><span class=nx>Green</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=指定编号>指定编号</h4><p>默认情况下，从 <code>0</code> 开始为元素编号。 你也可以手动的指定成员的数值。 例如，我们将上面的例子改成从 <code>1</code> 开始编号：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>enum</span> <span class=nx>Color</span> <span class=p>{</span><span class=nx>Red</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>Green</span><span class=p>,</span> <span class=nx>Blue</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>c</span>: <span class=kt>Color</span> <span class=o>=</span> <span class=nx>Color</span><span class=p>.</span><span class=nx>Green</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 或者，全部都采用手动赋值：
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>enum</span> <span class=nx>Color</span> <span class=p>{</span><span class=nx>Red</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>Green</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=nx>Blue</span> <span class=o>=</span> <span class=mi>4</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>c</span>: <span class=kt>Color</span> <span class=o>=</span> <span class=nx>Color</span><span class=p>.</span><span class=nx>Green</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=字符串枚举>字符串枚举</h4><p>在 TypeScript 2.4 版本，允许我们使用字符串枚举。</p><p>在一个字符串枚举里，每个成员都必须用字符串字面量，或另外一个字符串枚举成员进行初始化。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>enum</span> <span class=nx>Direction</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>NORTH</span> <span class=o>=</span> <span class=s2>&#34;NORTH&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>SOUTH</span> <span class=o>=</span> <span class=s2>&#34;SOUTH&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>EAST</span> <span class=o>=</span> <span class=s2>&#34;EAST&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>WEST</span> <span class=o>=</span> <span class=s2>&#34;WEST&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=任意值-any>任意值 any</h3><p>有时候，我们会想要为那些在编程阶段还不清楚类型的变量指定一个类型。</p><p>这种情况下，我们不希望类型检查器对这些值进行检查。 那么我们可以使用 <code>any</code> 类型来标记这些变量：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>notSure</span>: <span class=kt>any</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>notSure</span> <span class=o>=</span> <span class=s2>&#34;maybe a string instead&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>notSure</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span> <span class=c1>// okay, definitely a boolean
</span></span></span></code></pre></td></tr></table></div></div><p>在 TypeScript 中，任何类型都可以被归为 any 类型。这让 any 类型成为了类型系统的<strong>顶级类型</strong>（也被称作全局超级类型）。</p><p><code>any</code> 类型本质上是类型系统的一个逃逸舱。作为开发者，这给了我们很大的自由：TypeScript 允许我们对 <code>any</code> 类型的值执行任何操作，而无需事先执行任何形式的检查。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>value</span>: <span class=kt>any</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>value</span><span class=p>.</span><span class=nx>foo</span><span class=p>.</span><span class=nx>bar</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span><span class=p>.</span><span class=nx>trim</span><span class=p>();</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span><span class=p>();</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>new</span> <span class=nx>value</span><span class=p>();</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>];</span> <span class=c1>// OK
</span></span></span></code></pre></td></tr></table></div></div><p>在许多场景下，这太宽松了。使用 <code>any</code> 类型，可以很容易地编写类型正确但在运行时有问题的代码。如果我们使用 <code>any</code> 类型，就无法使用 TypeScript 提供的大量的保护机制。为了解决 <code>any</code> 带来的问题，TypeScript 3.0 引入了 <code>unknown</code> 类型。</p><p>当你只知道一部分数据的类型时，<code>any</code>类型也是有用的。 比如，你有一个数组，它包含了不同的类型的数据：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>list</span>: <span class=kt>any</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&#34;free&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>list</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=unknown>unknown</h3><p>就像所有类型都可以赋值给 <code>any</code>，所有类型也都可以赋值给 <code>unknown</code>。这使得 <code>unknown</code> 成为 TypeScript 类型系统的另一种顶级类型（另一种是 <code>any</code>）。</p><p>对 <code>value</code> 变量的所有赋值都被认为是类型正确的：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>value</span>: <span class=kt>unknown</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>value</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span> <span class=o>=</span> <span class=mi>42</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span> <span class=o>=</span> <span class=s2>&#34;Hello World&#34;</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span> <span class=o>=</span> <span class=p>[];</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span> <span class=o>=</span> <span class=p>{};</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span> <span class=o>=</span> <span class=kc>undefined</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>TypeError</span><span class=p>();</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span> <span class=o>=</span> <span class=nx>Symbol</span><span class=p>(</span><span class=s2>&#34;type&#34;</span><span class=p>);</span> <span class=c1>// OK
</span></span></span></code></pre></td></tr></table></div></div><p><code>unknown</code> 类型只能被赋值给 <code>any</code> 类型和 <code>unknown</code> 类型本身：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>value</span>: <span class=kt>unknown</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>value1</span>: <span class=kt>unknown</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>value2</span>: <span class=kt>any</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>value3</span>: <span class=kt>boolean</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span> <span class=c1>// Error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>value4</span>: <span class=kt>number</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span> <span class=c1>// Error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>value5</span>: <span class=kt>string</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span> <span class=c1>// Error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>value6</span>: <span class=kt>object</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span> <span class=c1>// Error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>value7</span>: <span class=kt>any</span><span class=p>[]</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span> <span class=c1>// Error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>value8</span>: <span class=kt>Function</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span> <span class=c1>// Error
</span></span></span></code></pre></td></tr></table></div></div><p>对类型为 <code>unknown</code> 的值执行操作是非法的：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>value</span>: <span class=kt>unknown</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>value</span><span class=p>.</span><span class=nx>foo</span><span class=p>.</span><span class=nx>bar</span><span class=p>;</span> <span class=c1>// Error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span><span class=p>.</span><span class=nx>trim</span><span class=p>();</span> <span class=c1>// Error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span><span class=p>();</span> <span class=c1>// Error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>new</span> <span class=nx>value</span><span class=p>();</span> <span class=c1>// Error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>value</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>];</span> <span class=c1>// Error
</span></span></span></code></pre></td></tr></table></div></div><p>通过将 <code>any</code> 类型改变为 <code>unknown</code> 类型，我们已将允许所有更改的默认设置，更改为禁止任何更改。</p><h3 id=空值-void>空值 void</h3><p>某种程度上来说，<code>void</code> 类型像是与 <code>any</code> 类型相反，它表示没有任何类型。 当一个函数没有返回值时，你通常会见到其返回值类型是 <code>void</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>warnUser</span><span class=p>()</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s2>&#34;This is my warning message&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>声明一个<code>void</code>类型的变量没有什么大用，因为你只能为它赋予<code>undefined</code>和<code>null</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>unusable</span>: <span class=kt>void</span> <span class=o>=</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=null-和-undefined>Null 和 Undefined</h3><p>TypeScript 里，<code>undefined</code> 和 <code>null</code> 两者各自有自己的类型分别叫做 <code>undefined</code> 和 <code>null</code>。</p><p>和 <code>void</code> 相似，它们的本身的类型用处不是很大&mldr;</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// Not much else we can assign to these variables!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>u</span>: <span class=kt>undefined</span> <span class=o>=</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>n</span>: <span class=kt>null</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>默认情况下 <code>null</code> 和 <code>undefined</code> 是所有类型的子类型。 就是说你可以把他们赋值给 <code>number</code> 类型的变量</p><p>然而，当你指定了 <code>--strictNullChecks</code> 标记，<code>null</code> 和 <code>undefined</code>只能赋值给 <code>void</code> 和它们各自。 这能避免<strong>很多</strong>常见的问题。</p><p>也许在某处你想传入一个 <code>string</code> 或 <code>null</code> 或 <code>undefined</code>，你可以使用联合类型 <code>string | null | undefined</code>。</p><h3 id=never>never</h3><p><code>never</code> 类型表示的是那些永不存在的值的类型</p><p>例如，<code>never</code> 类型是那些总是会抛出异常或根本就不会有返回值的函数表达式或箭头函数表达式的返回值类型</p><p>变量也可能是 <code>never</code> 类型，当它们被永不为真的类型保护所约束时。</p><p><code>never</code> 类型是任何类型的子类型，也可以赋值给任何类型</p><p>然而，没有类型是 <code>never</code> 的子类型或可以赋值给 <code>never</code> 类型（除了 <code>never</code> 本身之外）。 即使 <code>any</code> 也不可以赋值给 <code>never</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// 返回never的函数必须存在无法达到的终点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>error</span><span class=p>(</span><span class=nx>message</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=kt>never</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 推断的返回值类型为never
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>fail() {</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>error</span><span class=p>(</span><span class=s2>&#34;Something failed&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 返回never的函数必须存在无法达到的终点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>infiniteLoop</span><span class=p>()</span><span class=o>:</span> <span class=kt>never</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=kc>true</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=类型断言>类型断言</h2><p>有时候你会遇到这样的情况，你会比 TypeScript 更了解某个值的详细信息。通常这会发生在你清楚地知道一个实体具有比它现有类型更确切的类型时</p><p>通过类型断言这种方式可以告诉编译器，“相信我，我知道自己在干什么”。类型断言好比其他语言里的类型转换，但是不进行特殊的数据检查和解构。它没有运行时的影响，只是在编译阶段起作用。</p><p>类型断言有两种形式</p><h3 id=尖括号-语法>“尖括号” 语法</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>someValue</span>: <span class=kt>any</span> <span class=o>=</span> <span class=s2>&#34;this is a string&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>strLength</span>: <span class=kt>number</span> <span class=o>=</span> <span class=p>(&lt;</span><span class=nt>string</span><span class=p>&gt;</span><span class=nx>someValue</span><span class=p>).</span><span class=nx>length</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=as-语法>as 语法</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>someValue</span>: <span class=kt>any</span> <span class=o>=</span> <span class=s2>&#34;this is a string&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>strLength</span>: <span class=kt>number</span> <span class=o>=</span> <span class=p>(</span><span class=nx>someValue</span> <span class=kr>as</span> <span class=kt>string</span><span class=p>).</span><span class=nx>length</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=类型守卫>类型守卫</h2><blockquote><p>A type guard is some expression that performs a runtime check that guarantees the type in some scope.</p></blockquote><p>类型保护是可执行运行时检查的一种表达式，用于确保该类型在一定的范围内。</p><p>换句话说，类型保护可以保证一个字符串是一个字符串，尽管它的值也可以是一个数值。</p><p>类型保护与特性检测并不是完全不同，其主要思想是尝试检测属性、方法或原型，以确定如何处理值。目前主要有四种的方式来实现类型保护：</p><h3 id=in-关键字>in 关键字</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Admin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>privileges</span>: <span class=kt>string</span><span class=p>[];</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Employee</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>startDate</span>: <span class=kt>Date</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>UnknownEmployee</span> <span class=o>=</span> <span class=nx>Employee</span> <span class=o>|</span> <span class=nx>Admin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>printEmployeeInformation</span><span class=p>(</span><span class=nx>emp</span>: <span class=kt>UnknownEmployee</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Name: &#34;</span> <span class=o>+</span> <span class=nx>emp</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=s2>&#34;privileges&#34;</span> <span class=k>in</span> <span class=nx>emp</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Privileges: &#34;</span> <span class=o>+</span> <span class=nx>emp</span><span class=p>.</span><span class=nx>privileges</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=s2>&#34;startDate&#34;</span> <span class=k>in</span> <span class=nx>emp</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Start Date: &#34;</span> <span class=o>+</span> <span class=nx>emp</span><span class=p>.</span><span class=nx>startDate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=typeof-关键字>typeof 关键字</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>padLeft</span><span class=p>(</span><span class=nx>value</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>padding</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kt>number</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>padding</span> <span class=o>===</span> <span class=s2>&#34;number&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nb>Array</span><span class=p>(</span><span class=nx>padding</span> <span class=o>+</span> <span class=mi>1</span><span class=p>).</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>)</span> <span class=o>+</span> <span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>padding</span> <span class=o>===</span> <span class=s2>&#34;string&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>padding</span> <span class=o>+</span> <span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`Expected string or number, got &#39;</span><span class=si>${</span><span class=nx>padding</span><span class=si>}</span><span class=sb>&#39;.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><code>typeof</code> 类型保护只支持两种形式：<code>typeof v === "typename"</code> 和 <code>typeof v !== typename</code>；</p><p><code>"typename"</code> 必须是 <code>"number"</code>， <code>"string"</code>， <code>"boolean"</code> 或 <code>"symbol"</code>。 但是 TypeScript 并不会阻止你与其它字符串比较，语言不会把那些表达式识别为类型保护。</p><h3 id=instanceof-关键字>instanceof 关键字</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Padder</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>getPaddingString</span><span class=p>()</span><span class=o>:</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>SpaceRepeatingPadder</span> <span class=kr>implements</span> <span class=nx>Padder</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>numSpaces</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=nx>getPaddingString() {</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>Array</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>numSpaces</span> <span class=o>+</span> <span class=mi>1</span><span class=p>).</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>StringPadder</span> <span class=kr>implements</span> <span class=nx>Padder</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>value</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=nx>getPaddingString() {</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>padder</span>: <span class=kt>Padder</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>SpaceRepeatingPadder</span><span class=p>(</span><span class=mi>6</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>padder</span> <span class=k>instanceof</span> <span class=nx>SpaceRepeatingPadder</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// padder的类型收窄为 &#39;SpaceRepeatingPadder&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=自定义类型保护的类型谓词>自定义类型保护的类型谓词</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>isNumber</span><span class=p>(</span><span class=nx>x</span>: <span class=kt>any</span><span class=p>)</span><span class=o>:</span> <span class=nx>x</span> <span class=k>is</span> <span class=kt>number</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>typeof</span> <span class=nx>x</span> <span class=o>===</span> <span class=s2>&#34;number&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>isString</span><span class=p>(</span><span class=nx>x</span>: <span class=kt>any</span><span class=p>)</span><span class=o>:</span> <span class=nx>x</span> <span class=k>is</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>typeof</span> <span class=nx>x</span> <span class=o>===</span> <span class=s2>&#34;string&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=接口-interface>接口 interface</h2><p>TypeScript 的核心原则之一是对值所具有的<em>结构</em>进行类型检查。 它有时被称做“鸭式辨型法”或“结构性子类型化”。</p><p>在 TypeScript 里，接口的作用就是为这些类型命名和为你的代码或第三方代码定义契约。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>LabelledValue</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>label</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>printLabel</span><span class=p>(</span><span class=nx>labelledObj</span>: <span class=kt>LabelledValue</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>labelledObj</span><span class=p>.</span><span class=nx>label</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myObj</span> <span class=o>=</span> <span class=p>{</span><span class=nx>size</span>: <span class=kt>10</span><span class=p>,</span> <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;Size 10 Object&#34;</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>printLabel</span><span class=p>(</span><span class=nx>myObj</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p><code>LabelledValue</code> 接口就好比一个名字，用来描述上面例子里的要求。 它代表了有一个 <code>label</code> 属性且类型为<code>string</code> 的对象，上述代码等同于：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>printLabel</span><span class=p>(</span><span class=nx>labelledObj</span><span class=o>:</span> <span class=p>{</span> <span class=nx>label</span>: <span class=kt>string</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>labelledObj</span><span class=p>.</span><span class=nx>label</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myObj</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>size</span>: <span class=kt>10</span><span class=p>,</span> <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;Size 10 Object&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>printLabel</span><span class=p>(</span><span class=nx>myObj</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>编译器只会检查那些<strong>必需</strong>的属性是否存在，并且其类型是否匹配。</p><p>类型检查器不会去检查属性的<strong>顺序</strong>，只要相应的属性存在并且类型也是对的就可以。</p></blockquote><h3 id=可选属性>可选属性</h3><p>接口里的属性不全都是必需的。 有些是只在某些条件下存在，或者根本不存在。</p><p>可选属性在应用“option bags”模式时很常用，即给函数传入的参数对象中只有部分属性赋值了。</p><p>在可选属性名字定义的后面加一个 <code>?</code> 符号</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>SquareConfig</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>color?</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>width?</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>createSquare</span><span class=p>(</span><span class=nx>config</span>: <span class=kt>SquareConfig</span><span class=p>)</span><span class=o>:</span> <span class=p>{</span><span class=nx>color</span>: <span class=kt>string</span><span class=p>;</span> <span class=nx>area</span>: <span class=kt>number</span><span class=p>}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>newSquare</span> <span class=o>=</span> <span class=p>{</span><span class=nx>color</span><span class=o>:</span> <span class=s2>&#34;white&#34;</span><span class=p>,</span> <span class=nx>area</span>: <span class=kt>100</span><span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>config</span><span class=p>.</span><span class=nx>color</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>newSquare</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=nx>config</span><span class=p>.</span><span class=nx>color</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>config</span><span class=p>.</span><span class=nx>width</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>newSquare</span><span class=p>.</span><span class=nx>area</span> <span class=o>=</span> <span class=nx>config</span><span class=p>.</span><span class=nx>width</span> <span class=o>*</span> <span class=nx>config</span><span class=p>.</span><span class=nx>width</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>newSquare</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>mySquare</span> <span class=o>=</span> <span class=nx>createSquare</span><span class=p>({</span><span class=nx>color</span><span class=o>:</span> <span class=s2>&#34;black&#34;</span><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=只读属性>只读属性</h3><p>一些对象属性只能在对象刚刚创建的时候修改其值。 可以在属性名前用 <code>readonly</code> 来指定只读属性</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>readonly</span> <span class=nx>x</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>readonly</span> <span class=nx>y</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>p1</span>: <span class=kt>Point</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>x</span>: <span class=kt>10</span><span class=p>,</span> <span class=nx>y</span>: <span class=kt>20</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>p1</span><span class=p>.</span><span class=nx>x</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span> <span class=c1>// error!
</span></span></span></code></pre></td></tr></table></div></div><p>TypeScript 具有 <code>ReadonlyArray&lt;T></code> 类型，它与 <code>Array&lt;T></code> 相似，只是把所有可变方法去掉了，因此可以确保数组创建后再也不能被修改：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>a</span>: <span class=kt>number</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>ro</span>: <span class=kt>ReadonlyArray</span><span class=p>&lt;</span><span class=nt>number</span><span class=p>&gt;</span> <span class=o>=</span> <span class=nx>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>ro</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>12</span><span class=p>;</span> <span class=c1>// error!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>ro</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span> <span class=c1>// error!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>ro</span><span class=p>.</span><span class=nx>length</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span> <span class=c1>// error!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>a</span> <span class=o>=</span> <span class=nx>ro</span><span class=p>;</span> <span class=c1>// error!
</span></span></span></code></pre></td></tr></table></div></div><p><code>ReadonlyArray</code> 不可赋值。要做到这点，可以用类型断言重写：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>a</span> <span class=o>=</span> <span class=nx>ro</span> <span class=kr>as</span> <span class=kt>number</span><span class=p>[];</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>最简单判断该用 <code>readonly</code> 还是 <code>const</code> 的方法是看要把它做为变量使用还是做为一个属性。 做为变量使用的话用 <code>const</code>，若做为属性则使用 <code>readonly</code>。</p></blockquote><h3 id=额外的属性检查>额外的属性检查</h3><p>对象字面量会被特殊对待而且会经过额外属性检查，当将它们赋值给变量或作为参数传递的时候。</p><p>如果一个对象字面量存在任何“目标类型”<strong>不包含</strong>的属性时，你会得到一个错误：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>SquareConfig</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>color?</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>width?</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>createSquare</span><span class=p>(</span><span class=nx>config</span>: <span class=kt>SquareConfig</span><span class=p>)</span><span class=o>:</span> <span class=p>{</span> <span class=nx>color</span>: <span class=kt>string</span><span class=p>;</span> <span class=nx>area</span>: <span class=kt>number</span> <span class=p>}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// error: &#39;colour&#39; not expected in type &#39;SquareConfig&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>mySquare</span> <span class=o>=</span> <span class=nx>createSquare</span><span class=p>({</span> <span class=nx>colour</span><span class=o>:</span> <span class=s2>&#34;red&#34;</span><span class=p>,</span> <span class=nx>width</span>: <span class=kt>100</span> <span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>要绕开这些检查， 最简便的方法是使用<strong>类型断言</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>mySquare</span> <span class=o>=</span> <span class=nx>createSquare</span><span class=p>({</span> <span class=nx>width</span>: <span class=kt>100</span><span class=p>,</span> <span class=nx>opacity</span>: <span class=kt>0.5</span> <span class=p>}</span> <span class=kr>as</span> <span class=nx>SquareConfig</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>但最佳的方式是能够添加一个<strong>字符串索引签名</strong>（前提是你能够确定这个对象可能具有某些做为特殊用途使用的额外属性）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>SquareConfig</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>color?</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>width?</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>propName</span>: <span class=kt>string</span><span class=p>]</span><span class=o>:</span> <span class=kt>any</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>还有最后一种跳过这些检查的方式，这可能会让你感到惊讶，它就是<strong>将这个对象赋值给一个另一个变量</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>squareOptions</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>colour</span><span class=o>:</span> <span class=s2>&#34;red&#34;</span><span class=p>,</span> <span class=nx>width</span>: <span class=kt>100</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>mySquare</span> <span class=o>=</span> <span class=nx>createSquare</span><span class=p>(</span><span class=nx>squareOptions</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>因为 <code>squareOptions</code> 不会经过额外属性检查，所以编译器不会报错</p><blockquote><p>要留意，在像上面一样的简单代码里，你可能不应该去绕开这些检查。</p></blockquote><h3 id=函数类型>函数类型</h3><p>除了描述带有属性的<strong>普通对象</strong>外，接口也可以描述<strong>函数类型</strong></p><p>为了使用接口表示函数类型，我们需要给接口定义一个<strong>调用签名</strong>。 它就像是一个只有参数列表和返回值类型的函数定义。参数列表里的每个参数都需要名字和类型。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>SearchFunc</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nx>source</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>subString</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=kr>boolean</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>mySearch</span>: <span class=kt>SearchFunc</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>mySearch</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>source</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>subString</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>source</span><span class=p>.</span><span class=nx>search</span><span class=p>(</span><span class=nx>subString</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>result</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>对于函数类型的类型检查来说，函数的参数名不需要与接口里定义的名字相匹配：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>mySearch</span>: <span class=kt>SearchFunc</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>mySearch</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>src</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>sub</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=kr>boolean</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>src</span><span class=p>.</span><span class=nx>search</span><span class=p>(</span><span class=nx>sub</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>result</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>函数的参数会<strong>逐个</strong>进行检查，要求对应位置上的参数类型是兼容的</p><p>如果你不想指定类型，TypeScript 的类型系统会推断出参数类型，因为函数直接赋值给了 <code>SearchFunc</code> 类型变量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>mySearch</span>: <span class=kt>SearchFunc</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>mySearch</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>src</span><span class=p>,</span> <span class=nx>sub</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>src</span><span class=p>.</span><span class=nx>search</span><span class=p>(</span><span class=nx>sub</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>result</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=可索引的类型>可索引的类型</h3><p>与使用接口描述函数类型差不多，我们也可以描述那些能够“通过索引得到”的类型，比如 <code>a[10]</code> 或 <code>ageMap["daniel"]</code></p><p>可索引类型具有一个<strong>索引签名</strong>，它描述了对象<strong>索引的类型</strong>，还有相应的索引<strong>返回值类型</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>StringArray</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=nx>index</span>: <span class=kt>number</span><span class=p>]</span><span class=o>:</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myArray</span>: <span class=kt>StringArray</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>myArray</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;Bob&#34;</span><span class=p>,</span> <span class=s2>&#34;Fred&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myStr</span>: <span class=kt>string</span> <span class=o>=</span> <span class=nx>myArray</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span></code></pre></td></tr></table></div></div><p>共有支持两种索引签名：字符串和数字</p><p>可以同时使用两种类型的索引，但是数字索引的返回值必须是字符串索引返回值类型的<strong>子类型</strong>。 这是因为当使用 <code>number</code> 来索引时，JavaScript 会将它转换成 <code>string</code> 然后再去索引对象。 也就是说用 <code>100</code>（一个 <code>number</code>）去索引等同于使用 <code>"100"</code>（一个 <code>string</code>）去索引，因此两者需要保持一致。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Dog</span> <span class=kr>extends</span> <span class=nx>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>breed</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 错误：使用&#39;string&#39;索引，有时会得到Animal!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>interface</span> <span class=nx>NotOkay</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>x</span>: <span class=kt>number</span><span class=p>]</span><span class=o>:</span> <span class=nx>Animal</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>x</span>: <span class=kt>string</span><span class=p>]</span><span class=o>:</span> <span class=nx>Dog</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>字符串索引签名能够很好的描述 <code>dictionary</code> 模式，并且它们也会确保所有属性与其返回值类型相匹配，因为字符串索引声明了 <code>obj.property</code> 和 <code>obj["property"]</code> 两种形式都可以</p><p>下面的例子里，<code>name</code> 的类型与字符串索引类型不匹配，所以类型检查器给出一个错误提示：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>NumberDictionary</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=nx>index</span>: <span class=kt>string</span><span class=p>]</span><span class=o>:</span> <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>length</span>: <span class=kt>number</span><span class=p>;</span>    <span class=c1>// 可以，length是number类型
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>name</span>: <span class=kt>string</span>       <span class=c1>// 错误，`name`的类型与索引类型返回值的类型不匹配
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>可以将索引签名设置为只读，这样就防止了给索引赋值：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>ReadonlyStringArray</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>readonly</span> <span class=p>[</span><span class=nx>index</span>: <span class=kt>number</span><span class=p>]</span><span class=o>:</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myArray</span>: <span class=kt>ReadonlyStringArray</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;Alice&#34;</span><span class=p>,</span> <span class=s2>&#34;Bob&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>myArray</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;Mallory&#34;</span><span class=p>;</span> <span class=c1>// error!
</span></span></span></code></pre></td></tr></table></div></div><h3 id=类类型>类类型</h3><h4 id=实现接口>实现接口</h4><p>与 C# 或 Java 里接口的基本作用一样，TypeScript 也能够用它来明确的强制一个类去符合某种契约。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>ClockInterface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>currentTime</span>: <span class=kt>Date</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Clock</span> <span class=kr>implements</span> <span class=nx>ClockInterface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>currentTime</span>: <span class=kt>Date</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>constructor</span><span class=p>(</span><span class=nx>h</span>: <span class=kt>number</span><span class=p>,</span> <span class=nx>m</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>可以<strong>在接口中描述一个方法</strong>，在类里实现它：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>ClockInterface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>currentTime</span>: <span class=kt>Date</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>setTime</span><span class=p>(</span><span class=nx>d</span>: <span class=kt>Date</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Clock</span> <span class=kr>implements</span> <span class=nx>ClockInterface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>currentTime</span>: <span class=kt>Date</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>setTime</span><span class=p>(</span><span class=nx>d</span>: <span class=kt>Date</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>currentTime</span> <span class=o>=</span> <span class=nx>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>constructor</span><span class=p>(</span><span class=nx>h</span>: <span class=kt>number</span><span class=p>,</span> <span class=nx>m</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>接口描述了类的<strong>公共部分</strong>，而不是公共和私有两部分。 它不会帮你检查类是否具有某些私有成员</p><h2 id=联合类型和类型别名>联合类型和类型别名</h2><h3 id=联合类型>联合类型</h3><p>联合类型通常与 <code>null</code> 或 <code>undefined</code> 一起使用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>sayHello</span> <span class=o>=</span> <span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kc>undefined</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=cm>/* ... */</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>sayHello</span><span class=p>(</span><span class=s2>&#34;Semlinker&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>sayHello</span><span class=p>(</span><span class=kc>undefined</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=可辨识联合>可辨识联合</h3><p>可辨识联合（Discriminated Unions）类型，也称为代数数据类型或标签联合类型。它包含 3 个要点：可辨识、联合类型和类型守卫。</p><p>这种类型的本质是结合联合类型和字面量类型的一种类型保护方法。如果一个类型是多个类型的联合类型，且多个类型含有一个公共属性，那么就可以利用这个公共属性，来创建不同的类型保护区块。</p><h4 id=可辨识>可辨识</h4><p>可辨识要求联合类型中的每个元素都含有一个单例类型属性，比如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>enum</span> <span class=nx>CarTransmission</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Automatic</span> <span class=o>=</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>Manual</span> <span class=o>=</span> <span class=mi>300</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Motorcycle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>vType</span><span class=o>:</span> <span class=s2>&#34;motorcycle&#34;</span><span class=p>;</span> <span class=c1>// discriminant
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>make</span>: <span class=kt>number</span><span class=p>;</span> <span class=c1>// year
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Car</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>vType</span><span class=o>:</span> <span class=s2>&#34;car&#34;</span><span class=p>;</span> <span class=c1>// discriminant
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>transmission</span>: <span class=kt>CarTransmission</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Truck</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>vType</span><span class=o>:</span> <span class=s2>&#34;truck&#34;</span><span class=p>;</span> <span class=c1>// discriminant
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>capacity</span>: <span class=kt>number</span><span class=p>;</span> <span class=c1>// in tons
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>在上述代码中，我们分别定义了 <code>Motorcycle</code>、 <code>Car</code> 和 <code>Truck</code> 三个接口</p><p>在这些接口中都包含一个 <code>vType</code> 属性，该属性被称为<strong>可辨识的属性</strong>，而其它的属性只跟特性的接口相关。</p><h4 id=联合类型-1>联合类型</h4><p>基于前面定义了三个接口，我们可以创建一个 <code>Vehicle</code> 联合类型：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Vehicle</span> <span class=o>=</span> <span class=nx>Motorcycle</span> <span class=o>|</span> <span class=nx>Car</span> <span class=o>|</span> <span class=nx>Truck</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>现在我们就可以开始使用 <code>Vehicle</code> 联合类型，对于 <code>Vehicle</code> 类型的变量，它可以表示不同类型的车辆。</p><h4 id=类型守卫-1>类型守卫</h4><p>下面我们来定义一个 <code>evaluatePrice</code> 方法，该方法用于根据车辆的类型、容量和评估因子来计算价格：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>EVALUATION_FACTOR</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>PI</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>evaluatePrice</span><span class=p>(</span><span class=nx>vehicle</span>: <span class=kt>Vehicle</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>vehicle</span><span class=p>.</span><span class=nx>capacity</span> <span class=o>*</span> <span class=nx>EVALUATION_FACTOR</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>myTruck</span>: <span class=kt>Truck</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>vType</span><span class=o>:</span> <span class=s2>&#34;truck&#34;</span><span class=p>,</span> <span class=nx>capacity</span>: <span class=kt>9.5</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>evaluatePrice</span><span class=p>(</span><span class=nx>myTruck</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>对于以上代码，TypeScript 编译器将会提示以下错误信息：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>Property</span> <span class=s1>&#39;capacity&#39;</span> <span class=nx>does</span> <span class=nx>not</span> <span class=nx>exist</span> <span class=nx>on</span> <span class=kr>type</span> <span class=s1>&#39;Vehicle&#39;</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=nx>Property</span> <span class=s1>&#39;capacity&#39;</span> <span class=nx>does</span> <span class=nx>not</span> <span class=nx>exist</span> <span class=nx>on</span> <span class=kr>type</span> <span class=s1>&#39;Motorcycle&#39;</span><span class=p>.</span>
</span></span></code></pre></td></tr></table></div></div><p>原因是在 <code>Motorcycle</code> 接口中，并不存在 <code>capacity</code> 属性，而对于 <code>Car</code> 接口来说，它也不存在 <code>capacity</code> 属性。那么，现在我们应该如何解决以上问题呢？这时，我们可以使用类型守卫。下面我们来重构一下前面定义的 <code>evaluatePrice</code> 方法，重构后的代码如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>evaluatePrice</span><span class=p>(</span><span class=nx>vehicle</span>: <span class=kt>Vehicle</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>switch</span><span class=p>(</span><span class=nx>vehicle</span><span class=p>.</span><span class=nx>vType</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s2>&#34;car&#34;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>vehicle</span><span class=p>.</span><span class=nx>transmission</span> <span class=o>*</span> <span class=nx>EVALUATION_FACTOR</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s2>&#34;truck&#34;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>vehicle</span><span class=p>.</span><span class=nx>capacity</span> <span class=o>*</span> <span class=nx>EVALUATION_FACTOR</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s2>&#34;motorcycle&#34;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>vehicle</span><span class=p>.</span><span class=nx>make</span> <span class=o>*</span> <span class=nx>EVALUATION_FACTOR</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>在以上代码中，我们使用 <code>switch</code> 和 <code>case</code> 运算符来实现类型守卫，从而确保在 <code>evaluatePrice</code> 方法中，我们可以安全地访问 <code>vehicle</code> 对象中的所包含的属性，来正确的计算该车辆类型所对应的价格。</p><h3 id=类型别名>类型别名</h3><p>类型别名用来给一个类型起个新名字</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Message</span> <span class=o>=</span> <span class=kt>string</span> <span class=o>|</span> <span class=kt>string</span><span class=p>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>greet</span> <span class=o>=</span> <span class=p>(</span><span class=nx>message</span>: <span class=kt>Message</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=交叉类型>交叉类型</h3><p>TypeScript 交叉类型是将多个类型合并为一个类型。 这让我们可以把现有的多种类型叠加到一起成为一种类型，它包含了所需的所有类型的特性。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>IPerson</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>age</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>IWorker</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>companyId</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>IStaff</span> <span class=o>=</span> <span class=nx>IPerson</span> <span class=o>&amp;</span> <span class=nx>IWorker</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>staff</span>: <span class=kt>IStaff</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;E1006&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>age</span>: <span class=kt>33</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>companyId</span><span class=o>:</span> <span class=s1>&#39;EFT&#39;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>dir</span><span class=p>(</span><span class=nx>staff</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=函数>函数</h2><h3 id=与-js-函数的区别>与 JS 函数的区别</h3><table><thead><tr><th>TypeScript</th><th>JavaScript</th></tr></thead><tbody><tr><td>含有类型</td><td>无类型</td></tr><tr><td>箭头函数</td><td>箭头函数（ES2015）</td></tr><tr><td>函数类型</td><td>无函数类型</td></tr><tr><td>必填和可选参数</td><td>所有参数都是可选的</td></tr><tr><td>默认参数</td><td>默认参数</td></tr><tr><td>剩余参数</td><td>剩余参数</td></tr><tr><td>函数重载</td><td>无函数重载</td></tr></tbody></table><h3 id=箭头函数>箭头函数</h3><h4 id=常见语法>常见语法</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>myBooks</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;reading&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>myBooks</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>title</span> <span class=o>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>title</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>myBooks</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>title</span><span class=p>,</span> <span class=nx>idx</span><span class=p>,</span> <span class=nx>arr</span><span class=p>)</span> <span class=o>=&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>idx</span> <span class=o>+</span> <span class=s1>&#39;-&#39;</span> <span class=o>+</span> <span class=nx>title</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>myBooks</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>title</span><span class=p>,</span> <span class=nx>idx</span><span class=p>,</span> <span class=nx>arr</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>idx</span> <span class=o>+</span> <span class=s1>&#39;-&#39;</span> <span class=o>+</span> <span class=nx>title</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=使用示例>使用示例</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// 未使用箭头函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>Book() {</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>self</span> <span class=o>=</span> <span class=k>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>self</span><span class=p>.</span><span class=nx>publishDate</span> <span class=o>=</span> <span class=mi>2016</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>setInterval</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>self</span><span class=p>.</span><span class=nx>publishDate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 使用箭头函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>Book() {</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>publishDate</span> <span class=o>=</span> <span class=mi>2016</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>setInterval</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>publishDate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=参数类型和返回类型>参数类型和返回类型</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>createUserId</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>id</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>name</span> <span class=o>+</span> <span class=nx>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=函数类型-1>函数类型</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>IdGenerator</span><span class=o>:</span> <span class=p>(</span><span class=nx>chars</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>nums</span>: <span class=kt>number</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>createUserId</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>id</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>name</span> <span class=o>+</span> <span class=nx>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>IdGenerator</span> <span class=o>=</span> <span class=nx>createUserId</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>搞不懂有啥用。。</p><h3 id=可选参数及默认参数>可选参数及默认参数</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// 可选参数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>createUserId</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>id</span>: <span class=kt>number</span><span class=p>,</span> <span class=nx>age?</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>name</span> <span class=o>+</span> <span class=nx>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 默认参数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>createUserId</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span> <span class=o>=</span> <span class=s2>&#34;Semlinker&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span>: <span class=kt>number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>age?</span>: <span class=kt>number</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>name</span> <span class=o>+</span> <span class=nx>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>在实际使用时，需要注意的是可选参数要放在普通参数的后面，不然会导致编译错误。</p><h3 id=剩余参数>剩余参数</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>push</span><span class=p>(</span><span class=nx>array</span><span class=p>,</span> <span class=p>...</span><span class=nx>items</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>items</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>array</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>item</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl><span class=nx>push</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=函数重载>函数重载</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>add</span><span class=p>(</span><span class=nx>a</span>: <span class=kt>number</span><span class=p>,</span> <span class=nx>b</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>add</span><span class=p>(</span><span class=nx>a</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>b</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>add</span><span class=p>(</span><span class=nx>a</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>b</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>add</span><span class=p>(</span><span class=nx>a</span>: <span class=kt>number</span><span class=p>,</span> <span class=nx>b</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>add</span><span class=p>(</span><span class=nx>a</span>: <span class=kt>Combinable</span><span class=p>,</span> <span class=nx>b</span>: <span class=kt>Combinable</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>a</span> <span class=o>===</span> <span class=s2>&#34;string&#34;</span> <span class=o>||</span> <span class=k>typeof</span> <span class=nx>b</span> <span class=o>===</span> <span class=s2>&#34;string&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>a</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span> <span class=o>+</span> <span class=nx>b</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>在定义重载的时候，一定要把最精确的定义放在最前面</p></blockquote><h2 id=数组>数组</h2><h3 id=数组解构>数组解构</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>x</span>: <span class=kt>number</span><span class=p>;</span> <span class=kd>let</span> <span class=nx>y</span>: <span class=kt>number</span><span class=p>;</span> <span class=kd>let</span> <span class=nx>z</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>five_array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>x</span><span class=p>,</span><span class=nx>y</span><span class=p>,</span><span class=nx>z</span><span class=p>]</span> <span class=o>=</span> <span class=nx>five_array</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=数组展开运算符>数组展开运算符</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>two_array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>five_array</span> <span class=o>=</span> <span class=p>[...</span><span class=nx>two_array</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>];</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=数组遍历>数组遍历</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>colors</span>: <span class=kt>string</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;red&#34;</span><span class=p>,</span> <span class=s2>&#34;green&#34;</span><span class=p>,</span> <span class=s2>&#34;blue&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=k>of</span> <span class=nx>colors</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=对象>对象</h2><h3 id=对象解构>对象解构</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>person</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Semlinker&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>gender</span><span class=o>:</span> <span class=s2>&#34;Male&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=p>{</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>gender</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>person</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=对象运算符>对象运算符</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>person</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Semlinker&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>gender</span><span class=o>:</span> <span class=s2>&#34;Male&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>address</span><span class=o>:</span> <span class=s2>&#34;Xiamen&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 组装对象
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>personWithAge</span> <span class=o>=</span> <span class=p>{</span> <span class=p>...</span><span class=nx>person</span><span class=p>,</span> <span class=nx>age</span>: <span class=kt>33</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 获取除了某些项外的其它项
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=p>{</span> <span class=nx>name</span><span class=p>,</span> <span class=p>...</span><span class=nx>rest</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>person</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=类>类</h2><p>在 TypeScript 中，我们可以通过 <code>Class</code> 关键字来定义一个类：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Greeter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 静态属性
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>static</span> <span class=nx>cname</span>: <span class=kt>string</span> <span class=o>=</span> <span class=s2>&#34;Greeter&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 成员属性
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>greeting</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 构造函数 - 执行初始化操作
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>message</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>greeting</span> <span class=o>=</span> <span class=nx>message</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 静态方法
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>static</span> <span class=nx>getClassName() {</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;Class name is Greeter&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 成员方法
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>greet() {</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;Hello, &#34;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>greeting</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>greeter</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Greeter</span><span class=p>(</span><span class=s2>&#34;world&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>类的静态成员存在于类本身上面而不是类的实例上。</p></blockquote><h3 id=访问器>访问器</h3><p>在 TypeScript 中，我们可以通过 <code>getter</code> 和 <code>setter</code> 方法来实现数据的封装和有效性校验，防止出现异常数据。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Hello</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>private</span> <span class=nx>_name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>private</span> <span class=nx>_age</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>get</span> <span class=nx>name</span><span class=p>()</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>_name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>set</span> <span class=nx>name</span><span class=p>(</span><span class=nx>value</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_name</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>get</span> <span class=nx>age</span><span class=p>()</span><span class=o>:</span> <span class=kt>number</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>_age</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>set</span> <span class=nx>age</span><span class=p>(</span><span class=nx>age</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=nx>age</span><span class=o>&gt;</span><span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=nx>age</span><span class=p>&lt;</span><span class=nt>100</span><span class=err>)</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=na>console.log</span><span class=err>(&#34;</span><span class=na>年龄在0</span><span class=err>-</span><span class=na>100之间</span><span class=err>&#34;);</span> <span class=err>//</span> <span class=na>年龄在0</span><span class=err>-</span><span class=na>100之间</span>
</span></span><span class=line><span class=cl>            <span class=na>return</span><span class=err>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=na>this._age</span> <span class=err>=</span> <span class=na>age</span><span class=err>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=na>let</span> <span class=na>hello </span><span class=o>=</span> <span class=na>new</span> <span class=na>Hello</span><span class=err>();</span>
</span></span><span class=line><span class=cl><span class=na>hello.name</span> <span class=err>=</span> <span class=err>&#34;</span><span class=na>muyy</span><span class=err>&#34;;</span>
</span></span><span class=line><span class=cl><span class=na>hello.age</span> <span class=err>=</span> <span class=na>23</span>
</span></span><span class=line><span class=cl><span class=na>console.log</span><span class=err>(</span><span class=na>hello.name</span><span class=err>);</span> <span class=err>//</span> <span class=na>muyy</span>
</span></span></code></pre></td></tr></table></div></div><p>另外一个例子：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>passcode</span> <span class=o>=</span> <span class=s2>&#34;Hello TypeScript&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Employee</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>private</span> <span class=nx>_fullName</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>get</span> <span class=nx>fullName</span><span class=p>()</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>_fullName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>set</span> <span class=nx>fullName</span><span class=p>(</span><span class=nx>newName</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>passcode</span> <span class=o>&amp;&amp;</span> <span class=nx>passcode</span> <span class=o>==</span> <span class=s2>&#34;Hello TypeScript&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>_fullName</span> <span class=o>=</span> <span class=nx>newName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Error: Unauthorized update of employee!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>employee</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Employee</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>employee</span><span class=p>.</span><span class=nx>fullName</span> <span class=o>=</span> <span class=s2>&#34;Semlinker&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>employee</span><span class=p>.</span><span class=nx>fullName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>employee</span><span class=p>.</span><span class=nx>fullName</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=继承>继承</h3><p>通过 <code>extends</code> 关键字来实现继承：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>theName</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>theName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>move</span><span class=p>(</span><span class=nx>distanceInMeters</span>: <span class=kt>number</span> <span class=o>=</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb> moved </span><span class=si>${</span><span class=nx>distanceInMeters</span><span class=si>}</span><span class=sb>m.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Snake</span> <span class=kr>extends</span> <span class=nx>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>move</span><span class=p>(</span><span class=nx>distanceInMeters</span> <span class=o>=</span> <span class=mi>5</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Slithering...&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>.</span><span class=nx>move</span><span class=p>(</span><span class=nx>distanceInMeters</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>sam</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Snake</span><span class=p>(</span><span class=s2>&#34;Sammy the Python&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>sam</span><span class=p>.</span><span class=nx>move</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ecmascript-私有字段>ECMAScript 私有字段</h3><p>在 TypeScript 3.8 版本就开始支持 <strong>ECMAScript 私有字段</strong>，使用方式如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>#</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=err>#</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>greet() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello, my name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=err>#</span><span class=nx>name</span><span class=si>}</span><span class=sb>!`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>semlinker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>(</span><span class=s2>&#34;Semlinker&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>semlinker</span><span class=p>.</span><span class=err>#</span><span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>//     ~~~~~
</span></span></span><span class=line><span class=cl><span class=c1>// Property &#39;#name&#39; is not accessible outside class &#39;Person&#39;
</span></span></span><span class=line><span class=cl><span class=c1>// because it has a private identifier.
</span></span></span></code></pre></td></tr></table></div></div><p>与常规属性（甚至使用 <code>private</code> 修饰符声明的属性）不同，私有字段要牢记以下规则：</p><ul><li>私有字段以 <code>#</code> 字符开头，有时我们称之为私有名称；</li><li>每个私有字段名称都唯一地限定于其包含的类；</li><li>不能在私有字段上使用 TypeScript 可访问性修饰符（如 public 或 private）；</li><li>私有字段不能在包含的类之外访问，甚至不能被检测到。</li></ul><h2 id=泛型>泛型</h2><p>泛型（Generics）是允许同一个函数接受不同类型参数的一种模板。相比于使用 any 类型，使用泛型来创建可复用的组件要更好，因为泛型会保留参数类型</p><p>泛型与<strong>模板</strong>类似</p><h3 id=泛型接口>泛型接口</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>GenericIdentityFn</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nx>arg</span>: <span class=kt>T</span><span class=p>)</span><span class=o>:</span> <span class=nx>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=泛型类>泛型类</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>class</span> <span class=nx>GenericNumber</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>zeroValue</span>: <span class=kt>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>add</span><span class=o>:</span> <span class=p>(</span><span class=nx>x</span>: <span class=kt>T</span><span class=p>,</span> <span class=nx>y</span>: <span class=kt>T</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myGenericNumber</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>GenericNumber</span><span class=p>&lt;</span><span class=nt>number</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl><span class=nx>myGenericNumber</span><span class=p>.</span><span class=nx>zeroValue</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>myGenericNumber</span><span class=p>.</span><span class=nx>add</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=范型变量>范型变量</h3><p>一些常见泛型变量代表的意思：</p><ul><li>T（Type）：表示一个 TypeScript 类型</li><li>K（Key）：表示对象中的键类型</li><li>V（Value）：表示对象中的值类型</li><li>E（Element）：表示元素类型</li></ul><h3 id=泛型工具类型>泛型工具类型</h3><h4 id=typeof>typeof</h4><p>在 TypeScript 中，<code>typeof</code> 操作符可以用来获取一个变量声明或对象的类型。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>age</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>sem</span>: <span class=kt>Person</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;semlinker&#39;</span><span class=p>,</span> <span class=nx>age</span>: <span class=kt>30</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Sem</span> <span class=o>=</span> <span class=k>typeof</span> <span class=nx>sem</span><span class=p>;</span> <span class=c1>// -&gt; Person
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>toArray</span><span class=p>(</span><span class=nx>x</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=nb>Array</span><span class=p>&lt;</span><span class=nt>number</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>[</span><span class=nx>x</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Func</span> <span class=o>=</span> <span class=k>typeof</span> <span class=nx>toArray</span><span class=p>;</span> <span class=c1>// -&gt; (x: number) =&gt; number[]
</span></span></span></code></pre></td></tr></table></div></div><h4 id=keyof>keyof</h4><p><code>keyof</code> 操作符可以用来一个对象中的所有 key 值：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>K1</span> <span class=o>=</span> <span class=k>keyof</span> <span class=nx>Person</span><span class=p>;</span> <span class=c1>// &#34;name&#34; | &#34;age&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>type</span> <span class=nx>K2</span> <span class=o>=</span> <span class=k>keyof</span> <span class=nx>Person</span><span class=p>[];</span> <span class=c1>// &#34;length&#34; | &#34;toString&#34; | &#34;pop&#34; | &#34;push&#34; | &#34;concat&#34; | &#34;join&#34; 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>type</span> <span class=nx>K3</span> <span class=o>=</span> <span class=k>keyof</span> <span class=p>{</span> <span class=p>[</span><span class=nx>x</span>: <span class=kt>string</span><span class=p>]</span><span class=o>:</span> <span class=nx>Person</span> <span class=p>};</span>  <span class=c1>// string | number
</span></span></span></code></pre></td></tr></table></div></div><h4 id=in>in</h4><p><code>in</code> 用来遍历枚举类型：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Keys</span> <span class=o>=</span> <span class=s2>&#34;a&#34;</span> <span class=o>|</span> <span class=s2>&#34;b&#34;</span> <span class=o>|</span> <span class=s2>&#34;c&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Obj</span> <span class=o>=</span>  <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=nx>p</span> <span class=k>in</span> <span class=nx>Keys</span><span class=p>]</span><span class=o>:</span> <span class=kt>any</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=c1>// -&gt; { a: any, b: any, c: any }
</span></span></span></code></pre></td></tr></table></div></div><h4 id=infer>infer</h4><p>在条件类型语句中，可以用 <code>infer</code> 声明一个类型变量并且对它进行使用。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>type</span> <span class=nx>ReturnType</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> <span class=o>=</span> <span class=nx>T</span> <span class=kr>extends</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>...</span><span class=nx>args</span>: <span class=kt>any</span><span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=o>=&gt;</span> <span class=k>infer</span> <span class=nx>R</span> <span class=o>?</span> <span class=nx>R</span> : <span class=kt>any</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>以上代码中 <code>infer R</code> 就是声明一个变量来承载传入函数签名的返回值类型，简单说就是用它取到函数返回值的类型方便之后使用。（不明白）</p><h4 id=extends>extends</h4><p>有时候我们定义的泛型不想过于灵活或者说想继承某些类等，可以通过 <code>extends</code> 关键字添加泛型约束。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>ILengthwise</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>length</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>loggingIdentity</span><span class=p>&lt;</span><span class=nt>T</span> <span class=na>extends</span> <span class=na>ILengthwise</span><span class=p>&gt;(</span><span class=nx>arg</span>: <span class=kt>T</span><span class=p>)</span><span class=o>:</span> <span class=nx>T</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>arg</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>arg</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>现在这个泛型函数被定义了约束，因此它不再是适用于任意类型：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>loggingIdentity</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>  <span class=c1>// Error, number doesn&#39;t have a .length property
</span></span></span></code></pre></td></tr></table></div></div><p>这时我们需要传入符合约束类型的值，必须包含必须的属性：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>loggingIdentity</span><span class=p>({</span><span class=nx>length</span>: <span class=kt>10</span><span class=p>,</span> <span class=nx>value</span>: <span class=kt>3</span><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=partial>Partial</h4><p><code>Partial&lt;T></code> 的作用就是将某个类型里的属性全部变为可选项 <code>?</code></p><p><strong>定义：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * node_modules/typescript/lib/lib.es5.d.ts
</span></span></span><span class=line><span class=cl><span class=cm> * Make all properties in T optional
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Partial</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=nx>P</span> <span class=k>in</span> <span class=k>keyof</span> <span class=nx>T</span><span class=p>]</span><span class=o>?:</span> <span class=nx>T</span><span class=p>[</span><span class=nx>P</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>在以上代码中，首先通过 <code>keyof T</code> 拿到 <code>T</code> 的所有属性名，然后使用 <code>in</code> 进行遍历，将值赋给 <code>P</code>，最后通过 <code>T[P]</code> 取得相应的属性值。中间的 <code>?</code> 号，用于将所有属性变为可选。</p><p><strong>示例：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Todo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>title</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>description</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>updateTodo</span><span class=p>(</span><span class=nx>todo</span>: <span class=kt>Todo</span><span class=p>,</span> <span class=nx>fieldsToUpdate</span>: <span class=kt>Partial</span><span class=p>&lt;</span><span class=nt>Todo</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span> <span class=p>...</span><span class=nx>todo</span><span class=p>,</span> <span class=p>...</span><span class=nx>fieldsToUpdate</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>todo1</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;organize desk&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>description</span><span class=o>:</span> <span class=s2>&#34;clear clutter&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>todo2</span> <span class=o>=</span> <span class=nx>updateTodo</span><span class=p>(</span><span class=nx>todo1</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>description</span><span class=o>:</span> <span class=s2>&#34;throw out trash&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>在上面的 <code>updateTodo</code> 方法中，我们利用 <code>Partial&lt;T></code> 工具类型，定义 <code>fieldsToUpdate</code> 的类型为 <code>Partial&lt;Todo></code>，即：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=nx>title?</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=nx>description?</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=装饰器>装饰器</h2><ul><li>它是一个表达式</li><li>该表达式被执行后，返回一个函数</li><li>函数的入参分别为 target、name 和 descriptor</li><li>执行该函数后，可能返回 descriptor 对象，用于配置 target 对象</li></ul><h3 id=类装饰器>类装饰器</h3><p><strong>声明</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>declare</span> <span class=kr>type</span> <span class=nx>ClassDecorator</span> <span class=o>=</span> <span class=p>&lt;</span><span class=nt>TFunction</span> <span class=na>extends</span> <span class=na>Function</span><span class=p>&gt;(</span>
</span></span><span class=line><span class=cl>  <span class=nx>target</span>: <span class=kt>TFunction</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>TFunction</span> <span class=o>|</span> <span class=k>void</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>类装饰器用来装饰类，它接收一个参数：</p><ul><li><em>target: TFunction</em>：被装饰的类</li></ul><p><strong>例</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Greeter</span><span class=p>(</span><span class=nx>target</span>: <span class=kt>Function</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>target</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>greet</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Hello Semlinker!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>@Greeter</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Greeting</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 内部实现
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myGreeting</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Greeting</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>myGreeting</span><span class=p>.</span><span class=nx>greet</span><span class=p>();</span> <span class=c1>// console output: &#39;Hello Semlinker!&#39;;
</span></span></span></code></pre></td></tr></table></div></div><p>上面的例子中，我们定义了 <code>Greeter</code> 类装饰器，同时我们使用了 <code>@Greeter</code> 语法糖，来使用装饰器。</p><p>还可以在装饰器中加入参数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Greeter</span><span class=p>(</span><span class=nx>greeting</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>target</span>: <span class=kt>Function</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>target</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>greet</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>greeting</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>@Greeter</span><span class=p>(</span><span class=s2>&#34;Hello TS!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Greeting</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 内部实现
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myGreeting</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Greeting</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>myGreeting</span><span class=p>.</span><span class=nx>greet</span><span class=p>();</span> <span class=c1>// console output: &#39;Hello TS!&#39;;
</span></span></span></code></pre></td></tr></table></div></div><h3 id=属性装饰器>属性装饰器</h3><p><strong>声明</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>declare</span> <span class=kr>type</span> <span class=nx>PropertyDecorator</span> <span class=o>=</span> <span class=p>(</span><span class=nx>target</span>:<span class=kt>Object</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=nx>propertyKey</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kt>symbol</span> <span class=p>)</span> <span class=o>=&gt;</span> <span class=k>void</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>属性装饰器用来装饰类的属性。它接收两个参数：</p><ul><li><em>target: Object</em>：被装饰的类</li><li><em>propertyKey: string | symbol</em>：被装饰类的属性名</li></ul><p><strong>例</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>logProperty</span><span class=p>(</span><span class=nx>target</span>: <span class=kt>any</span><span class=p>,</span> <span class=nx>key</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>delete</span> <span class=nx>target</span><span class=p>[</span><span class=nx>key</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>backingField</span> <span class=o>=</span> <span class=s2>&#34;_&#34;</span> <span class=o>+</span> <span class=nx>key</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nb>Object</span><span class=p>.</span><span class=nx>defineProperty</span><span class=p>(</span><span class=nx>target</span><span class=p>,</span> <span class=nx>backingField</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>writable</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>enumerable</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>configurable</span>: <span class=kt>true</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// property getter
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>getter</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=k>this</span><span class=o>:</span> <span class=kt>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>currVal</span> <span class=o>=</span> <span class=k>this</span><span class=p>[</span><span class=nx>backingField</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Get: </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb> =&gt; </span><span class=si>${</span><span class=nx>currVal</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>currVal</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// property setter
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>setter</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=k>this</span><span class=o>:</span> <span class=kt>any</span><span class=p>,</span> <span class=nx>newVal</span>: <span class=kt>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Set: </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb> =&gt; </span><span class=si>${</span><span class=nx>newVal</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>[</span><span class=nx>backingField</span><span class=p>]</span> <span class=o>=</span> <span class=nx>newVal</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Create new property with getter and setter
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nb>Object</span><span class=p>.</span><span class=nx>defineProperty</span><span class=p>(</span><span class=nx>target</span><span class=p>,</span> <span class=nx>key</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>get</span><span class=o>:</span> <span class=nx>getter</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=kr>set</span><span class=o>:</span> <span class=nx>setter</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>enumerable</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>configurable</span>: <span class=kt>true</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=kd>@logProperty</span>
</span></span><span class=line><span class=cl>  <span class=kr>public</span> <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span> : <span class=kt>string</span><span class=p>)</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>(</span><span class=s2>&#34;semlinker&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>p1</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;kakuqo&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>以上代码我们定义了一个 <code>logProperty</code> 函数，来跟踪用户对属性的操作，当代码成功运行后，在控制台会输出以下结果：（晕晕的，暂时难以接受。。）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>Set</span>: <span class=kt>name</span> <span class=o>=&gt;</span> <span class=nx>semlinker</span>
</span></span><span class=line><span class=cl><span class=nx>Set</span>: <span class=kt>name</span> <span class=o>=&gt;</span> <span class=nx>kakuqo</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=方法装饰器>方法装饰器</h3><p><strong>声明</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>declare</span> <span class=kr>type</span> <span class=nx>MethodDecorator</span> <span class=o>=</span> <span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;(</span><span class=nx>target</span>:<span class=kt>Object</span><span class=p>,</span> <span class=nx>propertyKey</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kt>symbol</span><span class=p>,</span> 	 	
</span></span><span class=line><span class=cl>  <span class=nx>descriptor</span>: <span class=kt>TypePropertyDescript</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;)</span> <span class=o>=&gt;</span> <span class=nx>TypedPropertyDescriptor</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> <span class=o>|</span> <span class=k>void</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>方法装饰器用来装饰类的方法。它接收三个参数：</p><ul><li><em>target: Object</em>：被装饰的类</li><li><em>propertyKey: string | symbol</em>：方法名</li><li><em>descriptor: TypePropertyDescript</em>：属性描述符</li></ul><p><strong>例</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>LogOutput</span><span class=p>(</span><span class=nx>tarage</span>: <span class=kt>Function</span><span class=p>,</span> <span class=nx>key</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>descriptor</span>: <span class=kt>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>originalMethod</span> <span class=o>=</span> <span class=nx>descriptor</span><span class=p>.</span><span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>newMethod</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(...</span><span class=nx>args</span>: <span class=kt>any</span><span class=p>[])</span><span class=o>:</span> <span class=kt>any</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>result</span>: <span class=kt>any</span> <span class=o>=</span> <span class=nx>originalMethod</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>args</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>loggedOutput</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>loggedOutput</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Array</span><span class=p>&lt;</span><span class=nt>any</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>loggedOutput</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>method</span>: <span class=kt>key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>parameters</span>: <span class=kt>args</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>output</span>: <span class=kt>result</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>timestamp</span>: <span class=kt>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=nx>descriptor</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>newMethod</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Calculator</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>@LogOutput</span>
</span></span><span class=line><span class=cl>  <span class=nx>double</span> <span class=p>(</span><span class=nx>num</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=kt>number</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>num</span> <span class=o>*</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>calc</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Calculator</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>calc</span><span class=p>.</span><span class=nx>double</span><span class=p>(</span><span class=mi>11</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// console ouput: [{method: &#34;double&#34;, output: 22, ...}]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>calc</span><span class=p>.</span><span class=nx>loggedOutput</span><span class=p>);</span> 
</span></span></code></pre></td></tr></table></div></div><h3 id=参数装饰器>参数装饰器</h3><p><strong>声明</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>declare</span> <span class=kr>type</span> <span class=nx>ParameterDecorator</span> <span class=o>=</span> <span class=p>(</span><span class=nx>target</span>: <span class=kt>Object</span><span class=p>,</span> <span class=nx>propertyKey</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kt>symbol</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=nx>parameterIndex</span>: <span class=kt>number</span> <span class=p>)</span> <span class=o>=&gt;</span> <span class=k>void</span>
</span></span></code></pre></td></tr></table></div></div><p>参数装饰器用来装饰函数参数，它接收三个参数：</p><ul><li><em>target: Object</em>：被装饰的类</li><li><em>propertyKey: string | symbol</em>：方法名</li><li><em>parameterIndex: number</em>：方法中参数的索引值</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Log</span><span class=p>(</span><span class=nx>target</span>: <span class=kt>Function</span><span class=p>,</span> <span class=nx>key</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>parameterIndex</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>functionLogged</span> <span class=o>=</span> <span class=nx>key</span> <span class=o>||</span> <span class=nx>target</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=kr>constructor</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`The parameter in position </span><span class=si>${</span><span class=nx>parameterIndex</span><span class=si>}</span><span class=sb> at </span><span class=si>${</span><span class=nx>functionLogged</span><span class=si>}</span><span class=sb> has
</span></span></span><span class=line><span class=cl><span class=sb>	been decorated`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Greeter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>greeting</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kd>@Log</span> <span class=nx>phrase</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=nx>greeting</span> <span class=o>=</span> <span class=nx>phrase</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// console output: The parameter in position 0 
</span></span></span><span class=line><span class=cl><span class=c1>// at Greeter has been decorated
</span></span></span></code></pre></td></tr></table></div></div><h2 id=编译上下文>编译上下文</h2><h3 id=tsconfigjson-的作用>tsconfig.json 的作用</h3><ul><li>用于标识 TypeScript 项目的根路径；</li><li>用于配置 TypeScript 编译器；</li><li>用于指定编译的文件。</li></ul><h3 id=tsconfigjson-重要字段>tsconfig.json 重要字段</h3><ul><li>files - 设置要编译的文件的名称；</li><li>include - 设置需要进行编译的文件，支持路径模式匹配；</li><li>exclude - 设置无需进行编译的文件，支持路径模式匹配；</li><li>compilerOptions - 设置与编译流程相关的选项。</li></ul><h3 id=compileroptions-选项>compilerOptions 选项</h3><p>compilerOptions 支持很多选项，常见的有 <code>baseUrl</code>、 <code>target</code>、<code>baseUrl</code>、 <code>moduleResolution</code> 和 <code>lib</code> 等。</p><p>compilerOptions 每个选项的详细说明如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;compilerOptions&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/* 基本选项 */</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;target&#34;</span><span class=o>:</span> <span class=s2>&#34;es5&#34;</span><span class=p>,</span>                       <span class=c1>// 指定 ECMAScript 目标版本: &#39;ES3&#39; (default), &#39;ES5&#39;, &#39;ES6&#39;/&#39;ES2015&#39;, &#39;ES2016&#39;, &#39;ES2017&#39;, or &#39;ESNEXT&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;module&#34;</span><span class=o>:</span> <span class=s2>&#34;commonjs&#34;</span><span class=p>,</span>                  <span class=c1>// 指定使用模块: &#39;commonjs&#39;, &#39;amd&#39;, &#39;system&#39;, &#39;umd&#39; or &#39;es2015&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;lib&#34;</span><span class=o>:</span> <span class=p>[],</span>                             <span class=c1>// 指定要包含在编译中的库文件
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;allowJs&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                       <span class=c1>// 允许编译 javascript 文件
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;checkJs&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                       <span class=c1>// 报告 javascript 文件中的错误
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;jsx&#34;</span><span class=o>:</span> <span class=s2>&#34;preserve&#34;</span><span class=p>,</span>                     <span class=c1>// 指定 jsx 代码的生成: &#39;preserve&#39;, &#39;react-native&#39;, or &#39;react&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;declaration&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                   <span class=c1>// 生成相应的 &#39;.d.ts&#39; 文件
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;sourceMap&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                     <span class=c1>// 生成相应的 &#39;.map&#39; 文件
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;outFile&#34;</span><span class=o>:</span> <span class=s2>&#34;./&#34;</span><span class=p>,</span>                       <span class=c1>// 将输出文件合并为一个文件
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;outDir&#34;</span><span class=o>:</span> <span class=s2>&#34;./&#34;</span><span class=p>,</span>                        <span class=c1>// 指定输出目录
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;rootDir&#34;</span><span class=o>:</span> <span class=s2>&#34;./&#34;</span><span class=p>,</span>                       <span class=c1>// 用来控制输出目录结构 --outDir.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;removeComments&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                <span class=c1>// 删除编译后的所有的注释
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;noEmit&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                        <span class=c1>// 不生成输出文件
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;importHelpers&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                 <span class=c1>// 从 tslib 导入辅助工具函数
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;isolatedModules&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>               <span class=c1>// 将每个文件做为单独的模块 （与 &#39;ts.transpileModule&#39; 类似）.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=cm>/* 严格的类型检查选项 */</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;strict&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                        <span class=c1>// 启用所有严格类型检查选项
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;noImplicitAny&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                 <span class=c1>// 在表达式和声明上有隐含的 any类型时报错
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;strictNullChecks&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>              <span class=c1>// 启用严格的 null 检查
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;noImplicitThis&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                <span class=c1>// 当 this 表达式值为 any 类型的时候，生成一个错误
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;alwaysStrict&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                  <span class=c1>// 以严格模式检查每个模块，并在每个文件里加入 &#39;use strict&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=cm>/* 额外的检查 */</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;noUnusedLocals&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                <span class=c1>// 有未使用的变量时，抛出错误
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;noUnusedParameters&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>            <span class=c1>// 有未使用的参数时，抛出错误
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;noImplicitReturns&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>             <span class=c1>// 并不是所有函数里的代码都有返回值时，抛出错误
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;noFallthroughCasesInSwitch&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>    <span class=c1>// 报告 switch 语句的 fallthrough 错误。（即，不允许 switch 的 case 语句贯穿）
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=cm>/* 模块解析选项 */</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;moduleResolution&#34;</span><span class=o>:</span> <span class=s2>&#34;node&#34;</span><span class=p>,</span>            <span class=c1>// 选择模块解析策略： &#39;node&#39; (Node.js) or &#39;classic&#39; (TypeScript pre-1.6)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;baseUrl&#34;</span><span class=o>:</span> <span class=s2>&#34;./&#34;</span><span class=p>,</span>                       <span class=c1>// 用于解析非相对模块名称的基目录
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;paths&#34;</span><span class=o>:</span> <span class=p>{},</span>                           <span class=c1>// 模块名到基于 baseUrl 的路径映射的列表
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;rootDirs&#34;</span><span class=o>:</span> <span class=p>[],</span>                        <span class=c1>// 根文件夹列表，其组合内容表示项目运行时的结构内容
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;typeRoots&#34;</span><span class=o>:</span> <span class=p>[],</span>                       <span class=c1>// 包含类型声明的文件列表
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;types&#34;</span><span class=o>:</span> <span class=p>[],</span>                           <span class=c1>// 需要包含的类型声明文件名列表
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;allowSyntheticDefaultImports&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>  <span class=c1>// 允许从没有设置默认导出的模块中默认导入。
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=cm>/* Source Map Options */</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;sourceRoot&#34;</span><span class=o>:</span> <span class=s2>&#34;./&#34;</span><span class=p>,</span>                    <span class=c1>// 指定调试器应该找到 TypeScript 文件而不是源文件的位置
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;mapRoot&#34;</span><span class=o>:</span> <span class=s2>&#34;./&#34;</span><span class=p>,</span>                       <span class=c1>// 指定调试器应该找到映射文件而不是生成文件的位置
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;inlineSourceMap&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>               <span class=c1>// 生成单个 soucemaps 文件，而不是将 sourcemaps 生成不同的文件
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;inlineSources&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>                 <span class=c1>// 将代码与 sourcemaps 生成到一个文件中，要求同时设置了 --inlineSourceMap 或 --sourceMap 属性
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=cm>/* 其他选项 */</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;experimentalDecorators&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>        <span class=c1>// 启用装饰器
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;emitDecoratorMetadata&#34;</span><span class=o>:</span> <span class=kc>true</span>          <span class=c1>// 为装饰器提供元数据的支持
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=与-vue3-的结合>与 Vue3 的结合</h2><h3 id=ref-的类型声明>ref 的类型声明</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>year</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>2020</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>month</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>&lt;</span><span class=nt>string</span> <span class=err>|</span> <span class=na>number</span><span class=p>&gt;(</span><span class=s1>&#39;9&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>如果不给定 <code>ref</code> 定义的类型的话， <code>vue3</code> 也能根据初始值来进行类型推导，然后需要指定复杂类型的时候简单传递一个泛型即可。</p><h3 id=reactive-的类型声明>reactive 的类型声明</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>student</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>&lt;</span><span class=nt>Student</span><span class=p>&gt;({</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;阿勇&#39;</span><span class=p>,</span> <span class=nx>age</span>: <span class=kt>16</span> <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=c1>// or
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>student</span>: <span class=kt>Student</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;阿勇&#39;</span><span class=p>,</span> <span class=nx>age</span>: <span class=kt>16</span> <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=c1>// or
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>student</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;阿勇&#39;</span><span class=p>,</span> <span class=nx>age</span>: <span class=kt>16</span><span class=p>,</span> <span class=kr>class</span><span class=o>:</span> <span class=s1>&#39;cs&#39;</span> <span class=p>})</span> <span class=kr>as</span> <span class=nx>Student</span>
</span></span></code></pre></td></tr></table></div></div><p>比较倾向于第一种</p><h3 id=自定义-hooks>自定义 hooks</h3><p>作者：JS开发宝典
链接：https://zhuanlan.zhihu.com/p/360947847
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><p><code>vue3</code> 借鉴 <code>react hooks</code> 开发出了 <code>Composition API</code> ，那么也就意味着 <code>Composition API</code> 也能进行自定义封装 <code>hooks</code> ，接下来我们就用 <code>TypeScript</code> 风格封装一个计数器逻辑的 <code>hooks</code> （ <code>useCount</code> ）:</p><p>首先来看看这个 <code>hooks</code> 怎么使用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;/@modules/vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span>  <span class=nx>useCount</span> <span class=nx>from</span> <span class=s1>&#39;./useCount&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;CountDemo&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>msg</span><span class=o>:</span> <span class=nb>String</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>current</span><span class=o>:</span> <span class=nx>count</span><span class=p>,</span> <span class=nx>inc</span><span class=p>,</span> <span class=nx>dec</span><span class=p>,</span> <span class=nx>set</span><span class=p>,</span> <span class=nx>reset</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useCount</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>min</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>max</span><span class=o>:</span> <span class=mi>15</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>msg</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s1>&#39;Demo useCount&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>inc</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>dec</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>set</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>reset</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>msg</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>出来的效果就是：</p><p><video class="ztext-gif GifPlayer-gif2mp4" src="https://vdn3.vzuu.com/SD/c7cfa0ca-9101-11eb-b345-7698b3d4c6f1.mp4?disable_local_cache=1&auth_key=1639565556-0-0-796615e0111e0cccd76ee991f55588e7&f=mp4&bu=pico&expiration=1639565556&v=tx" data-thumbnail=https://pic2.zhimg.com/v2-30b558edcab2711150a124c0b5b430a9_b.jpg poster=https://pic2.zhimg.com/v2-30b558edcab2711150a124c0b5b430a9_b.jpg data-size=normal preload=metadata loop playsinline></video></p><p>贴上 <code>useCount</code> 的源码：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span><span class=p>,</span> <span class=nx>Ref</span><span class=p>,</span> <span class=nx>watch</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Range</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>min</span><span class=o>?:</span> <span class=nx>number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>max</span><span class=o>?:</span> <span class=nx>number</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Result</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>current</span><span class=o>:</span> <span class=nx>Ref</span><span class=o>&lt;</span><span class=nx>number</span><span class=o>&gt;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>inc</span><span class=o>:</span> <span class=p>(</span><span class=nx>delta</span><span class=o>?:</span> <span class=nx>number</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>void</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>dec</span><span class=o>:</span> <span class=p>(</span><span class=nx>delta</span><span class=o>?:</span> <span class=nx>number</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>void</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>set</span><span class=o>:</span> <span class=p>(</span><span class=nx>value</span><span class=o>:</span> <span class=nx>number</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>void</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>reset</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=k>void</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=nx>useCount</span><span class=p>(</span><span class=nx>initialVal</span><span class=o>:</span> <span class=nx>number</span><span class=p>,</span> <span class=nx>range</span><span class=o>?:</span> <span class=nx>Range</span><span class=p>)</span><span class=o>:</span> <span class=nx>Result</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>current</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=nx>initialVal</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>inc</span> <span class=o>=</span> <span class=p>(</span><span class=nx>delta</span><span class=o>?:</span> <span class=nx>number</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>delta</span> <span class=o>===</span> <span class=s1>&#39;number&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>current</span><span class=p>.</span><span class=nx>value</span> <span class=o>+=</span> <span class=nx>delta</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>current</span><span class=p>.</span><span class=nx>value</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>dec</span> <span class=o>=</span> <span class=p>(</span><span class=nx>delta</span><span class=o>?:</span> <span class=nx>number</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>delta</span> <span class=o>===</span> <span class=s1>&#39;number&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>current</span><span class=p>.</span><span class=nx>value</span> <span class=o>-=</span> <span class=nx>delta</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>current</span><span class=p>.</span><span class=nx>value</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>set</span> <span class=o>=</span> <span class=p>(</span><span class=nx>value</span><span class=o>:</span> <span class=nx>number</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>current</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>reset</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>current</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>initialVal</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>watch</span><span class=p>(</span><span class=nx>current</span><span class=p>,</span> <span class=p>(</span><span class=nx>newVal</span><span class=o>:</span> <span class=nx>number</span><span class=p>,</span> <span class=nx>oldVal</span><span class=o>:</span> <span class=nx>number</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>newVal</span> <span class=o>===</span> <span class=nx>oldVal</span><span class=p>)</span> <span class=k>return</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>range</span> <span class=o>&amp;&amp;</span> <span class=nx>range</span><span class=p>.</span><span class=nx>min</span> <span class=o>&amp;&amp;</span> <span class=nx>newVal</span> <span class=o>&lt;</span> <span class=nx>range</span><span class=p>.</span><span class=nx>min</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>current</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>range</span><span class=p>.</span><span class=nx>min</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=nx>range</span> <span class=o>&amp;&amp;</span> <span class=nx>range</span><span class=p>.</span><span class=nx>max</span> <span class=o>&amp;&amp;</span> <span class=nx>newVal</span> <span class=o>&gt;</span> <span class=nx>range</span><span class=p>.</span><span class=nx>max</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>current</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>range</span><span class=p>.</span><span class=nx>max</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>current</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>inc</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>dec</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>set</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>reset</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>分析源码</strong></p><p>这里首先是对 <code>hooks</code> 函数的入参类型和返回类型进行了定义，入参的 <code>Range</code> 和返回的 <code>Result</code> 分别用一个接口来指定，这样做了以后，最大的好处就是在使用 <code>useCount</code> 函数的时候，ide就会自动提示哪些参数是必填项，各个参数的类型是什么，防止业务逻辑出错。</p><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://pic2.zhimg.com/v2-b3bffccd67b28b5f41413189b0fc47c1_b.jpg data-srcset="https://pic2.zhimg.com/v2-b3bffccd67b28b5f41413189b0fc47c1_b.jpg, https://pic2.zhimg.com/v2-b3bffccd67b28b5f41413189b0fc47c1_b.jpg 1.5x, https://pic2.zhimg.com/v2-b3bffccd67b28b5f41413189b0fc47c1_b.jpg 2x" data-sizes=auto alt=https://pic2.zhimg.com/v2-b3bffccd67b28b5f41413189b0fc47c1_b.jpg title=img></p><p>接下来，在增加 <code>inc</code> 和减少 <code>dec</code> 的两个函数中增加了 <code>typeo</code> 类型守卫检查，因为传入的 <code>delta</code> 类型值在某些特定场景下不是很确定，比如在 <code>template</code> 中调用方法的话，类型检查可能会失效，传入的类型就是一个原生的 <code>Event</code> 。</p><p>关于 <code>ref</code> 类型值，这里并没有特别声明类型，因为 <code>vue3</code> 会进行自动类型推导，但如果是复杂类型的话可以采用类型断言的方式： <code>ref(initObj) as Ref&lt;ObjType></code></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-04-25</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/Notes/tags/typescript/>TypeScript</a>,&nbsp;<a href=/Notes/tags/javascript/>JavaScript</a>,&nbsp;<a href=/Notes/tags/%E5%89%8D%E7%AB%AF/>前端</a>,&nbsp;<a href=/Notes/tags/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/>快速入门</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/Notes/>主页</a></span></section></div><div class=post-nav><a href=/Notes/posts/machinelearning/machinelearning/ class=prev rel=prev title=机器学习><i class="fas fa-angle-left fa-fw"></i>机器学习</a>
<a href=/Notes/posts/linux/useful/screen/ class=next rel=next title=screen>screen<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>酒困路长惟欲睡，日高人渴漫思茶</div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2022</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/Notes/lib/katex/katex.min.css><link rel=stylesheet href=/Notes/lib/katex/copy-tex.min.css><script type=text/javascript src=/Notes/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/Notes/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/Notes/lib/lunr/lunr.min.js></script><script type=text/javascript src=/Notes/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/Notes/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=/Notes/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/Notes/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/Notes/lib/katex/katex.min.js></script><script type=text/javascript src=/Notes/lib/katex/auto-render.min.js></script><script type=text/javascript src=/Notes/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/Notes/lib/katex/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:45},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/Notes/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/Notes/lib/lunr/lunr.segmentit.js",maxResultLength:30,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/Notes/js/theme.min.js></script></body></html>