<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>正则表达式 - 伤心肠粉的酱油碟子</title><meta name=author content><meta name=author-link content><meta name=description content="正则表达式 清晰易懂版 单字符匹配 字符 功能 . 匹配任意1个字符（除了\n） [ ] 匹配[ ]"><meta name=keywords content="Python"><meta itemprop=name content="正则表达式"><meta itemprop=description content="正则表达式 清晰易懂版 单字符匹配 字符 功能 . 匹配任意1个字符（除了\n） [ ] 匹配[ ]"><meta itemprop=datePublished content="2021-04-17T00:00:00+00:00"><meta itemprop=dateModified content="2022-08-19T13:15:57+00:00"><meta itemprop=wordCount content="3514"><meta itemprop=image content="https://trouvaille0198.github.io/logo.png"><meta itemprop=keywords content="Python,"><meta property="og:title" content="正则表达式"><meta property="og:description" content="正则表达式 清晰易懂版 单字符匹配 字符 功能 . 匹配任意1个字符（除了\n） [ ] 匹配[ ]"><meta property="og:type" content="article"><meta property="og:url" content="https://trouvaille0198.github.io/Notes/posts/python/crawler/regularexpression/"><meta property="og:image" content="https://trouvaille0198.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-17T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-19T13:15:57+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://trouvaille0198.github.io/logo.png"><meta name=twitter:title content="正则表达式"><meta name=twitter:description content="正则表达式 清晰易懂版 单字符匹配 字符 功能 . 匹配任意1个字符（除了\n） [ ] 匹配[ ]"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#252627"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://trouvaille0198.github.io/Notes/posts/python/crawler/regularexpression/><link rel=prev href=https://trouvaille0198.github.io/Notes/posts/c#/basicgrammar/><link rel=next href=https://trouvaille0198.github.io/Notes/posts/python/crawler/xpath/><link rel=stylesheet href=/Notes/lib/normalize/normalize.min.css><link rel=stylesheet href=/Notes/css/style.min.css><link rel=stylesheet href=/Notes/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/Notes/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"正则表达式","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/python\/crawler\/regularexpression\/"},"genre":"posts","keywords":"Python","wordcount":3514,"url":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/python\/crawler\/regularexpression\/","datePublished":"2021-04-17T00:00:00+00:00","dateModified":"2022-08-19T13:15:57+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"MelonCholi"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子><span class=header-title-text>伤心肠粉</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/Notes/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/Notes/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/Notes/posts/>文章</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子><span class=header-title-text>伤心肠粉</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/Notes/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/Notes/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/Notes/posts/>文章</a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2><div class="toc-content always-active" id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>正则表达式</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle"></i>
MelonCholi</span></span>
<span class=post-category>收录于 <a href=/Notes/categories/python/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;Python</a></span></div><div class=post-meta-line><span title="2021-04-17 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-04-17>2021-04-17</time>
</span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 3514 字&nbsp;
<i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 8 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#清晰易懂版>清晰易懂版</a><ul><li><a href=#概念>概念</a></li><li><a href=#符号>符号</a><ul><li><a href=#普通字符>普通字符</a></li><li><a href=#非打印字符>非打印字符</a></li><li><a href=#特殊字符>特殊字符</a></li><li><a href=#限定符>限定符</a></li><li><a href=#定位符>定位符</a></li><li><a href=#选择>选择</a></li></ul></li><li><a href=#re-常用方法>re 常用方法</a><ul><li><a href=#match>match()</a></li><li><a href=#group>group()</a></li><li><a href=#匹配对象的方法>匹配对象的方法</a></li><li><a href=#修饰符>修饰符</a></li><li><a href=#search>search()</a></li><li><a href=#findall>findall()</a></li><li><a href=#sub>sub()</a></li><li><a href=#compile>compile()</a></li></ul></li><li><a href=#split>split()</a></li><li><a href=#escape>escape()</a></li></ul></li><li><a href=#常用模板>常用模板</a></li></ul></nav></div></div><div class=content id=content><h1 id=正则表达式>正则表达式</h1><h2 id=清晰易懂版>清晰易懂版</h2><p>单字符匹配</p><table><thead><tr><th><strong>字符</strong></th><th><strong>功能</strong></th></tr></thead><tbody><tr><td>.</td><td>匹配任意1个字符（除了\n）</td></tr><tr><td>[ ]</td><td>匹配[ ]中列举的字符</td></tr><tr><td>\d</td><td>匹配数字，即0-9</td></tr><tr><td>\D</td><td>匹配非数字，即不是数字</td></tr><tr><td>\s</td><td>匹配空白，即 空格，tab键</td></tr><tr><td>\S</td><td>匹配非空白</td></tr><tr><td>\w</td><td>匹配单词字符，即a-z、A-Z、0-9、_</td></tr><tr><td>\W</td><td>匹配非单词字符</td></tr></tbody></table><p><strong>匹配多个字符的相关格式</strong></p><table><thead><tr><th><strong>字符</strong></th><th><strong>功能</strong></th></tr></thead><tbody><tr><td>*</td><td>匹配前一个字符出现0次或者无限次，即可有可无</td></tr><tr><td>+</td><td>匹配前一个字符出现1次或者无限次，即至少有1次</td></tr><tr><td>?</td><td>匹配前一个字符出现1次或者0次，即要么有1次，要么没有</td></tr><tr><td>{m}</td><td>匹配前一个字符出现m次</td></tr><tr><td>{m,n}</td><td>匹配前一个字符出现从m到n次</td></tr></tbody></table><h3 id=概念>概念</h3><p>正则表达式 (regular expression) 描述了一种字符串匹配的模式（pattern），可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等</p><h3 id=符号>符号</h3><h4 id=普通字符>普通字符</h4><p>普通字符包括没有显式指定为元字符的所有可打印和不可打印字符。这包括所有大写和小写字母、所有数字、所有标点符号和一些其他符号</p><table><thead><tr><th><strong>字符</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>[ABC]</td><td>匹配 <strong>[&mldr;]</strong> 中的所有字符，例如 <strong>[aeiou]</strong> 匹配字符串 &ldquo;google runoob taobao&rdquo; 中所有的 e o u a 字母。 <img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192920315.png data-srcset="https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192920315.png, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192920315.png 1.5x, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192920315.png 2x" data-sizes=auto alt=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192920315.png title=image-20201206192920315></td></tr><tr><td>[^ABC]</td><td>匹配除了 <strong>[&mldr;]</strong> 中字符的所有字符，例如 <strong>[^aeiou]</strong> 匹配字符串 &ldquo;google runoob taobao&rdquo; 中除了 e o u a 字母的所有字母 <img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193003594.png data-srcset="https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193003594.png, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193003594.png 1.5x, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193003594.png 2x" data-sizes=auto alt=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193003594.png title=image-20201206193003594></td></tr><tr><td>[A-Z]</td><td>[A-Z] 表示一个区间，匹配所有大写字母，[a-z] 表示所有小写字母 <img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192825611.png data-srcset="https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192825611.png, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192825611.png 1.5x, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192825611.png 2x" data-sizes=auto alt=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206192825611.png title=image-20201206192825611></td></tr><tr><td><strong>.</strong></td><td>匹配除换行符（\n、\r）之外的任何单个字符，相等于 [^\n\r] <img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193042154.png data-srcset="https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193042154.png, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193042154.png 1.5x, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193042154.png 2x" data-sizes=auto alt=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193042154.png title=image-20201206193042154></td></tr><tr><td>[\s\S]</td><td>匹配所有。\s 是匹配所有空白符，包括换行，\S 非空白符，包括换行。 <img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193101636.png data-srcset="https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193101636.png, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193101636.png 1.5x, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193101636.png 2x" data-sizes=auto alt=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193101636.png title=image-20201206193101636></td></tr><tr><td>\w</td><td>匹配字母、数字、下划线。等价于 [A-Za-z0-9_] <img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193134832.png data-srcset="https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193134832.png, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193134832.png 1.5x, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193134832.png 2x" data-sizes=auto alt=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206193134832.png title=image-20201206193134832></td></tr></tbody></table><h4 id=非打印字符>非打印字符</h4><table><thead><tr><th><strong>字符</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>\cx</td><td>匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 &lsquo;c&rsquo; 字符。</td></tr><tr><td>\f</td><td>匹配一个换页符。等价于 \x0c 和 \cL。</td></tr><tr><td>\n</td><td>匹配一个换行符。等价于 \x0a 和 \cJ。</td></tr><tr><td>\r</td><td>匹配一个回车符。等价于 \x0d 和 \cM。</td></tr><tr><td>\s</td><td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意 Unicode 正则表达式会匹配全角空格符。</td></tr><tr><td>\S</td><td>匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。</td></tr><tr><td>\t</td><td>匹配一个制表符。等价于 \x09 和 \cI。</td></tr><tr><td>\v</td><td>匹配一个垂直制表符。等价于 \x0b 和 \cK。</td></tr></tbody></table><h4 id=特殊字符>特殊字符</h4><p>许多元字符要求在试图匹配它们时特别对待。若要匹配这些特殊字符，必须首先使字符"转义"，即，将反斜杠字符**\** 放在它们前面</p><table><thead><tr><th><strong>特别字符</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>$</td><td>匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 &lsquo;\n&rsquo; 或 &lsquo;\r&rsquo;。</td></tr><tr><td>( )</td><td>标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。</td></tr><tr><td>*</td><td>匹配前面的子表达式零次或多次。</td></tr><tr><td>+</td><td>匹配前面的子表达式一次或多次。</td></tr><tr><td>.</td><td>匹配除换行符 \n 之外的任何单字符。</td></tr><tr><td>[</td><td>标记一个中括号表达式的开始。</td></tr><tr><td>?</td><td>匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。</td></tr><tr><td>\</td><td>将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， &rsquo;n&rsquo; 匹配字符 &rsquo;n&rsquo;。&rsquo;\n&rsquo; 匹配换行符。序列 &lsquo;\&rsquo; 匹配 &ldquo;"，而 &lsquo;(&rsquo; 则匹配 &ldquo;("。</td></tr><tr><td>^</td><td>匹配输入字符串的开始位置，除非在方括号表达式中使用，当该符号在方括号表达式中使用时，表示不接受该方括号表达式中的字符集合。</td></tr><tr><td>{</td><td>标记限定符表达式的开始。</td></tr><tr><td>|</td><td>指明两项之间的一个选择。</td></tr></tbody></table><h4 id=限定符>限定符</h4><p>限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 ***** 或 <strong>+</strong> 或 <strong>?</strong> 或 <strong>{n}</strong> 或 <strong>{n,}</strong> 或 <strong>{n,m}</strong> 共 6 种</p><table><thead><tr><th><strong>字符</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>*</td><td>匹配前面的子表达式零次或多次。例如，zo* 能匹配 &ldquo;z&rdquo; 以及 &ldquo;zoo&rdquo;。* 等价于{0,}。</td></tr><tr><td>+</td><td>匹配前面的子表达式一次或多次。例如，&lsquo;zo+&rsquo; 能匹配 &ldquo;zo&rdquo; 以及 &ldquo;zoo&rdquo;，但不能匹配 &ldquo;z&rdquo;。+ 等价于 {1,}。</td></tr><tr><td>?</td><td>匹配前面的子表达式零次或一次。例如，&ldquo;do(es)?&rdquo; 可以匹配 &ldquo;do&rdquo; 、 &ldquo;does&rdquo; 中的 &ldquo;does&rdquo; 、 &ldquo;doxy&rdquo; 中的 &ldquo;do&rdquo; 。? 等价于 {0,1}。</td></tr><tr><td>{n}</td><td>n 是一个非负整数。匹配确定的 n 次。例如，&lsquo;o{2}&rsquo; 不能匹配 &ldquo;Bob&rdquo; 中的 &lsquo;o&rsquo;，但是能匹配 &ldquo;food&rdquo; 中的两个 o。</td></tr><tr><td>{n,}</td><td>n 是一个非负整数。至少匹配n 次。例如，&lsquo;o{2,}&rsquo; 不能匹配 &ldquo;Bob&rdquo; 中的 &lsquo;o&rsquo;，但能匹配 &ldquo;foooood&rdquo; 中的所有 o。&lsquo;o{1,}&rsquo; 等价于 &lsquo;o+&rsquo;。&lsquo;o{0,}&rsquo; 则等价于 &lsquo;o*&rsquo;。</td></tr><tr><td>{n,m}</td><td>m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，&ldquo;o{1,3}&rdquo; 将匹配 &ldquo;fooooood&rdquo; 中的前三个 o。&lsquo;o{0,1}&rsquo; 等价于 &lsquo;o?&rsquo;。请注意在逗号和两个数之间不能有空格。</td></tr></tbody></table><h4 id=定位符>定位符</h4><p>定位符用来描述字符串或单词的边界，<strong>^</strong> 和 <strong>$</strong> 分别指字符串的开始与结束，<strong>\b</strong> 描述单词的前或后边界，<strong>\B</strong> 表示非单词边界</p><table><thead><tr><th><strong>字符</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>^</td><td>匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。</td></tr><tr><td>$</td><td>匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。</td></tr><tr><td>\b</td><td>匹配一个单词边界，即字与空格间的位置。</td></tr><tr><td>\B</td><td>非单词边界匹配。</td></tr></tbody></table><p><strong>注意</strong></p><ol><li>不能将限定符与定位符一起使用。由于在紧靠换行或者单词边界的前面或后面不能有一个以上位置，因此不允许诸如 <strong>^*</strong> 之类的表达式。</li><li>若要匹配一行文本开始处的文本，请在正则表达式的开始使用 <strong>^</strong> 字符。不要将 <strong>^</strong> 的这种用法与中括号表达式内的用法混淆。</li><li>若要匹配一行文本的结束处的文本，请在正则表达式的结束处使用 <strong>$</strong> 字符。</li><li><strong>\b</strong> 字符的位置是非常重要的。如果它位于要匹配的字符串的开始，它在单词的开始处查找匹配项。如果它位于字符串的结尾，它在单词的结尾处查找匹配项</li><li>对于 <strong>\B</strong> 非单词边界运算符，位置并不重要，因为匹配不关心究竟是单词的开头还是结尾</li></ol><h4 id=选择>选择</h4><p>用圆括号 <strong>()</strong> 将所有选择项括起来，相邻的选择项之间用 <strong>|</strong> 分隔。</p><p><strong>()</strong> 表示捕获分组，<strong>()</strong> 会把每个分组里的匹配的值保存起来， 多个匹配值可以通过数字 n 来查看(<strong>n</strong> 是一个数字，表示第 n 个捕获组的内容)</p><h3 id=re-常用方法>re 常用方法</h3><h4 id=match>match()</h4><p><em><strong>re.match(pattern, string, flags=0)</strong></em></p><p><code>match()</code> 尝试从字符串的<strong>起始位置</strong>匹配正则表达式，若匹配，就返回匹配成功的结果；若不匹配，返回 None</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=n>content</span> <span class=o>=</span> <span class=s1>&#39;Hello 123 4567 World_This is a Regex Demo&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>content</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=s1>&#39;^Hello\s\d\d\d\s\d</span><span class=si>{4}</span><span class=s1>\s\w</span><span class=si>{10}</span><span class=s1>&#39;</span><span class=p>,</span> <span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>group</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>span</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>41
</span></span><span class=line><span class=cl>&lt;_sre.SRE_Match object; span=(0, 25), match=&#39;Hello 123 4567 World_This&#39;&gt;
</span></span><span class=line><span class=cl>Hello 123 4567 World_This
</span></span><span class=line><span class=cl>(0, 25)
</span></span></code></pre></td></tr></table></div></div><p>步骤</p><ol><li><p>在<code>match()</code>方法中，第一个参数传入了正则表达式，第二个参数传入了要匹配的字符串</p></li><li><p><code>group()</code>方法可以输出匹配到的内容，结果是<code>Hello 123 4567 World_This</code></p><p><code>span()</code>方法可以输出匹配的范围，结果是<code>(0, 25)</code></p></li></ol><p>也可这样写</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=s1>&#39;^Hello.*Demo$&#39;</span><span class=p>,</span> <span class=n>content</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=group>group()</h4><p>使用 <code>()</code> 括号将想提取的子字符串括起来</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=n>content</span> <span class=o>=</span> <span class=s1>&#39;Hello 1234567 World_This is a Regex Demo&#39;</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=s1>&#39;^Hello\s(\d+)\sWorld&#39;</span><span class=p>,</span> <span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>group</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>span</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;_sre.SRE_Match object; span=(0, 19), match=&#39;Hello 1234567 World&#39;&gt;
</span></span><span class=line><span class=cl>Hello 1234567 World
</span></span><span class=line><span class=cl>1234567
</span></span><span class=line><span class=cl>(0, 19)
</span></span></code></pre></td></tr></table></div></div><p>若想把字符串中的 1234567 提取出来，此时可以将数字部分的正则表达式用()括起来，然后调用了 group(1)获取匹配结果</p><p>也可这样写</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=s1>&#39;^He.*?(\d+).*Demo$&#39;</span><span class=p>,</span> <span class=n>content</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=匹配对象的方法>匹配对象的方法</h4><ul><li><em><strong>start([group])</strong></em><ul><li>获取分组匹配的子串在整个字符串中的起始位置（子串第一个字符的索引）</li></ul></li><li><em><strong>end([group])</strong></em><ul><li>获取分组匹配的子串在整个字符串中的结束位置（子串最后一个字符的索引 +1）</li></ul></li><li><em><strong>group()</strong></em><ul><li><code>group()</code> 同 <code>group(0)</code> 返回匹配正则表达式整体结果（字符串）</li><li><code>group(n)</code> 列出第 n 个括号匹配部分</li></ul></li><li><em><strong>span([group])</strong></em><ul><li>返回 <code>(start(group), end(group))</code></li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>pattern</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;\d+&#39;</span><span class=p>)</span>   
</span></span><span class=line><span class=cl><span class=n>m</span> <span class=o>=</span> <span class=n>pattern</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=s1>&#39;one12twothree34four&#39;</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span> <span class=c1># 从&#39;1&#39;的位置开始匹配，正好匹配</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span> <span class=n>m</span>                                         <span class=c1># 返回一个 Match 对象</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>_sre</span><span class=o>.</span><span class=n>SRE_Match</span> <span class=nb>object</span> <span class=n>at</span> <span class=mh>0x10a42aac0</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>m</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>   <span class=c1># 可省略 0</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;12&#39;</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>m</span><span class=o>.</span><span class=n>start</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>   <span class=c1># 可省略 0</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>m</span><span class=o>.</span><span class=n>end</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>     <span class=c1># 可省略 0</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>m</span><span class=o>.</span><span class=n>span</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>    <span class=c1># 可省略 0</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=修饰符>修饰符</h4><p>遇到换行符时，使用修饰符<code>re.S</code>进行匹配，即可用“.”匹配换行符</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=s1>&#39;^He.*?(\d+).*?Demo$&#39;</span><span class=p>,</span> <span class=n>content</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>S</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>其他常用修饰符</p><p><img class=lazyload src=/Notes/svg/loading.min.svg data-src=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206194553409.png data-srcset="https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206194553409.png, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206194553409.png 1.5x, https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206194553409.png 2x" data-sizes=auto alt=https://trou.oss-cn-shanghai.aliyuncs.com/img/image-20201206194553409.png title=image-20201206194553409></p><h4 id=search>search()</h4><p><code>match()</code>方法是从字符串的开头开始匹配的，一旦开头不匹配，那么整个匹配就失败了</p><p><code>search()</code>，它在匹配时会扫描整个字符串，然后返回第一个成功匹配的结果，搜索完了还没有找到，就返回 None</p><p>为了匹配方便，尽量使用<code>search()</code>方法</p><h4 id=findall>findall()</h4><p>在字符串中找到正则表达式所匹配的所有子串，并返回一个列表，如果没有找到匹配的，则返回空列表。</p><p>注意**：** match 和 search 是匹配一次；findall 匹配所有。</p><h4 id=sub>sub()</h4><p>替换指定文本</p><p>如要将文本中的数字去掉</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=n>content</span> <span class=o>=</span> <span class=s1>&#39;54aK54yr5oiR54ix5L2g&#39;</span>
</span></span><span class=line><span class=cl><span class=n>content</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=s1>&#39;\d+&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>content</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>aKyroiRixLg
</span></span></code></pre></td></tr></table></div></div><p>只需要给第一个参数传入\d+来匹配所有的数字，第二个参数为替换成的字符串（如果去掉该参数的话，可以赋值为空），第三个参数是原字符串</p><h4 id=compile>compile()</h4><p>编译正则表达式，生成一个正则表达式 (Pattern) 对象，供 <code>match()</code> 和 <code>search()</code> 使用</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=n>content1</span> <span class=o>=</span> <span class=s1>&#39;2016-12-15 12:00&#39;</span>
</span></span><span class=line><span class=cl><span class=n>content2</span> <span class=o>=</span> <span class=s1>&#39;2016-12-17 12:55&#39;</span>
</span></span><span class=line><span class=cl><span class=n>content3</span> <span class=o>=</span> <span class=s1>&#39;2016-12-22 13:21&#39;</span>
</span></span><span class=line><span class=cl><span class=n>pattern</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=s1>&#39;\d</span><span class=si>{2}</span><span class=s1>:\d</span><span class=si>{2}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>result1</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>content1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>result2</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>content2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>result3</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>content3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=n>result3</span> <span class=o>=</span> <span class=n>pattern</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span><span class=n>content3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result1</span><span class=p>,</span> <span class=n>result2</span><span class=p>,</span> <span class=n>result3</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>2016-12-15  2016-12-17  2016-12-22
</span></span></code></pre></td></tr></table></div></div><p>例如，这里有 3 个日期，我们想分别将 3 个日期中的时间去掉，这时可以借助<code>sub()</code>方法。该方法的第一个参数是正则表达式，但是这里没有必要重复写 3 个同样的正则表达式，此时可以借助<code>compile()</code>方法将正则表达式编译成一个正则表达式对象，以便复用</p><h3 id=split>split()</h3><h3 id=escape>escape()</h3><h2 id=常用模板>常用模板</h2></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2022-08-19 13:15:57">更新于 2022-08-19</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://trouvaille0198.github.io/Notes/posts/python/crawler/regularexpression/ data-title=正则表达式 data-hashtags=Python><i class="fa-brands fa-twitter fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://trouvaille0198.github.io/Notes/posts/python/crawler/regularexpression/ data-hashtag=Python><i class="fa-brands fa-facebook-square fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://trouvaille0198.github.io/Notes/posts/python/crawler/regularexpression/ data-title=正则表达式><i class="fa-brands fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw"></i>&nbsp;<a href=/Notes/tags/python/>Python</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/Notes/>主页</a></span></section></div><div class=post-nav><a href=/Notes/posts/c#/basicgrammar/ class=prev rel=prev title="C# 基础语法"><i class="fa-solid fa-angle-left fa-fw"></i>C# 基础语法</a>
<a href=/Notes/posts/python/crawler/xpath/ class=next rel=next title=Xpath>Xpath<i class="fa-solid fa-angle-right fa-fw"></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom">酒困路长惟欲睡，日高人渴漫思茶</div><div class="footer-line copyright"><i class="fa-regular fa-copyright fa-fw"></i>
<span itemprop=copyrightYear>2022</span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fa-solid fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fa-solid fa-comment fa-fw"></i></a></div><div id=mask></div></div><link rel=stylesheet href=/Notes/lib/katex/katex.min.css><link rel=stylesheet href=/Notes/lib/katex/copy-tex.min.css><link rel=stylesheet href=/Notes/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/Notes/lib/autocomplete/autocomplete.min.js defer></script><script type=text/javascript src=/Notes/lib/lunr/lunr.min.js defer></script><script type=text/javascript src=/Notes/lib/lunr/lunr.stemmer.support.min.js defer></script><script type=text/javascript src=/Notes/lib/lunr/lunr.zh.min.js defer></script><script type=text/javascript src=/Notes/lib/lazysizes/lazysizes.min.js async defer></script><script type=text/javascript src=/Notes/lib/sharer/sharer.min.js async defer></script><script type=text/javascript src=/Notes/lib/katex/katex.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/Notes/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:45},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/Notes/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/Notes/lib/lunr/lunr.segmentit.js",maxResultLength:30,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/Notes/js/theme.min.js defer></script><script type=text/javascript src=/Notes/js/_custom.min.js defer></script></body></html>