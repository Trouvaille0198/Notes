<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Python rich 库 - Progress Display - 伤心肠粉的酱油碟子</title><meta name=author content><meta name=author-link content><meta name=description content="Progress Display Rich 可以将持续更新信息的进度可视化。 显示的信息是可配置的，默认会显示 &ldqu"><meta name=keywords content="Python"><meta itemprop=name content="Python rich 库 - Progress Display"><meta itemprop=description content="Progress Display Rich 可以将持续更新信息的进度可视化。 显示的信息是可配置的，默认会显示 &ldqu"><meta itemprop=datePublished content="2022-12-02T00:00:00+00:00"><meta itemprop=dateModified content="2023-08-02T10:22:00+00:00"><meta itemprop=wordCount content="2396"><meta itemprop=image content="https://trouvaille0198.github.io/logo.png"><meta itemprop=keywords content="Python,"><meta property="og:title" content="Python rich 库 - Progress Display"><meta property="og:description" content="Progress Display Rich 可以将持续更新信息的进度可视化。 显示的信息是可配置的，默认会显示 &ldqu"><meta property="og:type" content="article"><meta property="og:url" content="https://trouvaille0198.github.io/Notes/posts/python/%E5%8F%AF%E8%A7%86%E5%8C%96/rich/progress-display/"><meta property="og:image" content="https://trouvaille0198.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-02T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-02T10:22:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://trouvaille0198.github.io/logo.png"><meta name=twitter:title content="Python rich 库 - Progress Display"><meta name=twitter:description content="Progress Display Rich 可以将持续更新信息的进度可视化。 显示的信息是可配置的，默认会显示 &ldqu"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#252627"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://trouvaille0198.github.io/Notes/posts/python/%E5%8F%AF%E8%A7%86%E5%8C%96/rich/progress-display/><link rel=prev href=https://trouvaille0198.github.io/Notes/posts/python/%E5%8F%AF%E8%A7%86%E5%8C%96/rich/tables/><link rel=next href=https://trouvaille0198.github.io/Notes/posts/python/%E5%8F%AF%E8%A7%86%E5%8C%96/rich/prompt/><link rel=stylesheet href=/Notes/lib/normalize/normalize.min.css><link rel=stylesheet href=/Notes/css/style.min.css><link rel=stylesheet href=/Notes/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/Notes/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Python rich 库 - Progress Display","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/python\/%E5%8F%AF%E8%A7%86%E5%8C%96\/rich\/progress-display\/"},"genre":"posts","keywords":"Python","wordcount":2396,"url":"https:\/\/trouvaille0198.github.io\/Notes\/posts\/python\/%E5%8F%AF%E8%A7%86%E5%8C%96\/rich\/progress-display\/","datePublished":"2022-12-02T00:00:00+00:00","dateModified":"2023-08-02T10:22:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"MelonCholi"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子><span class=header-title-text>伤心肠粉</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/Notes/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/Notes/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/Notes/posts/>文章</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/Notes/ title=伤心肠粉的酱油碟子><span class=header-title-text>伤心肠粉</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/Notes/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/Notes/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/Notes/posts/>文章</a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2><div class="toc-content always-active" id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Python rich 库 - Progress Display</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle"></i>
MelonCholi</span></span>
<span class=post-category>收录于 <a href=/Notes/categories/python/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;Python</a></span></div><div class=post-meta-line><span title="2022-12-02 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2022-12-02>2022-12-02</time>
</span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 2396 字&nbsp;
<i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 5 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#basic-usage>Basic Usage</a></li><li><a href=#advanced-usage>Advanced usage</a><ul><li><a href=#updating-tasks>Updating tasks</a></li><li><a href=#hiding-tasks>Hiding tasks</a></li><li><a href=#transient-progress>Transient progress</a></li><li><a href=#indeterminate-progress>Indeterminate progress</a></li><li><a href=#auto-refresh>Auto refresh</a></li><li><a href=#expand>Expand</a></li><li><a href=#columns>Columns</a></li><li><a href=#table-columns>Table Columns</a></li><li><a href=#print--log>Print / log</a></li><li><a href=#redirecting-stdout--stderr>Redirecting stdout / stderr</a></li><li><a href=#customizing>Customizing</a></li><li><a href=#reading-from-a-file>Reading from a file</a></li></ul></li><li><a href=#multiple-progress>Multiple Progress</a></li><li><a href=#example>Example</a></li></ul></nav></div></div><div class=content id=content><h1 id=progress-display>Progress Display</h1><p>Rich 可以将持续更新信息的进度可视化。</p><p>显示的信息是可配置的，默认会显示 &ldquo;任务 &ldquo;的描述、进度条、完成百分比和预计剩余时间（a description of the ‘task’, a progress bar, percentage complete, and estimated time remaining）</p><p>Progress Display 显示支持多个任务，每个任务都有一个条和进度信息。你可以用它来跟踪工作在线程或进程中进行的并发任务。</p><p>To see how the progress display looks, try this from the command line:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python -m rich.progress
</span></span></code></pre></td></tr></table></div></div><blockquote><p>Progress works with Jupyter notebooks, with the caveat that auto-refresh is disabled. You will need to explicitly call <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.refresh target=_blank rel="external nofollow noopener noreferrer"><code>refresh()</code></a> or set <code>refresh=True</code> when calling <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.update target=_blank rel="external nofollow noopener noreferrer"><code>update()</code></a>. Or use the <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.track target=_blank rel="external nofollow noopener noreferrer"><code>track()</code></a> function which does a refresh automatically on each loop.</p></blockquote><h2 id=basic-usage>Basic Usage</h2><p>使用 <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.track target=_blank rel="external nofollow noopener noreferrer"><code>track()</code></a>，它接收一个序列（a sequence，such as a list or range object）和描述（可选）</p><p>The track function will yield values from the sequence and update the progress information on each iteration. Here’s an example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rich.progress</span> <span class=kn>import</span> <span class=n>track</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>track</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span> <span class=n>description</span><span class=o>=</span><span class=s2>&#34;Processing...&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>  <span class=c1># Simulate work being done</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=advanced-usage>Advanced usage</h2><p>如果你需要多任务功能，或者想要自定义进度条，你可以直接使用 <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress target=_blank rel="external nofollow noopener noreferrer"><code>Progress</code></a> 类</p><p>Progress 实例拥有一些方法</p><ul><li>add task(s) with <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.add_task target=_blank rel="external nofollow noopener noreferrer"><code>add_task()</code></a></li><li>update progress with <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.update target=_blank rel="external nofollow noopener noreferrer"><code>update()</code></a></li></ul><p>The Progress class is designed to be used as a <em>context manager</em> which will start and stop the progress display automatically.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rich.progress</span> <span class=kn>import</span> <span class=n>Progress</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>Progress</span><span class=p>()</span> <span class=k>as</span> <span class=n>progress</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>task1</span> <span class=o>=</span> <span class=n>progress</span><span class=o>.</span><span class=n>add_task</span><span class=p>(</span><span class=s2>&#34;[red]Downloading...&#34;</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=mi>1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>task2</span> <span class=o>=</span> <span class=n>progress</span><span class=o>.</span><span class=n>add_task</span><span class=p>(</span><span class=s2>&#34;[green]Processing...&#34;</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=mi>1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>task3</span> <span class=o>=</span> <span class=n>progress</span><span class=o>.</span><span class=n>add_task</span><span class=p>(</span><span class=s2>&#34;[cyan]Cooking...&#34;</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=mi>1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=ow>not</span> <span class=n>progress</span><span class=o>.</span><span class=n>finished</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>progress</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>task1</span><span class=p>,</span> <span class=n>advance</span><span class=o>=</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>progress</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>task2</span><span class=p>,</span> <span class=n>advance</span><span class=o>=</span><span class=mf>0.3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>progress</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>task3</span><span class=p>,</span> <span class=n>advance</span><span class=o>=</span><span class=mf>0.9</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.02</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>total</code> 参数是必须完成的步骤数，以使进度达到 100%。在这种情况下，一个 step 对你的应用程序来说是任何有意义的；它可以是读取文件的字节数，或处理图像的数量（A <em>step</em> in this context is whatever makes sense for your application; it could be number of bytes of a file read, or number of images processed, etc.）</p><h3 id=updating-tasks>Updating tasks</h3><p>当你调用 <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.add_task target=_blank rel="external nofollow noopener noreferrer"><code>add_task()</code></a> 是你会得到一个 Task ID. Use this ID to call <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.update target=_blank rel="external nofollow noopener noreferrer"><code>update()</code></a> whenever you have completed some work, or any information has changed.</p><p>Typically you will need to update <code>completed</code> every time you have completed a step. You can do this by updated <code>completed</code> directly or by setting <code>advance</code> which will add to the current <code>completed</code> value.</p><p>The <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.update target=_blank rel="external nofollow noopener noreferrer"><code>update()</code></a> method collects keyword arguments which are also associated with the task. Use this to supply any additional information you would like to render in the progress display. The additional arguments are stored in <code>task.fields</code> and may be referenced in <a href=https://rich.readthedocs.io/en/stable/progress.html#columns target=_blank rel="external nofollow noopener noreferrer">Column classes</a>.</p><h3 id=hiding-tasks>Hiding tasks</h3><p>通过修改 task 的 <code>visible</code> 值，你可以自由地显示或隐藏 task：calling <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.add_task target=_blank rel="external nofollow noopener noreferrer"><code>add_task()</code></a> with <code>visible=False</code>.</p><h3 id=transient-progress>Transient progress</h3><p>一般情况下，当你退出 progress context manager (or call <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.stop target=_blank rel="external nofollow noopener noreferrer"><code>stop()</code></a>) 时，最后一次刷新的显示仍然在终端中，光标在下一行</p><p>You can also make the progress display disappear on exit by setting <code>transient=True</code> on the Progress constructor.</p><p>Here’s an example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=k>with</span> <span class=n>Progress</span><span class=p>(</span><span class=n>transient</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>as</span> <span class=n>progress</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>task</span> <span class=o>=</span> <span class=n>progress</span><span class=o>.</span><span class=n>add_task</span><span class=p>(</span><span class=s2>&#34;Working&#34;</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>do_work</span><span class=p>(</span><span class=n>task</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>Transient progress displays are useful if you want more minimal output in the terminal when tasks are complete.</p><h3 id=indeterminate-progress>Indeterminate progress</h3><p>当你添加一个任务时，它会自动启动，这意味着它将在 0% 的时候显示一个进度条，剩余时间将从当前时间计算出来。</p><p>如果在你开始更新进度之前要停留很长时间，效果就并不好了（你可能需要等待服务器的响应或计算目录中的文件）</p><p>在这些情况下，你可以用 <code>start=False</code> 或 <code>total=None</code> 来调用 <code>add_task()</code>，这将显示一个脉冲动画，让用户知道一些事情正在进行。这就是所谓的不确定的进度条 （Indeterminate progress）</p><p>当你有了步骤数后，你可以调用 <code>start_task()</code>，这将显示 0% 的进度条，然后像平常一样 <code>update()</code></p><h3 id=auto-refresh>Auto refresh</h3><p>默认情况下，进度信息将每秒刷新 10 次</p><p>你可以通过 <code>Progress</code> 构造函数的 <code>refresh_per_second</code> 参数来设置刷新率。如果你知道你的更新不会那么频繁，你应该把这个参数设置为低于 10 的参数。</p><p>如果你的更新不是很频繁，你可能想完全禁用自动刷新，你可以通过在构造函数中设置 <code>auto_refresh=False</code> 来实现。如果你禁用了自动刷新，你将需要在更新任务后手动调用 <code>refresh()</code></p><h3 id=expand>Expand</h3><p>进度条将只使用终端的宽度来显示任务信息</p><p>如果您在 <code>Progress</code> 构造函数上设置了 <code>expand</code> 参数，那么 Rich 将把进度条显示拉伸到全部可用宽度</p><h3 id=columns>Columns</h3><p>你可以通过 <code>Progress</code> 构造函数的位置参数来定制进度显示中的列。列被指定为一个格式字符串（ <em>format string</em>）或一个 <code>ProgressColumn</code> 对象。</p><p>格式字符串将以一个单一的值 &ldquo;task &ldquo;呈现，它将是一个 <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Task target=_blank rel="external nofollow noopener noreferrer"><code>Task</code></a> instance。</p><p>例如，<code>"{task.description}"</code> 将在列中显示任务描述，而 <code>"{task.completed} of {task.total}"</code> 将显示总步骤中多少已经完成。</p><p>通过关键字参数传递给 ~rich.progress.Progress.update 的额外字段被存储在 task.fields 中。你可以用以下语法将它们添加到格式字符串中。<code>"extra info: {task.fields[extra]}"</code>.</p><p>The default columns are equivalent to the following:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>progress</span> <span class=o>=</span> <span class=n>Progress</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>TextColumn</span><span class=p>(</span><span class=s2>&#34;[progress.description]</span><span class=si>{task.description}</span><span class=s2>&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>BarColumn</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=n>TaskProgressColumn</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=n>TimeRemainingColumn</span><span class=p>(),</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>To create a Progress with your own columns in addition to the defaults, use <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.get_default_columns target=_blank rel="external nofollow noopener noreferrer"><code>get_default_columns()</code></a>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>progress</span> <span class=o>=</span> <span class=n>Progress</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>SpinnerColumn</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=n>Progress</span><span class=o>.</span><span class=n>get_default_columns</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=n>TimeElapsedColumn</span><span class=p>(),</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>The following column objects are available:</p><ul><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.BarColumn target=_blank rel="external nofollow noopener noreferrer"><code>BarColumn</code></a> Displays the bar.</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.TextColumn target=_blank rel="external nofollow noopener noreferrer"><code>TextColumn</code></a> Displays text.</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.TimeElapsedColumn target=_blank rel="external nofollow noopener noreferrer"><code>TimeElapsedColumn</code></a> Displays the time elapsed.</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.TimeRemainingColumn target=_blank rel="external nofollow noopener noreferrer"><code>TimeRemainingColumn</code></a> Displays the estimated time remaining.</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.MofNCompleteColumn target=_blank rel="external nofollow noopener noreferrer"><code>MofNCompleteColumn</code></a> Displays completion progress as <code>"{task.completed}/{task.total}"</code> (works best if completed and total are ints).</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.FileSizeColumn target=_blank rel="external nofollow noopener noreferrer"><code>FileSizeColumn</code></a> Displays progress as file size (assumes the steps are bytes).</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.TotalFileSizeColumn target=_blank rel="external nofollow noopener noreferrer"><code>TotalFileSizeColumn</code></a> Displays total file size (assumes the steps are bytes).</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.DownloadColumn target=_blank rel="external nofollow noopener noreferrer"><code>DownloadColumn</code></a> Displays download progress (assumes the steps are bytes).</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.TransferSpeedColumn target=_blank rel="external nofollow noopener noreferrer"><code>TransferSpeedColumn</code></a> Displays transfer speed (assumes the steps are bytes.</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.SpinnerColumn target=_blank rel="external nofollow noopener noreferrer"><code>SpinnerColumn</code></a> Displays a “spinner” animation.</li><li><a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.RenderableColumn target=_blank rel="external nofollow noopener noreferrer"><code>RenderableColumn</code></a> Displays an arbitrary Rich renderable in the column.</li></ul><p>To implement your own columns, extend the <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.ProgressColumn target=_blank rel="external nofollow noopener noreferrer"><code>ProgressColumn</code></a> class and use it as you would the other columns.</p><h3 id=table-columns>Table Columns</h3><p>Rich 为 Progress 实例中的任务建立了一个 <code>Table</code>。你可以通过在 <code>Column</code> 构造函数中指定 <code>table_column</code> 参数来定制该任务表的列的创建方式，该参数应该是一个 Column 实例。</p><p>下面的例子演示了一个进度条，其中描述占据了终端宽度的三分之一，而进度条占据了其余的三分之二。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>time</span> <span class=kn>import</span> <span class=n>sleep</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rich.table</span> <span class=kn>import</span> <span class=n>Column</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rich.progress</span> <span class=kn>import</span> <span class=n>Progress</span><span class=p>,</span> <span class=n>BarColumn</span><span class=p>,</span> <span class=n>TextColumn</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>text_column</span> <span class=o>=</span> <span class=n>TextColumn</span><span class=p>(</span><span class=s2>&#34;</span><span class=si>{task.description}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>table_column</span><span class=o>=</span><span class=n>Column</span><span class=p>(</span><span class=n>ratio</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>bar_column</span> <span class=o>=</span> <span class=n>BarColumn</span><span class=p>(</span><span class=n>bar_width</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>table_column</span><span class=o>=</span><span class=n>Column</span><span class=p>(</span><span class=n>ratio</span><span class=o>=</span><span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>progress</span> <span class=o>=</span> <span class=n>Progress</span><span class=p>(</span><span class=n>text_column</span><span class=p>,</span> <span class=n>bar_column</span><span class=p>,</span> <span class=n>expand</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>progress</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>progress</span><span class=o>.</span><span class=n>track</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>        <span class=n>progress</span><span class=o>.</span><span class=n>print</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=print--log>Print / log</h3><p>Progress 类将创建一个内部的 Console 对象，你可以通过 <code>progress.console</code> 访问。如果你打印或记录到这个控制台，输出将显示在 progress display 的上方。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=k>with</span> <span class=n>Progress</span><span class=p>()</span> <span class=k>as</span> <span class=n>progress</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>task</span> <span class=o>=</span> <span class=n>progress</span><span class=o>.</span><span class=n>add_task</span><span class=p>(</span><span class=s2>&#34;twiddling thumbs&#34;</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>job</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>progress</span><span class=o>.</span><span class=n>console</span><span class=o>.</span><span class=n>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Working on job #</span><span class=si>{</span><span class=n>job</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>run_job</span><span class=p>(</span><span class=n>job</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>progress</span><span class=o>.</span><span class=n>advance</span><span class=p>(</span><span class=n>task</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>If you have another Console object you want to use, pass it in to the <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress target=_blank rel="external nofollow noopener noreferrer"><code>Progress</code></a> constructor. Here’s an example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>my_project</span> <span class=kn>import</span> <span class=n>my_console</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>Progress</span><span class=p>(</span><span class=n>console</span><span class=o>=</span><span class=n>my_console</span><span class=p>)</span> <span class=k>as</span> <span class=n>progress</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>my_console</span><span class=o>.</span><span class=n>print</span><span class=p>(</span><span class=s2>&#34;[bold blue]Starting work!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>do_work</span><span class=p>(</span><span class=n>progress</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=redirecting-stdout--stderr>Redirecting stdout / stderr</h3><p>为了避免破坏进度显示的视觉效果，Rich 会重定向 <code>stdout</code> 和 <code>stderr</code>，以便你可以使用内置的打印语句。这个功能默认是启用的，但你可以通过设置 <code>redirect_stdout</code> 或 <code>redirect_stderr</code> 为 <code>False</code> 来禁用。</p><h3 id=customizing>Customizing</h3><p>如果 Progress 类没有提供你所需要的 progress display，你可以重写 <code>get_renderables</code> 方法。</p><p>For example, the following class will render a <a href=https://rich.readthedocs.io/en/stable/reference/panel.html#rich.panel.Panel target=_blank rel="external nofollow noopener noreferrer"><code>Panel</code></a> around the progress display:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rich.panel</span> <span class=kn>import</span> <span class=n>Panel</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rich.progress</span> <span class=kn>import</span> <span class=n>Progress</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyProgress</span><span class=p>(</span><span class=n>Progress</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_renderables</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>yield</span> <span class=n>Panel</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>make_tasks_table</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>tasks</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=reading-from-a-file>Reading from a file</h3><p>Rich 可以在读取文件时生成一个进度条。如果你调用 <code>open()</code>，它将返回一个上下文管理器，在你阅读时显示一个进度条。当你不能轻易修改进行读取的代码时，这一点特别有用。</p><p>The following example demonstrates how we might show progress when reading a JSON file:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>rich.progress</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>rich</span><span class=o>.</span><span class=n>progress</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s2>&#34;data.json&#34;</span><span class=p>,</span> <span class=s2>&#34;rb&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>如果你已有一个 file object，你可以调用 <code>wrap_file()</code>，它返回一个包装你文件的上下文管理器，以便显示一个进度条。如果你使用这个函数，你将需要设置你期望读取的字节数或字符数。</p><p>Here’s an example that reads a url from the internet:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>time</span> <span class=kn>import</span> <span class=n>sleep</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>urllib.request</span> <span class=kn>import</span> <span class=n>urlopen</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rich.progress</span> <span class=kn>import</span> <span class=n>wrap_file</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>urlopen</span><span class=p>(</span><span class=s2>&#34;https://www.textualize.io&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>size</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>headers</span><span class=p>[</span><span class=s2>&#34;Content-Length&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>wrap_file</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=n>size</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>line</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&#34;utf-8&#34;</span><span class=p>),</span> <span class=n>end</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>If you expect to be reading from multiple files, you can use <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.open target=_blank rel="external nofollow noopener noreferrer"><code>open()</code></a> or <a href=https://rich.readthedocs.io/en/stable/reference/progress.html#rich.progress.Progress.wrap_file target=_blank rel="external nofollow noopener noreferrer"><code>wrap_file()</code></a> to add a file progress to an existing Progress instance.</p><p>See cp_progress.py <a href=https://github.com/willmcgugan/rich/blob/master/examples/cp_progress.py target=_blank rel="external nofollow noopener noreferrer">https://github.com/willmcgugan/rich/blob/master/examples/cp_progress.py</a> for a minimal clone of the <code>cp</code> command which shows a progress bar as the file is copied.</p><h2 id=multiple-progress>Multiple Progress</h2><p>You can’t have different columns per task with a single Progress instance. However, you can have as many Progress instances as you like in a <a href=https://rich.readthedocs.io/en/stable/live.html#live target=_blank rel="external nofollow noopener noreferrer">Live Display</a>. See <a href=https://github.com/willmcgugan/rich/blob/master/examples/live_progress.py target=_blank rel="external nofollow noopener noreferrer">live_progress.py</a> and <a href=https://github.com/willmcgugan/rich/blob/master/examples/dynamic_progress.py target=_blank rel="external nofollow noopener noreferrer">dynamic_progress.py</a> for examples of using multiple Progress instances.</p><h2 id=example>Example</h2><p>See <a href=https://github.com/willmcgugan/rich/blob/master/examples/downloader.py target=_blank rel="external nofollow noopener noreferrer">downloader.py</a> for a realistic application of a progress display. This script can download multiple concurrent files with a progress bar, transfer speed and file size.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2023-08-02 10:22:00">更新于 2023-08-02</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://trouvaille0198.github.io/Notes/posts/python/%E5%8F%AF%E8%A7%86%E5%8C%96/rich/progress-display/ data-title="Python rich 库 - Progress Display" data-hashtags=Python><i class="fa-brands fa-twitter fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://trouvaille0198.github.io/Notes/posts/python/%E5%8F%AF%E8%A7%86%E5%8C%96/rich/progress-display/ data-hashtag=Python><i class="fa-brands fa-facebook-square fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://trouvaille0198.github.io/Notes/posts/python/%E5%8F%AF%E8%A7%86%E5%8C%96/rich/progress-display/ data-title="Python rich 库 - Progress Display"><i class="fa-brands fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw"></i>&nbsp;<a href=/Notes/tags/python/>Python</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/Notes/>主页</a></span></section></div><div class=post-nav><a href=/Notes/posts/python/%E5%8F%AF%E8%A7%86%E5%8C%96/rich/tables/ class=prev rel=prev title="Python rich 库 - Progress Display"><i class="fa-solid fa-angle-left fa-fw"></i>Python rich 库 - Progress Display</a>
<a href=/Notes/posts/python/%E5%8F%AF%E8%A7%86%E5%8C%96/rich/prompt/ class=next rel=next title="Python rich 库 - Pretty Printing">Python rich 库 - Pretty Printing<i class="fa-solid fa-angle-right fa-fw"></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom">酒困路长惟欲睡，日高人渴漫思茶</div><div class="footer-line copyright"><i class="fa-regular fa-copyright fa-fw"></i>
<span itemprop=copyrightYear>2022 - 2023</span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fa-solid fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fa-solid fa-comment fa-fw"></i></a></div><div id=mask></div></div><link rel=stylesheet href=/Notes/lib/katex/katex.min.css><link rel=stylesheet href=/Notes/lib/katex/copy-tex.min.css><link rel=stylesheet href=/Notes/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/Notes/lib/autocomplete/autocomplete.min.js defer></script><script type=text/javascript src=/Notes/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script type=text/javascript src=/Notes/lib/lazysizes/lazysizes.min.js async defer></script><script type=text/javascript src=/Notes/lib/sharer/sharer.min.js async defer></script><script type=text/javascript src=/Notes/lib/katex/katex.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/Notes/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/Notes/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:45},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"7I9AMOLA4S",algoliaIndex:"Notes",algoliaSearchKey:"3c1638dfe9f4d49a59d81ff6943416b8",highlightTag:"em",maxResultLength:30,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"}}</script><script type=text/javascript src=/Notes/js/theme.min.js defer></script><script type=text/javascript src=/Notes/js/_custom.min.js defer></script></body></html>