(()=>{var h=["/css/style.min.css","/js/theme.min.js","/site.webmanifest","/images/fixit.svg"],m=["/css/style.min.css","/js/theme.min.js","/site.webmanifest","/images/fixit.svg","/offline/"],E=["/css/style.min.css","/js/theme.min.js","/site.webmanifest","/images/fixit.svg","/404.html"],d="/offline/",C="/404.html",r={assets:"assets-v1",content:"content-v1",offline:"offline-v1",notFound:"404-v1"},f={"/":3600,html:3600,json:86400,js:86400,css:86400},u=[e=>!e.startsWith("http://localhost")],g=["GET"];function _(e){return u.length>0?!u.filter(t=>typeof t=="function"?!t(e):!1).length:!1}function A(e){let t=e.split(".").reverse()[0].split("?")[0];return t.endsWith("/")?"/":t}function O(e){if(typeof e=="string"){let t=A(e);return typeof f[t]=="number"?f[t]:null}else return null}function S(){return Promise.all([caches.open(r.assets).then(e=>e.addAll(h)),caches.open(r.offline).then(e=>e.addAll(m)),caches.open(r.notFound).then(e=>e.addAll(E))]).then(()=>self.skipWaiting())}function F(){let e=Object.keys(r).map(t=>r[t]);return new Promise((t,s)=>{caches.keys().then(n=>n.filter(i=>!~e.indexOf(i))).then(n=>{n.length?Promise.all(n.map(i=>caches.delete(i))).then(()=>{t()}).catch(i=>{s(i)}):t()}).catch(n=>{s(n)})})}self.addEventListener("install",e=>{e.waitUntil(Promise.all([S(),self.skipWaiting()]))});self.addEventListener("activate",e=>{e.waitUntil(Promise.all([F(),self.clients.claim(),self.skipWaiting()]).catch(t=>{console.log(t),self.skipWaiting()}))});self.addEventListener("fetch",e=>{e.respondWith(caches.open(r.content).then(t=>t.match(e.request).then(s=>{if(s){let n=s.headers.entries(),i=null;for(let c of n)c[0]==="date"&&(i=new Date(c[1]));if(i){let c=parseInt((new Date().getTime()-i.getTime())/1e3),o=O(e.request.url);return o&&c>o?new Promise(l=>fetch(e.request.clone()).then(a=>{a?(t.put(e.request,a.clone()),l(a)):l(s)}).catch(()=>{l(s)})).catch(l=>(console.log(l),s)):s}else return s}else return null}).then(s=>s||fetch(e.request.clone()).then(n=>n.status<400?(~g.indexOf(e.request.method)&&!_(e.request.url)&&e.request.url.slice(0,4)==="http"&&t.put(e.request,n.clone()),n):caches.open(r.notFound).then(i=>i.match(C))).then(n=>{if(n)return n}).catch(()=>caches.open(r.offline).then(n=>n.match(d)))).catch(s=>{throw console.error("  Error in fetch handler:",s),s})))});})();
